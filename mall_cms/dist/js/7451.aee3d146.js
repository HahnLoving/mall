"use strict";(self["webpackChunklin_cms_vue"]=self["webpackChunklin_cms_vue"]||[]).push([[7451,6881],{16558:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var r=n(66252),i=n(58061),a=n(56612),o=function(e){return(0,r.dD)("data-v-833c29fc"),e=e(),(0,r.Cn)(),e},u={key:0,class:"container"},l={class:"header"},s=o((function(){return(0,r._)("div",{class:"title"},"优惠卷模板列表",-1)})),c=(0,r.Uk)("新增优惠券模板"),d=(0,r.Uk)("编辑"),p=(0,r.Uk)("删除");function m(e,t,n,o,m,f){var w=(0,r.up)("el-button"),h=(0,r.up)("el-table-column"),g=(0,r.up)("el-table"),C=(0,r.up)("coupon-template-edit"),v=(0,r.Q2)("permission"),k=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)("div",null,[m.showEdit?((0,r.wg)(),(0,r.j4)(C,{key:1,onEditClose:f.editClose,isCreate:m.isCreate,couponTemplateId:m.couponId},null,8,["onEditClose","isCreate","couponTemplateId"])):((0,r.wg)(),(0,r.iD)("div",u,[(0,r._)("div",l,[s,(0,r.Wm)(w,{style:{"margin-left":"30px"},onClick:(0,i.iM)(f.addCouponTemplate,["prevent"]),type:"primary",plain:"",size:"medium"},{default:(0,r.w5)((function(){return[c]})),_:1},8,["onClick"])]),(0,r.wy)((0,r.Wm)(g,{stripe:"",data:m.templates},{default:(0,r.w5)((function(){return[(0,r.Wm)(h,{prop:"id",label:"id",width:"100"}),(0,r.Wm)(h,{prop:"title",label:"名称",width:"250"}),(0,r.Wm)(h,{prop:"full_money",label:"满减额",width:"150"}),(0,r.Wm)(h,{prop:"minus",label:"优惠额",width:"150"}),(0,r.Wm)(h,{prop:"rate",label:"折扣",width:"150"}),(0,r.Wm)(h,{prop:"type",label:"类型",width:"150"},{default:(0,r.w5)((function(t){return[(0,r.Uk)((0,a.zw)(t.row.type|e.typeFormat),1)]})),_:1}),(0,r.Wm)(h,{prop:"description",label:"描述","min-width":"300"}),(0,r.Wm)(h,{fixed:"right",width:"150",label:"操作"},{default:(0,r.w5)((function(e){return[(0,r.Wm)(w,{onClick:(0,i.iM)((function(t){return f.handleEdit(e.row)}),["prevent"]),type:"primary",plain:"",size:"mini"},{default:(0,r.w5)((function(){return[d]})),_:2},1032,["onClick"]),(0,r.wy)((0,r.Wm)(w,{onClick:(0,i.iM)((function(t){return f.handleDelete(e.row)}),["prevent"]),type:"danger",size:"mini",plain:""},{default:(0,r.w5)((function(){return[p]})),_:2},1032,["onClick"]),[[v,{auth:["删除优惠卷模板"],type:"disabled"}]])]})),_:1})]})),_:1},8,["data"]),[[k,m.loading]])]))])}var f=n(48534),w=(n(35666),n(27484)),h=n.n(w),g=n(44154),C=n(72733),v={components:{CouponTemplateEdit:C["default"]},props:{activityId:{type:String,default:null}},data:function(){return{couponId:null,isCreate:!1,tableData:[],templates:[],showEdit:!1,loading:!1}},created:function(){var e=this;return(0,f.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$nextTick((function(){e.loading=!0,e.getTemplates(),e.loading=!1}));case 1:case"end":return t.stop()}}),t)})))()},methods:{addCouponTemplate:function(){var e=this;return(0,f.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isCreate=!0,e.couponId=null,e.showEdit=!0;case 3:case"end":return t.stop()}}),t)})))()},getTemplates:function(){var e=this;return(0,f.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g["default"].getCouponTemplates();case 2:n=t.sent,e.templates=n;case 4:case"end":return t.stop()}}),t)})))()},handleEdit:function(e){this.isCreate=!1,this.couponId=e.id,this.showEdit=!0},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((0,f.Z)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,g["default"].deleteCouponTemplate(e.id);case 2:r=n.sent,r.code<window.MAX_SUCCESS_CODE?(t.$message({type:"success",message:"".concat(r.message)}),t.loading=!0,t.getTemplates(),t.loading=!1):(t.loading=!1,t.$message.error("".concat(r.message)));case 4:case"end":return n.stop()}}),n)}))))},editClose:function(){this.showEdit=!1,this.getTemplates()}},filters:{dateFormat:function(e){return h()(e).format("YYYY-MM-DD HH:mm:ss")},typeFormat:function(e){switch(e){case 1:return"满减券";case 2:return"折扣券";case 3:return"无门槛券";case 4:return"满金额折扣券";default:return e}}}},k=n(83744);const y=(0,k.Z)(v,[["render",m],["__scopeId","data-v-833c29fc"]]);var _=y}}]);
//# sourceMappingURL=7451.aee3d146.js.map