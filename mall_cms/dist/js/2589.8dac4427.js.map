{"version":3,"file":"js/2589.8dac4427.js","mappings":"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","sources":["webpack://lin-cms-vue/./src/model/theme.js","webpack://lin-cms-vue/./src/view/theme/theme-edit.vue","webpack://lin-cms-vue/./src/view/theme/theme-edit.vue?fc1b"],"sourcesContent":["import { post, get, put, _delete } from '@/lin/plugin/axios'\n\nclass Theme {\n  static async addTheme(data) {\n    const res = await post('v1/theme', data)\n    return res\n  }\n\n  static async addThemeSpu(data) {\n    const res = await post('v1/theme/spu', data)\n    return res\n  }\n\n  static async getTheme(id) {\n    const res = await get(`v1/theme/${id}`)\n    return res\n  }\n\n  static async getList() {\n    const res = await get(`v1/theme/list`)\n    return res\n  }\n\n  static async editTheme(id, data) {\n    const res = await put(`v1/theme/${id}`, data)\n    return res\n  }\n\n  static async deleteTheme(id) {\n    const res = await _delete(`v1/theme/${id}`)\n    return res\n  }\n\n  static async getThemes(page = 0, count = 10) {\n    const res = await get('v1/theme/page', { page, count })\n    return res\n  }\n\n  static async getSpus(id) {\n    const res = await get('v1/theme/spus', { id })\n    return res\n  }\n\n  static async getSpuList(id) {\n    const res = await get('v1/theme/spu/list', { id })\n    return res\n  }\n\n  static async deleteSpu(id) {\n    const res = await _delete(`v1/theme/spu/${id}`)\n    return res\n  }\n}\n\nexport default Theme\n","<template>\n  <div>\n    <sticky-top>\n      <div class=\"title\">\n        <span>{{ isCreate ? '创建主题' : '更新主题' }}</span>\n        <span class=\"back\" @click=\"back\"> <i class=\"iconfont icon-fanhui\"></i> 返回 </span>\n        <el-divider></el-divider>\n      </div>\n    </sticky-top>\n    <div class=\"container\">\n      <div class=\"wrap\">\n        <el-row>\n          <el-col :lg=\"16\" :md=\"20\" :sm=\"24\" :xs=\"24\">\n            <el-form :model=\"form\" status-icon ref=\"form\" label-width=\"100px\" @submit.native.prevent>\n              <el-form-item label=\"标题\" prop=\"title\">\n                <el-input size=\"medium\" v-model=\"form.title\" placeholder=\"请填写标题\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"名称\" prop=\"title\">\n                <el-input size=\"medium\" v-model=\"form.name\" placeholder=\"请填写名称\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"主题描述\" prop=\"description\">\n                <el-input size=\"medium\" v-model=\"form.description\" placeholder=\"请填写主题描述\"></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"模板名\" prop=\"tpl_name\">\n                <el-select v-model=\"form.tpl_name\" placeholder=\"请选择模板名\">\n                  <el-option v-for=\"item in tpl_options\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\n                </el-select>\n              </el-form-item>\n\n              <el-form-item label=\"是否上线\">\n                <el-switch\n                  size=\"medium\"\n                  v-model=\"onlined\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#ff4949\"\n                  active-text=\"上线\"\n                  inactive-text=\"下线\"\n                ></el-switch>\n              </el-form-item>\n\n              <el-form-item label=\"标题图\" prop=\"title_img\">\n                <upload-imgs :rules=\"rules\" :max-num=\"maxNum\" ref=\"uploadImgEle\" :value=\"initImgData\" />\n              </el-form-item>\n\n              <el-form-item label=\"入口图\" prop=\"entrance_img\">\n                <upload-imgs :rules=\"rules\" :max-num=\"maxNum\" ref=\"uploadEntranceEle\" :value=\"initEntranceData\" />\n              </el-form-item>\n\n              <el-form-item label=\"外部图\" prop=\"entrance_img\">\n                <upload-imgs :rules=\"rules\" :max-num=\"maxNum\" ref=\"uploadInternalEle\" :value=\"initInternalData\" />\n              </el-form-item>\n\n              <el-form-item class=\"submit\">\n                <el-button\n                  v-permission=\"{ permission: ['创建主题', '更新主题'], type: 'disabled' }\"\n                  type=\"primary\"\n                  @click=\"submitForm('form')\"\n                  >保 存</el-button\n                >\n                <!-- <el-button @click=\"resetForm('form')\">重 置</el-button> -->\n              </el-form-item>\n            </el-form>\n          </el-col>\n        </el-row>\n      </div>\n\n      <div v-if=\"!isCreate\" class=\"title plus\">\n        <span>主题下的SPU</span>\n      </div>\n      <div v-if=\"!isCreate\" class=\"wrap\">\n        <el-row>\n          <el-table stripe v-loading=\"loading\" :data=\"tableData\">\n            <el-table-column prop=\"id\" fixed=\"left\" label=\"id\" width=\"100\"></el-table-column>\n            <el-table-column prop=\"img\" label=\"主图\" width=\"200\">\n              <template #default=\"scope\">\n                <img class=\"display_img\" :src=\"scope.row.img\" :alt=\"scope.row.img\" />\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"title\" label=\"标题\" width=\"150\"></el-table-column>\n            <el-table-column prop=\"subtitle\" label=\"副标题\" min-width=\"300\"></el-table-column>\n            <el-table-column fixed=\"right\" width=\"150\" label=\"操作\">\n              <template #default=\"scope\">\n                <el-button\n                  v-permission=\"{ permission: ['删除主题下的spu'], type: 'disabled' }\"\n                  @click.prevent=\"handleDelete(scope.row)\"\n                  type=\"danger\"\n                  size=\"mini\"\n                  plain\n                  >删除</el-button\n                >\n              </template>\n            </el-table-column>\n          </el-table>\n\n          <div class=\"complete\">\n            <el-autocomplete\n              @focus=\"loadSpuSuggestions\"\n              popper-class=\"my-autocomplete\"\n              class=\"inline-input\"\n              v-model=\"spuState\"\n              :fetch-suggestions=\"querySpuSearch\"\n              placeholder=\"添加SPU\"\n              @select=\"handleSpuSelect\"\n            >\n              <template #default=\"{ item }\">\n                <span class=\"id\">{{ item.id }}</span>\n                <span class=\"name\">{{ item.title }}</span>\n              </template>\n            </el-autocomplete>\n            <el-button\n              v-permission=\"{ permission: ['添加主题下的spu'], type: 'disabled' }\"\n              class=\"add\"\n              @click.prevent=\"addThemeSpu\"\n              type=\"primary\"\n              plain\n              size=\"medium\"\n              >添加</el-button\n            >\n          </div>\n        </el-row>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport theme from '@/model/theme'\nimport UploadImgs from '@/component/base/upload-image'\n\nexport default {\n  components: {\n    UploadImgs,\n  },\n  props: {\n    isCreate: {\n      type: Boolean,\n      default: false,\n    },\n    themeId: {\n      type: String,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      form: {\n        title: '',\n        name: '',\n        tpl_name: '',\n        description: '',\n        online: 1,\n        title_img: null,\n        entrance_img: null,\n        internal_top_img: null,\n      },\n      rules: {\n        minWidth: 10,\n        minHeight: 10,\n        maxSize: 5,\n      },\n      initImgData: [],\n      initEntranceData: [],\n      initInternalData: [],\n      maxNum: 1,\n      tableData: [],\n      loading: false,\n      spuState: '',\n      spuId: null,\n      spuSuggestions: [],\n      onlined: true,\n      // tpl_options: ['diana', 'irelia', 'camille', 'janna', 'spu-list'],\n      tpl_options: ['type-1', 'type-2', 'type-3', 'type-4'],\n    }\n  },\n  watch: {\n    onlined(val) {\n      this.form.online = val ? 1 : 0\n    },\n  },\n  async mounted() {\n    if (!this.isCreate) {\n      const res = await theme.getTheme(this.themeId)\n      this.form = res\n      if (this.form.online == 1) {\n        this.onlined = true\n      }else {\n        this.onlined = false\n      }\n      const initImgData = [\n        {\n          id: res.id,\n          display: res.title_img,\n        },\n      ]\n      this.initImgData = initImgData\n      const initEntranceData = [\n        {\n          id: res.id,\n          display: res.entrance_img,\n        },\n      ]\n      this.initEntranceData = initEntranceData\n      const initInternalData = [\n        {\n          id: res.id,\n          display: res.internal_top_img,\n        },\n      ]\n      this.initInternalData = initInternalData\n      await this.getSpus(res.id)\n    }\n  },\n  methods: {\n    // eslint-disable-next-line\n    async submitForm(formName) {\n      await this.getValue()\n      try {\n        const postData = { ...this.form }\n        let res\n        if (this.isCreate) {\n          res = await theme.addTheme(postData)\n        } else {\n          res = await theme.editTheme(this.themeId, postData)\n        }\n        if (res.code < window.MAX_SUCCESS_CODE) {\n          this.$message.success(`${res.message}`)\n          this.$confirm('是否返回上一页', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning',\n          }).then(async () => {\n            this.$emit('editClose')\n          })\n        }\n      } catch (error) {\n        console.error(error)\n      }\n    },\n    async addThemeSpu() {\n      const info = { theme_id: this.form.id, spu_id: this.spuId }\n      try {\n        const res = await theme.addThemeSpu(info)\n        if (res.code < window.MAX_SUCCESS_CODE) {\n          this.$message.success(`${res.message}`)\n          this.getSpus(this.form.id)\n          this.spuId = null\n          this.spuState = ''\n        }\n      } catch (error) {\n        console.error(error)\n      }\n    },\n    async getSpus(id) {\n      const spus = await theme.getSpus(id)\n      this.tableData = spus\n    },\n    async loadSpuSuggestions() {\n      if (this.spuSuggestions.length > 0) {\n        return\n      }\n      try {\n        if (!this.isCreate) {\n          this.spuSuggestions = await theme.getSpuList(this.form.id)\n          if (this.spuSuggestions.length === 0) {\n            this.$message.error('未找到SPU，请先添加SPU')\n          }\n        }\n      } catch (error) {\n        this.$message.error('获取SPU信息失败')\n        console.error(error)\n      }\n    },\n    querySpuSearch(queryString, cb) {\n      // eslint-disable-next-line\n      const suggestions = this.spuSuggestions\n      const results = queryString ? suggestions.filter(this.createSpuFilter(queryString)) : suggestions\n      cb(results)\n    },\n    createSpuFilter(queryString) {\n      // eslint-disable-next-line\n      return suggestion => {\n        return suggestion.title.toLowerCase().indexOf(queryString.toLowerCase()) === 0\n      }\n    },\n    handleSpuSelect(item) {\n      this.spuState = item.title\n      this.spuId = item.id\n    },\n    async getValue() {\n      const val = await this.$refs.uploadImgEle.getValue()\n      if (val && val.length > 0) {\n        this.form.title_img = val[0].display\n      }\n      const val1 = await this.$refs.uploadEntranceEle.getValue()\n      if (val1 && val1.length > 0) {\n        this.form.entrance_img = val1[0].display\n      }\n      const val2 = await this.$refs.uploadInternalEle.getValue()\n      if (val2 && val2.length > 0) {\n        this.form.internal_top_img = val2[0].display\n      }\n    },\n    async handleDelete(row) {\n      try {\n        const res = await theme.deleteSpu(row.tid)\n        if (res.code < window.MAX_SUCCESS_CODE) {\n          this.$message.success(`${res.message}`)\n          await this.getSpus(this.form.id)\n        }\n      } catch (error) {\n        console.error(error)\n      }\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    },\n    back() {\n      this.$emit('editClose')\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.el-divider--horizontal {\n  margin: 0;\n}\n\n.container {\n  .title {\n    height: 59px;\n    line-height: 59px;\n    color: $parent-title-color;\n    font-size: 16px;\n    font-weight: 500;\n    text-indent: 40px;\n\n    .back {\n      float: right;\n      margin-right: 40px;\n      cursor: pointer;\n    }\n  }\n\n  .wrap {\n    padding: 20px;\n  }\n\n  .submit {\n    float: left;\n  }\n}\n\n.display_img {\n  max-width: 100px;\n  max-height: 50px;\n  width: auto;\n  height: auto;\n}\n\n.plus {\n  display: flex;\n  justify-content: space-between;\n}\n\n.complete {\n  margin-top: 20px;\n  display: flex;\n  .add {\n    margin-left: 10px;\n  }\n}\n\n.my-autocomplete {\n  li {\n    line-height: normal;\n    padding: 7px;\n    display: inline-flex;\n    align-content: space-around;\n    .name {\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n    .id {\n      margin-right: 15px;\n      font-size: 12px;\n      color: #b4b4b4;\n    }\n\n    .highlighted .addr {\n      color: #ddd;\n    }\n  }\n}\n</style>\n","import { render } from \"./theme-edit.vue?vue&type=template&id=31445a1c&scoped=true\"\nimport script from \"./theme-edit.vue?vue&type=script&lang=js\"\nexport * from \"./theme-edit.vue?vue&type=script&lang=js\"\n\nimport \"./theme-edit.vue?vue&type=style&index=0&id=31445a1c&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhahn/Documents/Hahn/自考/mall/mall_cms/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-31445a1c\"]])\n\nexport default __exports__"],"names":["Theme","data","post","res","id","get","put","_delete","page","count","class","isCreate","back","lg","md","sm","xs","model","form","ref","label","prop","size","title","placeholder","name","description","tpl_name","tpl_options","item","key","value","onlined","rules","maxNum","initImgData","initEntranceData","initInternalData","type","submitForm","stripe","tableData","fixed","width","default","src","scope","row","img","alt","handleDelete","plain","loading","loadSpuSuggestions","spuState","querySpuSearch","handleSpuSelect","addThemeSpu","components","UploadImgs","props","Boolean","themeId","String","online","title_img","entrance_img","internal_top_img","minWidth","minHeight","maxSize","spuId","spuSuggestions","watch","val","this","mounted","theme","display","getSpus","methods","formName","getValue","postData","code","window","MAX_SUCCESS_CODE","$message","success","message","$confirm","confirmButtonText","cancelButtonText","then","$emit","console","error","info","theme_id","spu_id","spus","length","queryString","cb","suggestions","results","filter","createSpuFilter","suggestion","toLowerCase","indexOf","$refs","uploadImgEle","uploadEntranceEle","val1","uploadInternalEle","val2","tid","resetForm","resetFields","__exports__","render"],"sourceRoot":""}