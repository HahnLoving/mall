"use strict";(self["webpackChunklin_cms_vue"]=self["webpackChunklin_cms_vue"]||[]).push([[7838,3602,7551,2343,8630],{23123:function(e,t,n){var r=n(27007),u=n(47850),a=n(19670),i=n(84488),s=n(36707),c=n(31530),o=n(17466),l=n(97651),p=n(22261),f=n(52999),m=f.UNSUPPORTED_Y,d=[].push,g=Math.min,v=4294967295;r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(i(this)),a=void 0===n?v:n>>>0;if(0===a)return[];if(void 0===e)return[r];if(!u(e))return t.call(r,e,a);var s,c,o,l=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,g=new RegExp(e.source,f+"g");while(s=p.call(g,r)){if(c=g.lastIndex,c>m&&(l.push(r.slice(m,s.index)),s.length>1&&s.index<r.length&&d.apply(l,s.slice(1)),o=s[0].length,m=c,l.length>=a))break;g.lastIndex===s.index&&g.lastIndex++}return m===r.length?!o&&g.test("")||l.push(""):l.push(r.slice(m)),l.length>a?l.slice(0,a):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var u=i(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,u,n):r.call(String(u),t,n)},function(e,u){var i=n(r,e,this,u,r!==t);if(i.done)return i.value;var p=a(e),f=String(this),d=s(p,RegExp),h=p.unicode,y=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(m?"g":"y"),w=new d(m?"^(?:"+p.source+")":p,y),k=void 0===u?v:u>>>0;if(0===k)return[];if(0===f.length)return null===l(w,f)?[f]:[];var x=0,_=0,S=[];while(_<f.length){w.lastIndex=m?0:_;var b,R=l(w,m?f.slice(_):f);if(null===R||(b=g(o(w.lastIndex+(m?_:0)),f.length))===x)_=c(f,_,h);else{if(S.push(f.slice(x,_)),S.length===k)return S;for(var Z=1;Z<=R.length-1;Z++)if(S.push(R[Z]),S.length===k)return S;_=x=b}}return S.push(f.slice(x)),S}]}),m)},63602:function(e,t,n){n.r(t);var r=n(48534),u=n(13087),a=n(62833),i=(n(35666),n(12109)),s=function(){function e(){(0,u.Z)(this,e)}return(0,a.Z)(e,null,[{key:"addCategory",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.post)("v1/category",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCategory",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/category/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"editCategory",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.put)("v1/category/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deleteCategory",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i._delete)("v1/category/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCategories",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){var t,n,r,u,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:0,n=a.length>1&&void 0!==a[1]?a[1]:10,r=a.length>2&&void 0!==a[2]?a[2]:1,e.next=5,(0,i.get)("v1/category/page",{page:t,count:n,root:r});case 5:return u=e.sent,e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSubCategories",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){var t,n,r,u,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:0,n=a.length>1&&void 0!==a[1]?a[1]:10,r=a.length>2&&void 0!==a[2]?a[2]:1,e.next=5,(0,i.get)("v1/category/sub-page",{page:t,count:n,id:r});case 5:return u=e.sent,e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/category/list");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();t["default"]=s},87551:function(e,t,n){n.r(t);var r=n(48534),u=n(13087),a=n(62833),i=(n(35666),n(12109)),s=function(){function e(){(0,u.Z)(this,e)}return(0,a.Z)(e,null,[{key:"addSku",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.post)("v1/sku",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSku",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/sku/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSkuDetail",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/sku/".concat(t,"/detail"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"editSku",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.put)("v1/sku/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deleteSku",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i._delete)("v1/sku/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSkus",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){var t,n,r,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:0,n=u.length>1&&void 0!==u[1]?u[1]:10,e.next=4,(0,i.get)("v1/sku/page",{page:t,count:n});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBySpuId",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/sku/by/spu/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSpecValueId",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/sku/spec-value-id",{key_id:n,sku_id:t});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}();t["default"]=s},32343:function(e,t,n){n.r(t);var r=n(48534),u=n(13087),a=n(62833),i=(n(35666),n(12109)),s=function(){function e(){(0,u.Z)(this,e)}return(0,a.Z)(e,null,[{key:"addSpecKey",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.post)("v1/spec-key",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSpecKey",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/spec-key/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSpecKeyDetail",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/spec-key/".concat(t,"/detail"));case 2:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"editSpecKey",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.put)("v1/spec-key/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deleteSpecKey",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i._delete)("v1/spec-key/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSpecKeys",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){var t,n,r,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:0,n=u.length>1&&void 0!==u[1]?u[1]:10,e.next=4,(0,i.get)("v1/spec-key/page",{page:t,count:n});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/spec-key/list");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBySpuId",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/spec-key/by/spu/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t["default"]=s},48630:function(e,t,n){n.r(t);var r=n(48534),u=n(13087),a=n(62833),i=(n(35666),n(12109)),s=function(){function e(){(0,u.Z)(this,e)}return(0,a.Z)(e,null,[{key:"addSpu",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.post)("v1/spu",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSpu",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/spu/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDetail",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/spu/".concat(t,"/detail"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"editSpu",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.put)("v1/spu/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deleteSpu",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i._delete)("v1/spu/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSpus",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){var t,n,r,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:0,n=u.length>1&&void 0!==u[1]?u[1]:10,e.next=4,(0,i.get)("v1/spu/page",{page:t,count:n});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/spu/list");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSpecKeys",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/spu/key",{id:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addSpecKey",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.post)("v1/spu/key",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t["default"]=s},20825:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var r=n(66252),u=n(56612),a=n(58061),i=(0,r.Uk)("添加标签");function s(e,t,n,s,c,o){var l=(0,r.up)("el-tag"),p=(0,r.up)("el-input"),f=(0,r.up)("el-button");return(0,r.wg)(),(0,r.iD)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.dynamicTags,(function(e){return(0,r.wg)(),(0,r.j4)(l,{key:e,closable:"","disable-transitions":!1,onClose:function(t){return o.handleClose(e)}},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,u.zw)(e),1)]})),_:2},1032,["onClose"])})),128)),c.inputVisible?((0,r.wg)(),(0,r.j4)(p,{key:0,class:"input-new-tag",modelValue:c.inputValue,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.inputValue=e}),ref:"saveTagInput",size:"small",onKeyup:(0,a.D2)(o.handleInputConfirm,["enter","native"]),onBlur:o.handleInputConfirm},null,8,["modelValue","onKeyup","onBlur"])):((0,r.wg)(),(0,r.j4)(f,{key:1,class:"button-new-tag",size:"small",onClick:o.showInput},{default:(0,r.w5)((function(){return[i]})),_:1},8,["onClick"]))])}n(40561);var c={model:{prop:"dynamicTags",event:"change"},props:{dynamicTags:{type:Array,default:function(){return[]}}},data:function(){return{inputVisible:!1,inputValue:""}},created:function(){},methods:{handleClose:function(e){this.dynamicTags.splice(this.dynamicTags.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;e&&this.dynamicTags.push(e),this.$emit("change",this.dynamicTags),this.inputVisible=!1,this.inputValue=""}}},o=n(83744);const l=(0,o.Z)(c,[["render",s]]);var p=l},87838:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});n(68309),n(82526),n(41817);var r=n(66252),u=n(56612),a=n(58061),i=function(e){return(0,r.dD)("data-v-30d11d14"),e=e(),(0,r.Cn)(),e},s={class:"title"},c=i((function(){return(0,r._)("i",{class:"iconfont icon-fanhui"},null,-1)})),o=(0,r.Uk)(" 返回 "),l=[c,o],p={class:"container"},f={class:"wrap"},m={class:"id"},d={class:"name"},g={class:"id"},v={class:"name"},h=(0,r.Uk)("保 存");function y(e,t,n,i,c,o){var y=(0,r.up)("el-divider"),w=(0,r.up)("sticky-top"),k=(0,r.up)("el-input"),x=(0,r.up)("el-form-item"),_=(0,r.up)("el-autocomplete"),S=(0,r.up)("el-switch"),b=(0,r.up)("upload-imgs"),R=(0,r.up)("el-tooltip"),Z=(0,r.up)("dynamic-tag"),C=(0,r.up)("el-cascader"),V=(0,r.up)("el-button"),W=(0,r.up)("el-form"),D=(0,r.up)("el-col"),I=(0,r.up)("el-row"),K=(0,r.Q2)("permission");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(w,null,{default:(0,r.w5)((function(){return[(0,r._)("div",s,[(0,r._)("span",null,(0,u.zw)(n.isCreate?"创建SPU":"更新SPU"),1),(0,r._)("span",{class:"back",onClick:t[0]||(t[0]=function(){return o.back&&o.back.apply(o,arguments)})},l),(0,r.Wm)(y)])]})),_:1}),(0,r._)("div",p,[(0,r._)("div",f,[(0,r.Wm)(I,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(D,{lg:16,md:20,sm:24,xs:24},{default:(0,r.w5)((function(){return[(0,r.Wm)(W,{model:c.form,"status-icon":"",ref:"form","label-width":"100px",onSubmit:t[11]||(t[11]=(0,a.iM)((function(){}),["prevent"]))},{default:(0,r.w5)((function(){return[(0,r.Wm)(x,{label:"标题",prop:"title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(k,{size:"medium",modelValue:c.form.title,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.form.title=e}),placeholder:"请填写标题"},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(x,{label:"副标题",prop:"subtitle"},{default:(0,r.w5)((function(){return[(0,r.Wm)(k,{size:"medium",modelValue:c.form.subtitle,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.form.subtitle=e}),placeholder:"请填写副标题"},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(x,{label:"价格",prop:"price"},{default:(0,r.w5)((function(){return[(0,r.Wm)(k,{size:"medium",modelValue:c.form.price,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.form.price=e}),placeholder:"请填写价格"},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(x,{label:"折扣",prop:"rate_price"},{default:(0,r.w5)((function(){return[(0,r.Wm)(k,{size:"medium",modelValue:c.form.rate_price,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.form.rate_price=e}),placeholder:"请填写折扣"},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(x,{label:"分类",prop:"category_id"},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{onFocus:o.loadCategorySuggestions,"popper-class":"my-autocomplete",class:"inline-input",modelValue:c.categoryState,"onUpdate:modelValue":t[5]||(t[5]=function(e){return c.categoryState=e}),"fetch-suggestions":o.queryCategorySearch,placeholder:"请填写所属分类",onSelect:o.handleCategorySelect},{default:(0,r.w5)((function(e){var t=e.item;return[(0,r._)("span",m,(0,u.zw)(t.id),1),(0,r._)("span",d,(0,u.zw)(t.name),1)]})),_:1},8,["onFocus","modelValue","fetch-suggestions","onSelect"])]})),_:1}),(0,r.Wm)(x,{label:"默认sku",prop:"default_sku_id"},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{onFocus:o.loadSkuSuggestions,"popper-class":"my-autocomplete",class:"inline-input",modelValue:c.skuState,"onUpdate:modelValue":t[6]||(t[6]=function(e){return c.skuState=e}),"fetch-suggestions":o.querySkuSearch,placeholder:"请填写默认sku",onSelect:o.handleSkuSelect},{default:(0,r.w5)((function(e){var t=e.item;return[(0,r._)("span",g,(0,u.zw)(t.id),1),(0,r._)("span",v,(0,u.zw)(t.title),1)]})),_:1},8,["onFocus","modelValue","fetch-suggestions","onSelect"])]})),_:1}),(0,r.Wm)(x,{label:"是否上架"},{default:(0,r.w5)((function(){return[(0,r.Wm)(S,{size:"medium",modelValue:c.saled,"onUpdate:modelValue":t[7]||(t[7]=function(e){return c.saled=e}),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"上架","inactive-text":"下架"},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(x,{label:"主图",prop:"img"},{default:(0,r.w5)((function(){return[(0,r.Wm)(R,{class:"item",effect:"dark",content:"主图可以选择不上传，默认选择轮播图的第一张为主图",placement:"top-start"},{default:(0,r.w5)((function(){return[(0,r.Wm)(b,{multiple:"","max-num":c.mainMaxNun,ref:"uploadEle",value:c.initData},null,8,["max-num","value"])]})),_:1})]})),_:1}),(0,r.Wm)(x,{label:"主题图",prop:"for_theme_img"},{default:(0,r.w5)((function(){return[(0,r.Wm)(b,{"max-num":c.mainMaxNun,ref:"uploadThmeEle",value:c.initThemeData},null,8,["max-num","value"])]})),_:1}),(0,r.Wm)(x,{label:"轮播图",prop:"spu_img_list"},{default:(0,r.w5)((function(){return[(0,r.Wm)(b,{multiple:"",sortable:"","max-num":c.maxNum,ref:"uploadBannerEle",value:c.initBannerData},null,8,["max-num","value"])]})),_:1}),(0,r.Wm)(x,{label:"详情图",prop:"spu_detail_img_list"},{default:(0,r.w5)((function(){return[(0,r.Wm)(b,{multiple:"",sortable:"","max-num":c.maxNum,ref:"uploadDetailEle",value:c.initDetailData},null,8,["max-num","value"])]})),_:1}),(0,r.Wm)(x,{label:"标签",prop:"tags"},{default:(0,r.w5)((function(){return[(0,r.Wm)(Z,{dynamicTags:c.dynamicTags},null,8,["dynamicTags"])]})),_:1}),(0,r.Wm)(x,{label:"选择规格",prop:"specs"},{default:(0,r.w5)((function(){return[(0,r.Wm)(C,{placeholder:"选择规格（可多选）",modelValue:c.specs,"onUpdate:modelValue":t[8]||(t[8]=function(e){return c.specs=e}),props:c.cascaderProps},null,8,["modelValue","props"])]})),_:1}),(0,r.Wm)(x,{label:"描述",prop:"description"},{default:(0,r.w5)((function(){return[(0,r.Wm)(k,{size:"medium",modelValue:c.form.description,"onUpdate:modelValue":t[9]||(t[9]=function(e){return c.form.description=e}),placeholder:"请填写描述"},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(x,{class:"submit"},{default:(0,r.w5)((function(){return[(0,r.wy)((0,r.Wm)(V,{type:"primary",onClick:t[10]||(t[10]=function(e){return o.submitForm("form")})},{default:(0,r.w5)((function(){return[h]})),_:1},512),[[K,{permission:["创建SPU","更新SPU"],type:"disabled"}]])]})),_:1})]})),_:1},8,["model"])]})),_:1})]})),_:1})])])])}var w=n(95082),k=n(48534),x=(n(35666),n(21249),n(92222),n(74916),n(23123),n(69600),n(57327),n(41539),n(48630)),_=n(63602),S=n(87551),b=n(32343),R=n(5892),Z=n(20825),C={components:{UploadImgs:R["default"],DynamicTag:Z["default"]},props:{isCreate:{type:Boolean,default:!1},spuId:{type:String,default:null}},data:function(){return{form:{title:"",subtitle:"",rate_price:null,category_id:null,online:1,price:null,sketch_spec_id:null,default_sku_id:null,img:null,description:null,spu_img_list:null,spu_detail_img_list:null},rules:{minWidth:100,minHeight:100,maxSize:5},dynamicTags:[],initData:[],initThemeData:[],initBannerData:[],initDetailData:[],maxNum:5,mainMaxNun:1,saled:!0,categoryState:"",specKeyState:"",skuState:"",categorySuggestions:[],specKeySuggestions:[],skuSuggestions:[],specs:[],cascaderProps:{lazy:!0,multiple:!0,lazyLoad:function(e,t){var n=this;return(0,k.Z)(regeneratorRuntime.mark((function r(){var u,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return u=e.level,r.prev=1,r.next=4,b["default"].getList();case 4:a=r.sent,i=a.map((function(e){return{value:e.id,label:"".concat(e.id," - ").concat(e.name),leaf:u>=0}})),t(i),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](1),n.$message.error("获取规格信息失败，请检查网络");case 12:case"end":return r.stop()}}),r,null,[[1,9]])})))()}}}},watch:{saled:function(e){this.form.online=e?1:0}},mounted:function(){var e=this;return(0,k.Z)(regeneratorRuntime.mark((function t(){var n,r,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isCreate){t.next=19;break}return t.next=3,x["default"].getDetail(e.spuId);case 3:return n=t.sent,e.form=n,r=[{id:n.id,display:n.img}],e.saled=1===n.online,e.initData=r,e.initThemeData=[{id:n.id,display:n.for_theme_img}],e.initBannerData=n.spu_img_list?n.spu_img_list.map((function(e,t){return{id:t,display:e}})):[],e.initDetailData=n.spu_detail_img_list?n.spu_detail_img_list.map((function(e,t){return{id:t,display:e}})):[],e.specKeyState=n.sketch_spec_key_name,e.categoryState=n.category_name,e.skuState=n.default_sku_title,t.next=16,x["default"].getSpecKeys(e.spuId);case 16:u=t.sent,e.specs=u.map((function(e){return[e]})),e.dynamicTags=n.tags?n.tags.split("$"):[];case 19:case"end":return t.stop()}}),t)})))()},methods:{submitForm:function(e){var t=this;return(0,k.Z)(regeneratorRuntime.mark((function e(){var n,r,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getValue();case 2:if(n=(0,w.Z)({},t.form),r=t.dynamicTags.join("$"),n.spec_key_id_list=t.specs.map((function(e){return e[0]})),n.tags=r,!t.isCreate){e.next=12;break}return e.next=9,x["default"].addSpu(n);case 9:u=e.sent,e.next=15;break;case 12:return e.next=14,x["default"].editSpu(t.spuId,n);case 14:u=e.sent;case 15:u.code<window.MAX_SUCCESS_CODE&&(t.$message.success("".concat(u.message)),t.$confirm("是否返回上一页","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((0,k.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$emit("editClose");case 1:case"end":return e.stop()}}),e)})))));case 16:case"end":return e.stop()}}),e)})))()},resetForm:function(e){this.$refs[e].resetFields()},queryCategorySearch:function(e,t){var n=this.categorySuggestions,r=e?n.filter(this.createCategoryFilter(e)):n;t(r)},querySpecKeySearch:function(e,t){var n=this.specKeySuggestions,r=e?n.filter(this.createCategoryFilter(e)):n;t(r)},querySkuSearch:function(e,t){var n=this.skuSuggestions,r=e?n.filter(this.createSkuFilter(e)):n;t(r)},createCategoryFilter:function(e){return function(t){return 0===t.name.toLowerCase().indexOf(e.toLowerCase())}},createSkuFilter:function(e){return function(t){return 0===t.title.toLowerCase().indexOf(e.toLowerCase())}},handleCategorySelect:function(e){this.categoryState=e.name,this.form.category_id=e.id},handleSpecKeySelect:function(e){this.specKeyState=e.name,this.form.sketch_spec_id=e.id},handleSkuSelect:function(e){this.skuState=e.title,this.form.default_sku_id=e.id},getValue:function(){var e=this;return(0,k.Z)(regeneratorRuntime.mark((function t(){var n,r,u,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.uploadEle.getValue();case 2:return n=t.sent,n&&n.length>0&&(e.form.img=n[0].display),t.next=6,e.$refs.uploadThmeEle.getValue();case 6:return r=t.sent,r&&r.length>0&&(e.form.for_theme_img=r[0].display),t.next=10,e.$refs.uploadBannerEle.getValue();case 10:return u=t.sent,u&&u.length>0&&(e.form.spu_img_list=u.map((function(e){return e.display}))),t.next=14,e.$refs.uploadDetailEle.getValue();case 14:a=t.sent,a&&a.length>0&&(e.form.spu_detail_img_list=a.map((function(e){return e.display})));case 16:case"end":return t.stop()}}),t)})))()},back:function(){this.$emit("editClose")},loadCategorySuggestions:function(){var e=this;return(0,k.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.categorySuggestions.length>0)){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,_["default"].getList();case 5:e.categorySuggestions=t.sent,0===e.categorySuggestions.length&&e.$message.error("暂无分类，请先添加"),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](2),e.$message.error("获取分类建议信息失败"),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()},loadSpecKeySuggestions:function(){var e=this;return(0,k.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.specKeySuggestions.length>0)){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,e.isCreate){t.next=9;break}return t.next=6,b["default"].getBySpuId(e.spuId);case 6:e.specKeySuggestions=t.sent,t.next=10;break;case 9:e.specKeySuggestions=e.specs;case 10:0===e.specKeySuggestions.length&&e.$message.error("暂无规格名，请先添加"),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](2),e.$message.error("获取规格键建议信息失败"),console.error(t.t0);case 17:case"end":return t.stop()}}),t,null,[[2,13]])})))()},loadSkuSuggestions:function(){var e=this;return(0,k.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.skuSuggestions.length>0)){t.next=2;break}return t.abrupt("return");case 2:if(e.isCreate){t.next=7;break}return t.next=5,S["default"].getBySpuId(e.spuId);case 5:e.skuSuggestions=t.sent,0===e.skuSuggestions.length&&e.$message.error("暂无SKU，请先添加");case 7:case"end":return t.stop()}}),t)})))()}}},V=n(83744);const W=(0,V.Z)(C,[["render",y],["__scopeId","data-v-30d11d14"]]);var D=W}}]);
//# sourceMappingURL=7838.d02235b5.js.map