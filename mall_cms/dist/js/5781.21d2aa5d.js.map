{"version":3,"file":"js/5781.21d2aa5d.js","mappings":"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","sources":["webpack://lin-cms-vue/./src/model/sku.js","webpack://lin-cms-vue/./src/model/spec-key.js","webpack://lin-cms-vue/./src/model/spec-value.js","webpack://lin-cms-vue/./src/model/spu.js","webpack://lin-cms-vue/./src/view/sku/sku-edit.vue","webpack://lin-cms-vue/./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","webpack://lin-cms-vue/./src/view/sku/sku-edit.vue?71cf"],"sourcesContent":["import { post, get, put, _delete } from '@/lin/plugin/axios'\n\nclass Sku {\n  static async addSku(data) {\n    const res = await post('v1/sku', data)\n    return res\n  }\n\n  static async getSku(id) {\n    const res = await get(`v1/sku/${id}`)\n    return res\n  }\n\n  static async getSkuDetail(id) {\n    const res = await get(`v1/sku/${id}/detail`)\n    return res\n  }\n\n  static async editSku(id, data) {\n    const res = await put(`v1/sku/${id}`, data)\n    return res\n  }\n\n  static async deleteSku(id) {\n    const res = await _delete(`v1/sku/${id}`)\n    return res\n  }\n\n  static async getSkus(page = 0, count = 10) {\n    const res = await get('v1/sku/page', { page, count })\n    return res\n  }\n\n  static async getBySpuId(spuId) {\n    const res = await get(`v1/sku/by/spu/${spuId}`)\n    return res\n  }\n\n  static async getSpecValueId(skuId, keyId) {\n    const res = await get('v1/sku/spec-value-id', { key_id: keyId, sku_id: skuId })\n    return res\n  }\n}\n\nexport default Sku\n","import { post, get, put, _delete } from '@/lin/plugin/axios'\n\nclass SpecKey {\n  static async addSpecKey(data) {\n    const res = await post('v1/spec-key', data)\n    return res\n  }\n\n  static async getSpecKey(id) {\n    const res = await get(`v1/spec-key/${id}`)\n    return res\n  }\n\n  static async getSpecKeyDetail(id) {\n    const res = await get(`v1/spec-key/${id}/detail`)\n    return res\n    return\n  }\n\n  static async editSpecKey(id, data) {\n    const res = await put(`v1/spec-key/${id}`, data)\n    return res\n  }\n\n  static async deleteSpecKey(id) {\n    const res = await _delete(`v1/spec-key/${id}`)\n    return res\n  }\n\n  static async getSpecKeys(page = 0, count = 10) {\n    const res = await get('v1/spec-key/page', {\n      page,\n      count,\n    })\n    return res\n  }\n\n  static async getList() {\n    const res = await get('v1/spec-key/list')\n    return res\n  }\n\n  static async getBySpuId(spuId) {\n    const res = await get(`v1/spec-key/by/spu/${spuId}`)\n    return res\n  }\n}\n\nexport default SpecKey\n","import { post, get, put, _delete } from '../lin/plugin/axios'\n\nclass SpecValue {\n  static async addSpecValue(data) {\n    const res = await post('v1/spec-value', data)\n    return res\n  }\n\n  static async getSpecValue(id) {\n    const res = await get(`v1/spec-value/${id}`)\n    return res\n  }\n\n  static async editSpecValue(id, data) {\n    const res = await put(`v1/spec-value/${id}`, data)\n    return res\n  }\n\n  static async deleteSpecValue(id) {\n    const res = await _delete(`v1/spec-value/${id}`)\n    return res\n  }\n\n  static async getSpecValues(page = 0, count = 10) {\n    const res = await get('v1/spec-value/page', {\n      page,\n      count,\n    })\n    return res\n  }\n\n  static async getBySpecKeyId(keyId) {\n    const res = await get(`v1/spec-value/by/spec-key/${keyId}`)\n    return res\n  }\n}\nexport default SpecValue\n","import { post, get, _delete, put } from '@/lin/plugin/axios'\n\nclass Spu {\n  static async addSpu(data) {\n    const res = await post('v1/spu', data)\n    return res\n  }\n\n  static async getSpu(id) {\n    const res = await get(`v1/spu/${id}`)\n    return res\n  }\n\n  static async getDetail(id) {\n    const res = await get(`v1/spu/${id}/detail`)\n    return res\n  }\n\n  static async editSpu(id, data) {\n    const res = await put(`v1/spu/${id}`, data)\n    return res\n  }\n\n  static async deleteSpu(id) {\n    const res = await _delete(`v1/spu/${id}`)\n    return res\n  }\n\n  static async getSpus(page = 0, count = 10) {\n    const res = await get('v1/spu/page', { page, count })\n    return res\n  }\n\n  static async getList() {\n    const res = await get('v1/spu/list')\n    return res\n  }\n\n  static async getSpecKeys(id) {\n    const res = await get('v1/spu/key', { id })\n    return res\n  }\n\n  static async addSpecKey(data) {\n    const res = await post('v1/spu/key', data)\n    return res\n  }\n}\n\nexport default Spu\n","<template>\n  <div>\n    <sticky-top>\n      <div class=\"title\">\n        <span>{{ isCreate ? '创建SKU' : '更新SKU' }}</span>\n        <span class=\"back\" @click=\"back\"> <i class=\"iconfont icon-fanhui\"></i> 返回 </span>\n        <el-divider></el-divider>\n      </div>\n    </sticky-top>\n    <div class=\"container\">\n      <div class=\"wrap\">\n        <el-row>\n          <el-col :lg=\"16\" :md=\"20\" :sm=\"24\" :xs=\"24\">\n            <el-form :model=\"form\" status-icon ref=\"form\" label-width=\"100px\" @submit.native.prevent>\n              <el-form-item label=\"标题\" prop=\"title\">\n                <el-input size=\"medium\" v-model=\"form.title\" placeholder=\"请填写标题\"></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"价格\" prop=\"price\">\n                <el-input-number v-model=\"form.price\" :precision=\"2\" :step=\"0.1\"></el-input-number>\n              </el-form-item>\n\n              <!-- 折扣价 打折，或者折扣价 -->\n              <el-form-item label=\"折扣价\" prop=\"rate_price\">\n                <el-radio-group v-model=\"radio\">\n                  <el-radio :label=\"1\">无折扣</el-radio>\n                  <el-radio :label=\"2\">折扣价</el-radio>\n                  <el-radio :label=\"3\">打折</el-radio>\n                </el-radio-group>\n                <el-input\n                  :disabled=\"radio === 1\"\n                  style=\"margin:5px 0;\"\n                  size=\"medium\"\n                  v-model=\"discount_price_kernel\"\n                ></el-input>\n                <el-input disabled size=\"medium\" v-model=\"form.rate_price\"></el-input>\n              </el-form-item>\n\n              <el-form-item v-if=\"!isCreate\" label=\"编码\" prop=\"code\">\n                <el-input disabled size=\"medium\" v-model=\"form.code\" placeholder=\"请填写编码\"></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"库存\" prop=\"stock\">\n                <el-input-number v-model=\"form.stock\" :step=\"1\" step-strictly></el-input-number>\n              </el-form-item>\n\n              <el-form-item label=\"SPU\" prop=\"spu_id\">\n                <el-autocomplete\n                  @focus=\"loadSpuSuggestions\"\n                  popper-class=\"my-autocomplete\"\n                  class=\"inline-input\"\n                  v-model=\"spuState\"\n                  :fetch-suggestions=\"querySpuSearch\"\n                  placeholder=\"请填写所属SPU\"\n                  @select=\"handleSpuSelect\"\n                >\n                  <template #default=\"{ item }\">\n                    <span class=\"id\">{{ item.id }}</span>\n                    <span class=\"name\">{{ item.title }}</span>\n                  </template>\n                </el-autocomplete>\n              </el-form-item>\n\n              <el-form-item label=\"是否上架\">\n                <el-switch\n                  size=\"medium\"\n                  v-model=\"saled\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#ff4949\"\n                  active-text=\"上架\"\n                  inactive-text=\"下架\"\n                ></el-switch>\n              </el-form-item>\n\n              <el-form-item label=\"图片\" prop=\"img\">\n                <upload-imgs :max-num=\"maxNum\" ref=\"uploadEle\" :value=\"initData\" />\n              </el-form-item>\n\n              <el-form-item\n                v-for=\"(specKey, index) in specKeys\"\n                :key=\"index\"\n                :label=\"`选择${specKey.name}`\"\n                :prop=\"specKey.name\"\n              >\n                <el-cascader\n                  :placeholder=\"`选择${specKey.name}`\"\n                  v-model=\"specs[index]\"\n                  :props=\"makeProps(specKey.id)\"\n                ></el-cascader>\n              </el-form-item>\n\n              <el-form-item class=\"submit\">\n                <el-button\n                  v-permission=\"{ permission: ['创建SKU', '更新SKU'], type: 'disabled' }\"\n                  type=\"primary\"\n                  @click=\"submitForm('form')\"\n                  >保 存</el-button\n                >\n                <!-- <el-button @click=\"resetForm('form')\">重 置</el-button> -->\n              </el-form-item>\n            </el-form>\n          </el-col>\n        </el-row>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Spu from '@/model/spu'\nimport Sku from '@/model/sku'\nimport SpecKey from '@/model/spec-key'\nimport SpecValue from '@/model/spec-value'\nimport UploadImgs from '@/component/base/upload-image'\n\nexport default {\n  components: {\n    UploadImgs,\n  },\n  props: {\n    isCreate: {\n      type: Boolean,\n      default: false,\n    },\n    skuId: {\n      type: String,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      form: {\n        title: '',\n        online: 1,\n        price: 0,\n        rate_price: null,\n        currency: null,\n        code: null,\n        stock: null,\n        img: null,\n      },\n      rules: {\n        minWidth: 10,\n        minHeight: 10,\n        maxSize: 5,\n      },\n      radio: 1,\n      discount_price_kernel: null,\n      initData: [],\n      maxNum: 1,\n      saled: true,\n      spuState: '',\n      spuList: [],\n      specs: [],\n      specKeys: [],\n    }\n  },\n  watch: {\n    saled(val) {\n      this.form.online = val ? 1 : 0\n    },\n    discount_price_kernel(val) {\n      switch (this.radio) {\n        case 1:\n          this.form.rate_price = null\n          break\n        case 2:\n          this.form.rate_price = val\n          break\n        case 3:\n          // eslint-disable-next-line\n          const rate = parseFloat(val)\n          this.form.rate_price = this.form.price * rate\n          break\n        default:\n          this.form.rate_price = null\n      }\n    },\n  },\n  async created() {\n    this.$nextTick(async () => {\n      if (!this.isCreate) {\n        const res = await Sku.getSkuDetail(this.skuId)\n        this.form = res\n        const initData = [\n          {\n            id: res.id,\n            display: res.img,\n          },\n        ]\n        this.saled = res.online === 1\n        this.initData = initData\n        this.spuState = res.spu_name\n        await this.loadKeyAndValues(res.spu_id)\n      }\n    })\n  },\n  methods: {\n    async loadKeyAndValues(spuId) {\n      const specKeys = await SpecKey.getBySpuId(spuId)\n      this.specKeys = specKeys\n      // eslint-disable-next-line no-unused-vars\n      for (const specKeyy of specKeys) {\n        // eslint-disable-next-line\n        const ttmp = await Sku.getSpecValueId(this.skuId, specKeyy.id)\n        this.specs.push([ttmp.value_id])\n      }\n    },\n    // eslint-disable-next-line\n    async submitForm(formName) {\n      await this.getValue()\n      try {\n        const postData = { ...this.form }\n        const selectors = []\n        for (let i = 0; i < this.specs.length; i++) {\n          const spec = this.specs[i]\n          const specKeyTmp = this.specKeys[i]\n          const tmp = {\n            key_id: specKeyTmp.id,\n            value_id: spec[0],\n          }\n          selectors.push(tmp)\n        }\n        postData.selectors = selectors\n        let res\n        if (this.isCreate) {\n          res = await Sku.addSku(postData)\n        } else {\n          res = await Sku.editSku(this.skuId, postData)\n        }\n        if (res.code < window.MAX_SUCCESS_CODE) {\n          this.$message.success(`${res.message}`)\n          // this.resetForm(formName)\n          this.$confirm('是否返回上一页?', '提示', {\n            confirmButtonText: '是',\n            cancelButtonText: '否',\n            type: 'info',\n          }).then(async () => {\n            this.$emit('editClose')\n          })\n        }\n      } catch (error) {\n        console.error(error)\n      }\n    },\n    makeProps(key_id) {\n      return {\n        lazy: true,\n        async lazyLoad(node, resolve) {\n          const { level } = node\n          const suggestions = await SpecValue.getBySpecKeyId(key_id)\n          const nodes = suggestions.map(item => ({\n            value: item.id,\n            label: `${item.id} - ${item.value}`,\n            leaf: level >= 0,\n          }))\n          resolve(nodes)\n        },\n      }\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    },\n    querySpuSearch(queryString, cb) {\n      // eslint-disable-next-line\n      const suggestions = this.spuList\n      const results = queryString ? suggestions.filter(this.createSpuFilter(queryString)) : suggestions\n      cb(results)\n    },\n    createSpuFilter(queryString) {\n      // eslint-disable-next-line\n      return suggestion => {\n        return suggestion.title.toLowerCase().indexOf(queryString.toLowerCase()) === 0\n      }\n    },\n    handleSpuSelect(item) {\n      this.spuState = item.title\n      this.form.spu_id = item.id\n      this.loadKeyAndValues(item.id)\n    },\n    async getValue() {\n      const val = await this.$refs.uploadEle.getValue()\n      if (val && val.length > 0) {\n        this.form.img = val[0].display\n      }\n    },\n    back() {\n      this.$emit('editClose')\n    },\n    async loadSpuSuggestions() {\n      if (this.spuList.length > 0) {\n        return\n      }\n      try {\n        this.spuList = await Spu.getList()\n        if (this.spuList.length === 0) {\n          this.$message.error('未找到SPU建议，请先添加SPU')\n        }\n      } catch (error) {\n        this.$message.error('获取SPU建议信息失败')\n        console.error(error)\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.el-divider--horizontal {\n  margin: 0;\n}\n\n.container {\n  .title {\n    height: 59px;\n    line-height: 59px;\n    color: $parent-title-color;\n    font-size: 16px;\n    font-weight: 500;\n    text-indent: 40px;\n\n    .back {\n      float: right;\n      margin-right: 40px;\n      cursor: pointer;\n    }\n  }\n\n  .wrap {\n    padding: 20px;\n  }\n\n  .submit {\n    float: left;\n  }\n}\n\n.my-autocomplete {\n  li {\n    line-height: normal;\n    padding: 7px;\n    display: inline-flex;\n    align-content: space-around;\n    .name {\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n    .id {\n      margin-right: 15px;\n      font-size: 12px;\n      color: #b4b4b4;\n    }\n\n    .highlighted .addr {\n      color: #ddd;\n    }\n  }\n}\n.white-color {\n  background-color: #fff;\n}\n\n.input-with-select .el-input-group__prepend {\n  background-color: #fff;\n}\n</style>\n","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import { render } from \"./sku-edit.vue?vue&type=template&id=66fd235a&scoped=true\"\nimport script from \"./sku-edit.vue?vue&type=script&lang=js\"\nexport * from \"./sku-edit.vue?vue&type=script&lang=js\"\n\nimport \"./sku-edit.vue?vue&type=style&index=0&id=66fd235a&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhahn/Documents/Hahn/自考/mall/mall_cms/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-66fd235a\"]])\n\nexport default __exports__"],"names":["Sku","data","post","res","id","get","put","_delete","page","count","spuId","skuId","keyId","key_id","sku_id","SpecKey","SpecValue","Spu","class","isCreate","back","lg","md","sm","xs","model","form","ref","label","prop","size","title","placeholder","price","precision","step","radio","disabled","style","discount_price_kernel","rate_price","code","stock","loadSpuSuggestions","spuState","querySpuSearch","handleSpuSelect","default","item","saled","maxNum","value","initData","specKeys","specKey","index","key","name","specs","props","makeProps","type","submitForm","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","unsupportedIterableToArray","length","i","F","s","n","done","e","_e","f","TypeError","err","normalCompletion","didErr","call","next","_e2","components","UploadImgs","Boolean","String","online","currency","img","rules","minWidth","minHeight","maxSize","spuList","watch","val","this","rate","parseFloat","created","$nextTick","display","spu_name","loadKeyAndValues","spu_id","methods","specKeyy","ttmp","push","value_id","formName","getValue","postData","selectors","spec","specKeyTmp","tmp","window","MAX_SUCCESS_CODE","$message","success","message","$confirm","confirmButtonText","cancelButtonText","then","$emit","console","error","lazy","lazyLoad","node","resolve","level","suggestions","nodes","map","leaf","resetForm","$refs","resetFields","queryString","cb","results","filter","createSpuFilter","suggestion","toLowerCase","indexOf","uploadEle","__exports__","render"],"sourceRoot":""}