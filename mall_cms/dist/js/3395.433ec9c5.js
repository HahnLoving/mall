"use strict";(self["webpackChunklin_cms_vue"]=self["webpackChunklin_cms_vue"]||[]).push([[3395,646,8630,1901],{646:function(e,t,n){n.r(t);var r=n(48534),u=n(13087),a=n(62833),i=(n(35666),n(12109)),s=function(){function e(){(0,u.Z)(this,e)}return(0,a.Z)(e,null,[{key:"addBannerItem",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.post)("v1/banner-item",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getBannerItem",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/banner-item/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"editBannerItem",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.put)("v1/banner-item/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deleteBannerItem",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i._delete)("v1/banner-item/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getBannersItem",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){var t,n,r,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:0,n=u.length>1&&void 0!==u[1]?u[1]:10,e.next=4,(0,i.get)("v1/banner-item/page",{page:t,count:n});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();t["default"]=s},48630:function(e,t,n){n.r(t);var r=n(48534),u=n(13087),a=n(62833),i=(n(35666),n(12109)),s=function(){function e(){(0,u.Z)(this,e)}return(0,a.Z)(e,null,[{key:"addSpu",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.post)("v1/spu",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSpu",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/spu/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDetail",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/spu/".concat(t,"/detail"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"editSpu",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.put)("v1/spu/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deleteSpu",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i._delete)("v1/spu/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSpus",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){var t,n,r,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:0,n=u.length>1&&void 0!==u[1]?u[1]:10,e.next=4,(0,i.get)("v1/spu/page",{page:t,count:n});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/spu/list");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSpecKeys",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/spu/key",{id:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addSpecKey",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.post)("v1/spu/key",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t["default"]=s},81901:function(e,t,n){n.r(t);var r=n(48534),u=n(13087),a=n(62833),i=(n(35666),n(12109)),s=function(){function e(){(0,u.Z)(this,e)}return(0,a.Z)(e,null,[{key:"addTheme",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.post)("v1/theme",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addThemeSpu",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.post)("v1/theme/spu",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTheme",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/theme/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/theme/list");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"editTheme",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.put)("v1/theme/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deleteTheme",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i._delete)("v1/theme/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getThemes",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(){var t,n,r,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:0,n=u.length>1&&void 0!==u[1]?u[1]:10,e.next=4,(0,i.get)("v1/theme/page",{page:t,count:n});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSpus",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/theme/spus",{id:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSpuList",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/theme/spu/list",{id:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteSpu",value:function(){var e=(0,r.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i._delete)("v1/theme/spu/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t["default"]=s},93395:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});n(68309);var r=n(66252),u=n(56612),a=n(58061),i=function(e){return(0,r.dD)("data-v-215ec548"),e=e(),(0,r.Cn)(),e},s={class:"title"},o=i((function(){return(0,r._)("i",{class:"iconfont icon-fanhui"},null,-1)})),c=(0,r.Uk)(" 返回 "),p=[o,c],m={class:"container"},l={class:"wrap"},f={class:"id"},d={class:"name"},h={class:"id"},g={class:"name"},v={class:"id"},w={class:"name"},y=(0,r.Uk)("保 存");function k(e,t,n,i,o,c){var k=(0,r.up)("el-divider"),x=(0,r.up)("sticky-top"),S=(0,r.up)("el-input"),R=(0,r.up)("el-form-item"),_=(0,r.up)("el-autocomplete"),b=(0,r.up)("upload-imgs"),Z=(0,r.up)("el-button"),T=(0,r.up)("el-form"),W=(0,r.up)("el-col"),I=(0,r.up)("el-row"),V=(0,r.Q2)("permission");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(x,null,{default:(0,r.w5)((function(){return[(0,r._)("div",s,[(0,r._)("span",null,(0,u.zw)(n.isCreate?"添加BannerItem":"修改BannerItem"),1),(0,r._)("span",{class:"back",onClick:t[0]||(t[0]=function(){return c.back&&c.back.apply(c,arguments)})},p),(0,r.Wm)(k)])]})),_:1}),(0,r._)("div",m,[(0,r._)("div",l,[(0,r.Wm)(I,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(W,{lg:16,md:20,sm:24,xs:24},{default:(0,r.w5)((function(){return[(0,r.Wm)(T,{model:o.form,"status-icon":"",ref:"form","label-width":"100px",onSubmit:t[6]||(t[6]=(0,a.iM)((function(){}),["prevent"]))},{default:(0,r.w5)((function(){return[(0,r.Wm)(R,{label:"名称",prop:"name"},{default:(0,r.w5)((function(){return[(0,r.Wm)(S,{size:"medium",modelValue:o.form.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.form.name=e}),placeholder:"请填写名称"},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(R,{label:"类型",prop:"type"},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{onFocus:c.loadTypeSuggestions,"popper-class":"my-autocomplete",class:"inline-input",modelValue:o.form.type_name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.form.type_name=e}),"fetch-suggestions":c.queryTypeSearch,placeholder:"请填写所属分类",onSelect:c.handleTypeSelect},{default:(0,r.w5)((function(e){var t=e.item;return[(0,r._)("span",f,"id： "+(0,u.zw)(t.id),1),(0,r._)("span",d," 名称："+(0,u.zw)(t.name),1)]})),_:1},8,["onFocus","modelValue","fetch-suggestions","onSelect"])]})),_:1}),(0,r.Wm)(R,{label:"主题",prop:"theme_name"},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{onFocus:c.loadThemeSuggestions,"popper-class":"my-autocomplete",class:"inline-input",modelValue:o.form.theme_name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.form.theme_name=e}),"fetch-suggestions":c.queryThemeSearch,placeholder:"请填写主题",onSelect:c.handleThemeSelect},{default:(0,r.w5)((function(e){var t=e.item;return[(0,r._)("span",h,"id： "+(0,u.zw)(t.id),1),(0,r._)("span",g," 名称："+(0,u.zw)(t.name),1)]})),_:1},8,["onFocus","modelValue","fetch-suggestions","onSelect"])]})),_:1}),(0,r.Wm)(R,{label:"Spu",prop:"spu_name"},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{onFocus:c.loadSpuSuggestions,"popper-class":"my-autocomplete",class:"inline-input",modelValue:o.form.spu_name,"onUpdate:modelValue":t[4]||(t[4]=function(e){return o.form.spu_name=e}),"fetch-suggestions":c.querySpuSearch,placeholder:"请填写Spu",onSelect:c.handleSpuSelect},{default:(0,r.w5)((function(e){var t=e.item;return[(0,r._)("span",v,"id： "+(0,u.zw)(t.id),1),(0,r._)("span",w," 名称："+(0,u.zw)(t.title),1)]})),_:1},8,["onFocus","modelValue","fetch-suggestions","onSelect"])]})),_:1}),(0,r.Wm)(R,{label:"图片",prop:"img"},{default:(0,r.w5)((function(){return[(0,r.Wm)(b,{"max-num":o.maxNum,ref:"uploadEle",value:o.initData},null,8,["max-num","value"])]})),_:1}),(0,r.Wm)(R,{class:"submit"},{default:(0,r.w5)((function(){return[(0,r.wy)((0,r.Wm)(Z,{type:"primary",onClick:t[5]||(t[5]=function(e){return c.submitForm("form")})},{default:(0,r.w5)((function(){return[y]})),_:1},512),[[V,{permission:["创建Banner item","更新Banner item"],type:"disabled"}]])]})),_:1})]})),_:1},8,["model"])]})),_:1})]})),_:1})])])])}var x=n(95082),S=n(48534),R=(n(35666),n(9653),n(646)),_=n(5892),b=n(96664),Z=n(48630),T=n(81901),W={components:{UploadImgs:_["default"],StickyTop:b["default"]},props:{editID:{type:Number},isCreate:{type:Boolean,default:!1},bannerId:{type:Number,default:null}},data:function(){return{spuSuggestions:[],themeSuggestions:[],maxNum:1,form:{img:"",keyword:"",type:null,spu_id:null,spu_name:"",theme_id:null,theme_name:""},rules:{minWidth:10,minHeight:10,maxSize:5},initData:[]}},mounted:function(){var e=this;return(0,S.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isCreate){t.next=7;break}return t.next=3,R["default"].getBannerItem(e.editID);case 3:n=t.sent,e.initData=[{id:n.id,display:n.img}],e.form=n,1==e.form.type?e.form.type_name="无类型":2==e.form.type?e.form.type_name="Spu":3==e.form.type&&(e.form.type_name="主题");case 7:e.loadSpuSuggestions(),e.loadThemeSuggestions(),e.loadTypeSuggestions();case 10:case"end":return t.stop()}}),t)})))()},methods:{getValue:function(){var e=this;return(0,S.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.uploadEle.getValue();case 2:n=t.sent,n&&n.length>0&&(e.form.img=n[0].display);case 4:case"end":return t.stop()}}),t)})))()},submitForm:function(){var e=this;return(0,S.Z)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getValue();case 2:if(n=(0,x.Z)({},e.form),!e.isCreate){t.next=10;break}return n.banner_id=e.bannerId,t.next=7,R["default"].addBannerItem(n);case 7:r=t.sent,t.next=13;break;case 10:return t.next=12,R["default"].editBannerItem(e.editID,n);case 12:r=t.sent;case 13:r.code<window.MAX_SUCCESS_CODE&&(e.$message.success("".concat(r.message)),e.resetForm("form"),e.$emit("editClose"));case 14:case"end":return t.stop()}}),t)})))()},resetForm:function(e){this.$refs[e].resetFields()},back:function(){this.$emit("editClose")},querySpuSearch:function(e,t){var n=this;return(0,S.Z)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.spuSuggestions,t(r);case 2:case"end":return e.stop()}}),e)})))()},handleSpuSelect:function(e){this.form.spu_name=e.title,this.form.spu_id=e.id},loadSpuSuggestions:function(){var e=this;return(0,S.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Z["default"].getList();case 3:e.spuSuggestions=t.sent,0===e.spuSuggestions.length&&e.$message.error("未找到Spu，请先添加Spu"),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$message.error("获取Spu信息失败"),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},queryThemeSearch:function(e,t){var n=this;return(0,S.Z)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.themeSuggestions,t(r);case 2:case"end":return e.stop()}}),e)})))()},handleThemeSelect:function(e){this.form.theme_name=e.name,this.form.theme_id=e.id},loadThemeSuggestions:function(){var e=this;return(0,S.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T["default"].getList();case 3:e.themeSuggestions=t.sent,0===e.themeSuggestions.length&&e.$message.error("未找到主题，请先添加主题"),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$message.error("获取主题信息失败"),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},queryTypeSearch:function(e,t){var n=this.typeSuggestions;t(n)},handleTypeSelect:function(e){this.form.id=e.id,this.form.type=e.id,1==this.form.type?this.form.type_name="无类型":2==this.form.type?this.form.type_name="Spu":3==this.form.type&&(this.form.type_name="主题")},loadTypeSuggestions:function(){var e=this;return(0,S.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.typeSuggestions=[{name:"无类型",id:1},{name:"Spu",id:2},{name:"主题",id:3}];case 1:case"end":return t.stop()}}),t)})))()}}},I=n(83744);const V=(0,I.Z)(W,[["render",k],["__scopeId","data-v-215ec548"]]);var C=V}}]);
//# sourceMappingURL=3395.433ec9c5.js.map