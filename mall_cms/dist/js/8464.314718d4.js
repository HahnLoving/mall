"use strict";(self["webpackChunklin_cms_vue"]=self["webpackChunklin_cms_vue"]||[]).push([[8464,370,1967],{34985:function(e,i,t){t.r(i),t.d(i,{default:function(){return v}});var r=t(66252),n=t(58061),a=function(e){return(0,r.dD)("data-v-4769795e"),e=e(),(0,r.Cn)(),e},o={class:"container"},l={class:"header"},s=a((function(){return(0,r._)("div",{class:"title"},"六宫格列表",-1)})),d=(0,r.Uk)("创建六宫格"),u=(0,r.Uk)("编辑"),c=(0,r.Uk)("删除"),g={key:0};function m(e,i,t,a,m,p){var f=(0,r.up)("el-button"),h=(0,r.up)("el-table-column"),w=(0,r.up)("el-image"),C=(0,r.up)("el-table"),b=(0,r.up)("grid-category-edit"),v=(0,r.up)("el-dialog"),y=(0,r.Q2)("permission"),k=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("div",l,[s,(0,r.wy)((0,r.Wm)(f,{style:{"margin-left":"30px"},onClick:(0,n.iM)(p.handleAdd,["prevent"]),type:"primary",plain:"",size:"medium"},{default:(0,r.w5)((function(){return[d]})),_:1},8,["onClick"]),[[y,{permission:"创建六宫格",type:"disabled"}]])]),(0,r.wy)((0,r.Wm)(C,{stripe:"",data:m.tableData},{default:(0,r.w5)((function(){return[(0,r.Wm)(h,{prop:"id",label:"id",width:"100"}),(0,r.Wm)(h,{prop:"img",label:"图片",width:"200"},{default:(0,r.w5)((function(e){return[(0,r.Wm)(w,{src:e.row.img,"preview-src-list":m.imgSrcList,style:{"max-height":"50px","max-width":"100px"}},null,8,["src","preview-src-list"])]})),_:1}),(0,r.Wm)(h,{prop:"title",label:"标题",width:"200"}),(0,r.Wm)(h,{prop:"category_id",label:"分类id",width:"150"}),(0,r.Wm)(h,{prop:"root_category_id",label:"父分类id",width:"150"}),(0,r.Wm)(h,{prop:"index",label:"排序",width:"150"}),(0,r.Wm)(h,{fixed:"right",width:"150",label:"操作"},{default:(0,r.w5)((function(e){return[(0,r.Wm)(f,{onClick:(0,n.iM)((function(i){return p.handleEdit(e.row)}),["prevent"]),type:"primary",plain:"",size:"mini"},{default:(0,r.w5)((function(){return[u]})),_:2},1032,["onClick"]),(0,r.wy)((0,r.Wm)(f,{onClick:(0,n.iM)((function(i){return p.handleDelete(e.row)}),["prevent"]),type:"danger",plain:"",size:"mini"},{default:(0,r.w5)((function(){return[c]})),_:2},1032,["onClick"]),[[y,{permission:"删除六宫格",type:"disabled"}]])]})),_:1})]})),_:1},8,["data"]),[[k,e.loading]]),m.dialogFormVisible?((0,r.wg)(),(0,r.iD)("div",g,[(0,r.Wm)(v,{"append-to-body":!0,"before-close":e.handleClose,visible:e.visible,modelValue:m.dialogFormVisible,"onUpdate:modelValue":i[0]||(i[0]=function(e){return m.dialogFormVisible=e})},{default:(0,r.w5)((function(){return[(0,r.Wm)(b,{isCreate:m.isCreate,dialogFormVisible:m.dialogFormVisible,"grid-category-id":m.gridCategoryId,onDialogClose:p.dialogClose},null,8,["isCreate","dialogFormVisible","grid-category-id","onDialogClose"])]})),_:1},8,["before-close","visible","modelValue"])])):(0,r.kq)("",!0)])}var p=t(48534),f=(t(41539),t(54747),t(35666),t(97540)),h=t(47638),w={components:{GridCategoryEdit:h["default"]},data:function(){return{display:!0,tableData:[],imgSrcList:[],dialogFormVisible:!1,isCreate:!1,gridCategoryId:0,form:{name:"",title:0,parent_id:null,description:"",online:1,index:null}}},created:function(){var e=this;return(0,p.Z)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:e.loading=!0,e.getGridCategories(),e.loading=!1;case 3:case"end":return i.stop()}}),i)})))()},methods:{getGridCategories:function(){var e=this;return(0,p.Z)(regeneratorRuntime.mark((function i(){var t;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,f["default"].getGridCategories();case 2:t=i.sent,e.tableData=t,e.initImgSrcList();case 5:case"end":return i.stop()}}),i)})))()},initImgSrcList:function(){var e=this;this.tableData.forEach((function(i){i.img&&e.imgSrcList.push(i.img)}))},handleAdd:function(){var e=this;return(0,p.Z)(regeneratorRuntime.mark((function i(){var t;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.dialogFormVisible=!0,e.isCreate=!0,e.isCreate){i.next=8;break}return i.next=5,f["default"].getGridCategory(e.gridCategoryId);case 5:t=i.sent,e.form1=t,e.initData=[{display:t.img}];case 8:e.loadSuggestions();case 9:case"end":return i.stop()}}),i)})))()},handleEdit:function(e){this.gridCategoryId=e.id,this.isCreate=!1,this.dialogFormVisible=!0,this.isCreate||(this.form1=[],this.initData=[]),this.loadSuggestions()},handleDelete:function(e){var i,t=this;this.$confirm("此操作将永久删除该六宫格，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((0,p.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.loading=!0,r.next=4,f["default"].deleteGridCategory(e.id);case 4:i=r.sent,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),t.loading=!1;case 10:i.code<window.MAX_SUCCESS_CODE?(t.loading=!1,t.totalNums%t.pageCount===1&&1!==t.currentPage&&t.currentPage--,t.getGridCategories(),t.$message({type:"success",message:"".concat(i.message)})):(t.loading=!1,t.$message.error("".concat(i.message)));case 11:case"end":return r.stop()}}),r,null,[[0,7]])}))))},dialogClose:function(){this.dialogFormVisible=!1,this.loading=!0,this.getGridCategories(),this.loading=!1}}},C=t(83744);const b=(0,C.Z)(w,[["render",m],["__scopeId","data-v-4769795e"]]);var v=b}}]);
//# sourceMappingURL=8464.314718d4.js.map