"use strict";(self["webpackChunklin_cms_vue"]=self["webpackChunklin_cms_vue"]||[]).push([[9903,7891],{57891:function(e,t,r){r.r(t);var n=r(48534),a=r(13087),u=r(62833),i=(r(92222),r(35666),r(12109)),s=function(){function e(){(0,a.Z)(this,e)}return(0,u.Z)(e,null,[{key:"addOrder",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.post)("v1/order",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getOrder",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.get)("v1/order/".concat(t,"/detail"));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"editOrder",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.put)("v1/order/".concat(t),r);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"changeOrderStatus",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.put)("v1/order/status?id=".concat(t,"&status=").concat(r));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getOrders",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(){var t,r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:0,r=a.length>1&&void 0!==a[1]?a[1]:10,e.next=4,(0,i.get)("v1/order/page",{page:t,count:r});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"search",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t){var r,n,a,u,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.keyword,n=t.page,a=t.count,u=t.start,s=t.end,e.next=3,(0,i.get)("v1/order/search",{keyword:r,page:n,count:a,start:u,end:s});case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t["default"]=s},89903:function(e,t,r){r.r(t),r.d(t,{default:function(){return S}});var n=r(66252),a=r(58061),u=r(56612),i=function(e){return(0,n.dD)("data-v-3b27454e"),e=e(),(0,n.Cn)(),e},s={class:"title"},o=i((function(){return(0,n._)("span",null,"订单详情",-1)})),c=i((function(){return(0,n._)("i",{class:"iconfont icon-fanhui"},null,-1)})),l=(0,n.Uk)(" 返回 "),d=[c,l],p={class:"container"},m={class:"wrap"},f={class:"tags"},w=(0,n.Uk)("过期"),_={key:0,class:"address"},g={class:"header"},h={class:"name"},v={class:"mobile"},b={class:"detail"},k=["src","alt"];function y(e,t,r,i,c,l){var y=(0,n.up)("el-divider"),W=(0,n.up)("sticky-top"),x=(0,n.up)("el-input"),R=(0,n.up)("el-form-item"),V=(0,n.up)("el-image"),Z=(0,n.up)("el-input-number"),O=(0,n.up)("el-tag"),S=(0,n.up)("el-table-column"),z=(0,n.up)("el-table"),C=(0,n.up)("el-button"),U=(0,n.up)("el-form"),D=(0,n.up)("el-col"),T=(0,n.up)("el-row"),I=(0,n.Q2)("permission");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(W,null,{default:(0,n.w5)((function(){return[(0,n._)("div",s,[o,(0,n._)("span",{class:"back",onClick:t[0]||(t[0]=function(){return l.back&&l.back.apply(l,arguments)})},d),(0,n.Wm)(y)])]})),_:1}),(0,n._)("div",p,[(0,n._)("div",m,[(0,n.Wm)(T,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(D,{lg:16,md:20,sm:24,xs:24},{default:(0,n.w5)((function(){return[(0,n.Wm)(U,{model:c.form,"status-icon":"",ref:"form","label-width":"100px",onSubmit:t[7]||(t[7]=(0,a.iM)((function(){}),["prevent"]))},{default:(0,n.w5)((function(){return[(0,n.Wm)(R,{label:"订单号",prop:"order_no"},{default:(0,n.w5)((function(){return[(0,n.Wm)(x,{disabled:"",size:"medium",modelValue:c.form.order_no,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.form.order_no=e})},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(R,{label:"图片",prop:"snap_img"},{default:(0,n.w5)((function(){return[(0,n.Wm)(V,{style:{height:"100px",width:"100px"},src:c.form.snap_img},null,8,["src"])]})),_:1}),(0,n.Wm)(R,{label:"标题",prop:"snap_title"},{default:(0,n.w5)((function(){return[(0,n.Wm)(x,{disabled:"",size:"medium",modelValue:c.form.snap_title,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.form.snap_title=e})},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(R,{label:"预付编号",prop:"prepay_id"},{default:(0,n.w5)((function(){return[(0,n.Wm)(x,{disabled:"",size:"medium",modelValue:c.form.prepay_id,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.form.prepay_id=e})},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(R,{label:"总价格",prop:"total_price"},{default:(0,n.w5)((function(){return[(0,n.Wm)(Z,{disabled:"",modelValue:c.form.total_price,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.form.total_price=e}),precision:2,step:.1},null,8,["modelValue","step"])]})),_:1}),(0,n.Wm)(R,{label:"交易价格",prop:"final_total_price"},{default:(0,n.w5)((function(){return[(0,n.Wm)(Z,{disabled:"",modelValue:c.form.final_total_price,"onUpdate:modelValue":t[5]||(t[5]=function(e){return c.form.final_total_price=e}),precision:2,step:.1},null,8,["modelValue","step"])]})),_:1}),(0,n.Wm)(R,{label:"总数量",prop:"total_count"},{default:(0,n.w5)((function(){return[(0,n.Wm)(Z,{disabled:"",modelValue:c.form.total_count,"onUpdate:modelValue":t[6]||(t[6]=function(e){return c.form.total_count=e}),step:1,"step-strictly":""},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(R,{label:"状态",prop:"status"},{default:(0,n.w5)((function(){return[(0,n._)("div",f,[(0,n.Wm)(O,{type:l.computeTagType(c.form.status)},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,u.zw)(c.form.status|e.orderStatus),1)]})),_:1},8,["type"]),c.form.expired&&1===c.form.status?((0,n.wg)(),(0,n.j4)(O,{key:0,style:{"margin-left":"5px"},type:"danger",size:"mini"},{default:(0,n.w5)((function(){return[w]})),_:1})):(0,n.kq)("",!0)])]})),_:1}),(0,n.Wm)(R,{label:"地址",prop:"snap_address"},{default:(0,n.w5)((function(){return[c.form.snap_address?((0,n.wg)(),(0,n.iD)("div",_,[(0,n._)("div",g,[(0,n._)("span",h,(0,u.zw)(c.form.snap_address.user_name),1),(0,n._)("span",v,(0,u.zw)(c.form.snap_address.mobile),1)]),(0,n._)("div",b,(0,u.zw)(c.form.snap_address.province)+" "+(0,u.zw)(c.form.snap_address.city)+(0,u.zw)(c.form.snap_address.county)+" ************** ",1)])):(0,n.kq)("",!0)]})),_:1}),(0,n.Wm)(R,{label:"详情",prop:"snap_items"},{default:(0,n.w5)((function(){return[c.form.snap_items?((0,n.wg)(),(0,n.j4)(z,{key:0,stripe:"",data:c.form.snap_items},{default:(0,n.w5)((function(){return[(0,n.Wm)(S,{fixed:"left",prop:"id",label:"id",width:"100"}),(0,n.Wm)(S,{prop:"img",label:"图片",width:"100"},{default:(0,n.w5)((function(e){return[(0,n._)("img",{class:"display_img",src:e.row.img,alt:e.row.img},null,8,k)]})),_:1}),(0,n.Wm)(S,{prop:"title",label:"标题",width:"100"}),(0,n.Wm)(S,{prop:"single_price",label:"单价",width:"100"}),(0,n.Wm)(S,{prop:"final_price",label:"交易价","min-width":"100"}),(0,n.Wm)(S,{fixed:"right",prop:"count",label:"数量",width:"100"})]})),_:1},8,["data"])):(0,n.kq)("",!0)]})),_:1}),(0,n.Wm)(R,{class:"submit"},{default:(0,n.w5)((function(){return[(0,n.wy)((0,n.Wm)(C,{disabled:l.actionDisabled,type:"primary",onClick:l.changeOrderStatus},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,u.zw)(l.actionName),1)]})),_:1},8,["disabled","onClick"]),[[I,{permission:["更新订单状态"],type:"disabled"}]])]})),_:1})]})),_:1},8,["model"])]})),_:1})]})),_:1})])])])}var W=r(48534),x=(r(35666),r(57891)),R=r(96664),V={components:{StickyTop:R["default"]},props:{orderId:{type:String,default:null}},data:function(){return{form:{}}},computed:{actionName:function(){if(!this.form.status)return"不可操作";switch(this.form.status){case 2:return"发货";case 3:return"完成";default:return"不可操作"}},actionDisabled:function(){return!this.form.status||2!==this.form.status&&3!==this.form.status}},created:function(){var e=this;return(0,W.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$nextTick((0,W.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isCreate||e.getOrder();case 1:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})))()},methods:{changeOrderStatus:function(){var e=this;return(0,W.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,x["default"].changeOrderStatus(e.orderId,e.form.status+1);case 2:r=t.sent,r.code<window.MAX_SUCCESS_CODE&&e.$message.success("".concat(r.message)),e.getOrder();case 5:case"end":return t.stop()}}),t)})))()},getOrder:function(){var e=this;return(0,W.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,x["default"].getOrder(e.orderId);case 2:r=t.sent,e.form=r;case 4:case"end":return t.stop()}}),t)})))()},submitForm:function(e){return(0,W.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},resetForm:function(e){this.$refs[e].resetFields()},back:function(){this.$emit("editClose")},computeTagType:function(e){switch(e){case 0:return"";case 1:return"info";case 2:return"success";case 3:return"success";case 4:return"success";case 5:return"warning";default:return""}}},filters:{orderStatus:function(e){switch(e){case 0:return"全部";case 1:return"待支付";case 2:return"已支付";case 3:return"已发货";case 4:return"已完成";case 5:return"已取消";default:return"全部"}}}},Z=r(83744);const O=(0,Z.Z)(V,[["render",y],["__scopeId","data-v-3b27454e"]]);var S=O}}]);
//# sourceMappingURL=9903.2175e2d0.js.map