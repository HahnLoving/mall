{"version":3,"file":"js/612.26e0ff04.js","mappings":"4MAEMA,EAAAA,WASJ,cASG,QARDC,MAAAA,OAQC,MARO,EAQP,MAPDC,OAAAA,OAOC,MAPQ,EAOR,MALDC,MAAAA,OAKC,MALO,EAKP,MAJDC,OAAAA,OAIC,MAJQ,GAIR,MAFDC,MAAAA,OAEC,MAFO,EAEP,MADDC,OAAAA,OACC,MADQ,GACR,sCAjBI,OAiBJ,oBAfK,OAeL,kBAbG,OAaH,sBAXO,MAYM,IAAVL,IACFM,KAAKN,MAAQA,GAEXC,IACFK,KAAKL,OAASA,GAEF,IAAVC,IACFI,KAAKJ,MAAQA,GAEXC,IACFG,KAAKH,OAASA,GAEF,IAAVC,IACFE,KAAKF,MAAQA,GAEXC,IACFC,KAAKD,OAASA,G,8FAIlB,8FACEC,KAAKN,OAAS,EADhB,gD,sIAIA,8FACEM,KAAKJ,OAAS,EADhB,gD,oFAIA,WACEI,KAAKF,OAAS,I,kBAGhB,WACEE,KAAKJ,MAAQ,EACbI,KAAKN,MAAQ,EACbM,KAAKF,MAAQ,I,yBAGf,SAAYG,EAAMC,EAAOC,GACvBH,KAAKC,KAAOA,EACZD,KAAKE,MAAQA,EACbF,KAAKG,IAAMA,I,wBAGb,SAAWC,GACTJ,KAAKI,QAAUA,I,0EAGjB,qHACoBC,EAAAA,EAAAA,KAAI,iBADxB,cACQC,EADR,yBAESA,GAFT,2C,uIAUA,gHAAuBC,EAAvB,EAAuBA,MAAOC,EAA9B,EAA8BA,KAA9B,UACsBH,EAAAA,EAAAA,KAAI,gBAAiB,CACvCE,MAAOA,GAASP,KAAKL,OACrBa,KAAMA,GAAQR,KAAKN,QAHvB,cACQe,EADR,yBAKSA,GALT,gD,iIAgBA,0HAAgBF,EAAhB,EAAgBA,MAAOC,EAAvB,EAAuBA,KAAMP,EAA7B,EAA6BA,KAAMC,EAAnC,EAAmCA,MAAOC,EAA1C,EAA0CA,IAA1C,IAA+CO,KAAAA,OAA/C,SACOA,GACHV,KAAKW,YAAYV,EAAMC,EAAOC,GAEnB,IAATK,IACFR,KAAKJ,MAAQ,GALjB,UAOoBgB,EAAAA,EAAAA,YAAO,CACvBC,IAAK,UACLC,OAAQ,CACNP,MAAOA,GAASP,KAAKH,OACrBW,KAAMA,GAAQR,KAAKJ,MACnBK,KAAMA,GAAQD,KAAKC,KACnBC,MAAOA,GAASF,KAAKE,MACrBC,IAAKA,GAAOH,KAAKG,KAEnBY,aAAa,IAhBjB,cAOQC,EAPR,yBAkBSA,GAlBT,gD,oIA8BA,4HAAmBT,EAAnB,EAAmBA,MAAOC,EAA1B,EAA0BA,KAAMJ,EAAhC,EAAgCA,QAASH,EAAzC,EAAyCA,KAAMC,EAA/C,EAA+CA,MAAOC,EAAtD,EAAsDA,IAAtD,IAA2DO,KAAAA,OAA3D,SACOA,IACHV,KAAKW,YAAYV,EAAMC,EAAOC,GAC9BH,KAAKiB,WAAWb,IAEL,IAATI,IACFR,KAAKF,MAAQ,GANjB,mBASsBO,EAAAA,EAAAA,KAAI,iBAAkB,CACtCE,MAAOA,GAASP,KAAKD,OACrBS,KAAMA,GAAQR,KAAKF,MACnBM,QAASA,GAAWJ,KAAKI,QACzBH,KAAMA,GAAQD,KAAKC,KACnBC,MAAOA,GAASF,KAAKE,MACrBC,IAAKA,GAAOH,KAAKG,MAfvB,cASUa,EATV,yBAiBWA,GAjBX,qCAmBIE,QAAQZ,IAAR,MAnBJ,0D,sIAuBA,8GACQN,KAAKmB,gBADb,gCAESnB,KAAKoB,eAAe,KAF7B,gD,oIAKA,8GACQpB,KAAKqB,gBADb,gCAESrB,KAAKsB,QAAQ,CAAEZ,MAAM,KAF9B,gD,uIAKA,qGACEV,KAAKuB,gBADP,kBAESvB,KAAKwB,WAAW,CAAEd,MAAM,KAFjC,gD,6DA5JIjB,GAkKN,iBAAmBA,EAAI","sources":["webpack://lin-cms-vue/./src/lin/model/log.js"],"sourcesContent":["import _axios, { get } from '@/lin/plugin/axios'\n\nclass Log {\n  name = null\n\n  start = null\n\n  end = null\n\n  keyword = null\n\n  constructor({\n    uPage = 0,\n    uCount = 5,\n\n    lPage = 0,\n    lCount = 10,\n\n    sPage = 0,\n    sCount = 10,\n  }) {\n    if (uPage === 0) {\n      this.uPage = uPage\n    }\n    if (uCount) {\n      this.uCount = uCount\n    }\n    if (lPage === 0) {\n      this.lPage = lPage\n    }\n    if (lCount) {\n      this.lCount = lCount\n    }\n    if (sPage === 0) {\n      this.sPage = sPage\n    }\n    if (sCount) {\n      this.sCount = sCount\n    }\n  }\n\n  async increaseUpage() {\n    this.uPage += 1\n  }\n\n  async increaseLpage() {\n    this.lPage += 1\n  }\n\n  increaseSpage() {\n    this.sPage += 1\n  }\n\n  init() {\n    this.lPage = 0\n    this.uPage = 0\n    this.sPage = 0\n  }\n\n  setBaseInfo(name, start, end) {\n    this.name = name\n    this.start = start\n    this.end = end\n  }\n\n  setKeyword(keyword) {\n    this.keyword = keyword\n  }\n\n  async addTestLog() {\n    const log = await get('cms/test/info')\n    return log\n  }\n\n  /**\n   * 查询已经被记录过日志的用户（分页）\n   * @param {number} count 每页个数\n   * @param {number} page 第几页\n   */\n  async getLoggedUsers({ count, page }) {\n    const users = await get('cms/log/users', {\n      count: count || this.uCount,\n      page: page || this.uPage,\n    })\n    return users\n  }\n\n  /**\n   * 查询日志信息（分页）\n   * @param {number} count 每页个数\n   * @param {number} page 第几页\n   * @param {number} name 用户昵称\n   * @param {number} start 起始时间 # 2018-11-01 09:39:35\n   * @param {number} end 结束时间\n   */\n  async getLogs({ count, page, name, start, end, next = false }) {\n    if (!next) {\n      this.setBaseInfo(name, start, end)\n    }\n    if (page === 0) {\n      this.lPage = 0\n    }\n    const res = await _axios({\n      url: 'cms/log',\n      params: {\n        count: count || this.lCount,\n        page: page || this.lPage,\n        name: name || this.name,\n        start: start || this.start,\n        end: end || this.end,\n      },\n      handleError: true,\n    })\n    return res\n  }\n\n  /**\n   * 所搜日志信息（分页）\n   * @param {number} count 每页个数\n   * @param {number} page 第几页\n   * @param {number} keyword 搜索关键词\n   * @param {number} name 用户昵称\n   * @param {number} start 起始时间 # 2018-11-01 09:39:35\n   * @param {number} end 结束时间\n   */\n  async searchLogs({ count, page, keyword, name, start, end, next = false }) {\n    if (!next) {\n      this.setBaseInfo(name, start, end)\n      this.setKeyword(keyword)\n    }\n    if (page === 0) {\n      this.sPage = 0\n    }\n    try {\n      const res = await get('cms/log/search', {\n        count: count || this.sCount,\n        page: page || this.sPage,\n        keyword: keyword || this.keyword,\n        name: name || this.name,\n        start: start || this.start,\n        end: end || this.end,\n      })\n      return res\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  async moreUserPage() {\n    await this.increaseUpage()\n    return this.getLoggedUsers({})\n  }\n\n  async moreLogPage() {\n    await this.increaseLpage()\n    return this.getLogs({ next: true })\n  }\n\n  async moreSearchPage() {\n    this.increaseSpage()\n    return this.searchLogs({ next: true })\n  }\n}\n\nexport default new Log({})\n"],"names":["Log","uPage","uCount","lPage","lCount","sPage","sCount","this","name","start","end","keyword","get","log","count","page","users","next","setBaseInfo","_axios","url","params","handleError","res","setKeyword","console","increaseUpage","getLoggedUsers","increaseLpage","getLogs","increaseSpage","searchLogs"],"sourceRoot":""}