"use strict";(self["webpackChunklin_cms_vue"]=self["webpackChunklin_cms_vue"]||[]).push([[7386,370,3602],{63602:function(e,t,r){r.r(t);var n=r(48534),a=r(13087),u=r(62833),o=(r(35666),r(12109)),i=function(){function e(){(0,a.Z)(this,e)}return(0,u.Z)(e,null,[{key:"addCategory",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,o.post)("v1/category",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCategory",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,o.get)("v1/category/".concat(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"editCategory",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,o.put)("v1/category/".concat(t),r);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"deleteCategory",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,o._delete)("v1/category/".concat(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCategories",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(){var t,r,n,a,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:0,r=u.length>1&&void 0!==u[1]?u[1]:10,n=u.length>2&&void 0!==u[2]?u[2]:1,e.next=5,(0,o.get)("v1/category/page",{page:t,count:r,root:n});case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSubCategories",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(){var t,r,n,a,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:0,r=u.length>1&&void 0!==u[1]?u[1]:10,n=u.length>2&&void 0!==u[2]?u[2]:1,e.next=5,(0,o.get)("v1/category/sub-page",{page:t,count:r,id:n});case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,o.get)("v1/category/list");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();t["default"]=i},42042:function(e,t,r){r.r(t),r.d(t,{default:function(){return y}});r(68309),r(82526),r(41817);var n=r(66252),a=r(56612),u=r(58061),o={style:{"margin-top":"-25px"}},i={class:"dialog-title"},l={slot:"footer",class:"dialog-footer",style:{"padding-left":"5px"}},s=(0,n.Uk)("确 定");function c(e,t,r,c,p,m){var d=(0,n.up)("el-input"),f=(0,n.up)("el-form-item"),g=(0,n.up)("el-switch"),v=(0,n.up)("upload-imgs"),h=(0,n.up)("el-form"),y=(0,n.up)("el-button"),w=(0,n.Q2)("permission");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",o,[(0,n._)("div",i,[(0,n._)("span",null,(0,a.zw)(r.isCreate?"创建分类":"更新分类"),1)]),(0,n.Wm)(h,{model:p.form,"status-icon":"",ref:"form","label-width":"100px",onSubmit:t[4]||(t[4]=(0,u.iM)((function(){}),["prevent"]))},{default:(0,n.w5)((function(){return[(0,n.Wm)(f,{label:"名称",prop:"name"},{default:(0,n.w5)((function(){return[(0,n.Wm)(d,{size:"medium",modelValue:p.form.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return p.form.name=e}),placeholder:"请填写分类名"},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(f,{label:"排序",prop:"index"},{default:(0,n.w5)((function(){return[(0,n.Wm)(d,{size:"medium",modelValue:p.form.index,"onUpdate:modelValue":t[1]||(t[1]=function(e){return p.form.index=e}),placeholder:"请填写分类排序"},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(f,{label:"显示上线",prop:"online"},{default:(0,n.w5)((function(){return[(0,n.Wm)(g,{modelValue:p.display,"onUpdate:modelValue":t[2]||(t[2]=function(e){return p.display=e}),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"上线","inactive-text":"下线"},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(f,{label:"图片",prop:"img"},{default:(0,n.w5)((function(){return[(0,n.Wm)(v,{ref:"uploadEle","max-num":p.maxNum,value:p.initData},null,8,["max-num","value"])]})),_:1}),(0,n.Wm)(f,{label:"描述",prop:"description"},{default:(0,n.w5)((function(){return[(0,n.Wm)(d,{size:"medium",modelValue:p.form.description,"onUpdate:modelValue":t[3]||(t[3]=function(e){return p.form.description=e}),type:"textarea",rows:1,placeholder:"请填写描述"},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model"])]),(0,n._)("div",l,[(0,n.wy)((0,n.Wm)(y,{type:"primary",onClick:m.submitForm},{default:(0,n.w5)((function(){return[s]})),_:1},8,["onClick"]),[[w,{permission:"更新分类",type:"disabled"}]])])],64)}var p=r(95082),m=r(48534),d=(r(35666),r(9653),r(63602)),f=r(5892),g={components:{UploadImgs:f["default"]},props:{dialogFormVisible:{type:Boolean,default:!1},isCreate:{type:Boolean,default:!1},categoryId:{type:Number,default:0},isSub:{type:Boolean,default:!1}},computed:{visible:{get:function(){return this.dialogFormVisible},set:function(){}}},data:function(){return{display:!0,initData:[],maxNum:1,form:{name:"",is_root:0,parent_id:null,description:"",online:1,index:null}}},watch:{display:function(e){this.form.online=e?1:0}},mounted:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isCreate){t.next=7;break}return t.next=3,d["default"].getCategory(e.categoryId);case 3:r=t.sent,e.form=r,e.display=1===r.online,e.initData=[{display:r.img}];case 7:e.isSub?(e.form.parent_id=e.$route.params.id,e.form.is_root=0):(e.form.parent_id=null,e.form.is_root=1);case 8:case"end":return t.stop()}}),t)})))()},methods:{submitForm:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getValue();case 2:if(r=(0,p.Z)({},e.form),!e.isCreate){t.next=9;break}return t.next=6,d["default"].addCategory(r);case 6:n=t.sent,t.next=12;break;case 9:return t.next=11,d["default"].editCategory(e.categoryId,r);case 11:n=t.sent;case 12:n.code<window.MAX_SUCCESS_CODE&&(e.$message.success("".concat(n.message)),e.$emit("dialogClose"));case 13:case"end":return t.stop()}}),t)})))()},getValue:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.uploadEle.getValue();case 2:r=t.sent,r&&r.length>0&&(e.form.img=r[0].display);case 4:case"end":return t.stop()}}),t)})))()},resetForm:function(e){this.$refs[e].resetFields()},handleClose:function(e){e(),this.$emit("dialogClose")}}},v=r(83744);const h=(0,v.Z)(g,[["render",c],["__scopeId","data-v-eada8af0"]]);var y=h}}]);
//# sourceMappingURL=7386.c3594baa.js.map