"use strict";(self["webpackChunklin_cms_vue"]=self["webpackChunklin_cms_vue"]||[]).push([[6078,370,3335],{96438:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var i=n(66252),r=n(58061),a=function(e){return(0,i.dD)("data-v-1ecd13fc"),e=e(),(0,i.Cn)(),e},s={key:0,class:"container"},l={class:"header"},c=a((function(){return(0,i._)("div",{class:"title"},"主题列表",-1)})),u=(0,i.Uk)("添加主题"),o=(0,i.Uk)("查看"),m=(0,i.Uk)("删除"),d={class:"pagination"};function p(e,t,n,a,p,h){var g=(0,i.up)("el-button"),f=(0,i.up)("el-table-column"),w=(0,i.up)("el-image"),_=(0,i.up)("el-table"),v=(0,i.up)("el-pagination"),C=(0,i.up)("theme-edit"),x=(0,i.Q2)("permission"),b=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("div",null,[p.showEdit?((0,i.wg)(),(0,i.j4)(C,{key:1,onEditClose:h.editClose,themeId:p.themeId,isCreate:p.isCreate},null,8,["onEditClose","themeId","isCreate"])):((0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",l,[c,(0,i.Wm)(g,{style:{"margin-left":"30px"},onClick:(0,r.iM)(h.addTheme,["prevent"]),type:"primary",plain:"",size:"medium"},{default:(0,i.w5)((function(){return[u]})),_:1},8,["onClick"])]),(0,i.wy)((0,i.Wm)(_,{stripe:"",data:p.tableData},{default:(0,i.w5)((function(){return[(0,i.Wm)(f,{prop:"id",label:"id",width:"100"}),(0,i.Wm)(f,{prop:"title_img",label:"标题图",width:"200"},{default:(0,i.w5)((function(e){return[(0,i.Wm)(w,{src:e.row.title_img,"preview-src-list":p.titleImgSrcList,style:{"max-height":"50px","max-width":"100px"}},null,8,["src","preview-src-list"])]})),_:1}),(0,i.Wm)(f,{prop:"title",label:"标题",width:"150"}),(0,i.Wm)(f,{prop:"name",label:"名称",width:"150"}),(0,i.Wm)(f,{prop:"tpl_name",label:"模版名",width:"150"}),(0,i.Wm)(f,{prop:"description",label:"描述",width:"200"}),(0,i.Wm)(f,{prop:"entrance_img",label:"入口图",width:"200"},{default:(0,i.w5)((function(e){return[(0,i.Wm)(w,{src:e.row.entrance_img,"preview-src-list":p.entranceImgSrcList,style:{"max-height":"50px","max-width":"100px"}},null,8,["src","preview-src-list"])]})),_:1}),(0,i.Wm)(f,{prop:"internal_top_img","min-width":"200",label:"外链图"},{default:(0,i.w5)((function(e){return[(0,i.Wm)(w,{src:e.row.internal_top_img,"preview-src-list":p.internalTopImgSrcList,style:{"max-height":"50px","max-width":"100px"}},null,8,["src","preview-src-list"])]})),_:1}),(0,i.Wm)(f,{fixed:"right",width:"150",label:"操作"},{default:(0,i.w5)((function(e){return[(0,i.Wm)(g,{onClick:(0,r.iM)((function(t){return h.handleEdit(e.row)}),["prevent"]),type:"primary",plain:"",size:"mini"},{default:(0,i.w5)((function(){return[o]})),_:2},1032,["onClick"]),(0,i.wy)((0,i.Wm)(g,{onClick:(0,r.iM)((function(t){return h.handleDelete(e.row)}),["prevent"]),type:"danger",size:"mini",plain:""},{default:(0,i.w5)((function(){return[m]})),_:2},1032,["onClick"]),[[x,{permission:["删除主题"],type:"disabled"}]])]})),_:1})]})),_:1},8,["data"]),[[b,e.loading]]),(0,i._)("div",d,[p.refreshPagination?((0,i.wg)(),(0,i.j4)(v,{key:0,onCurrentChange:h.handleCurrentChange,background:!0,"page-size":p.pageCount,"current-page":p.currentPage,layout:"prev, pager, next, jumper",total:p.totalNums},null,8,["onCurrentChange","page-size","current-page","total"])):(0,i.kq)("",!0)])]))])}var h=n(48534),g=(n(41539),n(54747),n(35666),n(81901)),f=n(62589),w={components:{ThemeEdit:f["default"]},data:function(){return{themeId:null,isCreate:!1,titleImgSrcList:[],entranceImgSrcList:[],internalTopImgSrcList:[],tableData:[],showEdit:!1,totalNums:0,currentPage:1,pageCount:10,refreshPagination:!0}},created:function(){var e=this;return(0,h.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.getThemes(),e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()},methods:{getThemes:function(){var e=this;return(0,h.Z)(regeneratorRuntime.mark((function t(){var n,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.currentPage-1,i=e.pageCount,t.next=4,g["default"].getThemes(n,i);case 4:r=t.sent,e.tableData=r.items,e.totalNums=r.total,e.initImgSrcList();case 8:case"end":return t.stop()}}),t)})))()},initImgSrcList:function(){var e=this;this.tableData.forEach((function(t){t.title_img&&e.titleImgSrcList.push(t.title_img)})),this.tableData.forEach((function(t){t.entrance_img&&e.entranceImgSrcList.push(t.entrance_img)})),this.tableData.forEach((function(t){t.internal_top_img&&e.internalTopImgSrcList.push(t.internal_top_img)}))},handleCurrentChange:function(e){var t=this;return(0,h.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.titleImgSrcList=[],t.entranceImgSrcList=[],t.internalTopImgSrcList=[],t.currentPage=e,t.loading=!0,t.getThemes(),t.loading=!1;case 7:case"end":return n.stop()}}),n)})))()},handleEdit:function(e){this.isCreate=!1,this.themeId="".concat(e.id),this.showEdit=!0},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((0,h.Z)(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,g["default"].deleteTheme(e.id);case 2:i=n.sent,i.code<window.MAX_SUCCESS_CODE&&(t.getThemes(),t.$message({type:"success",message:"".concat(i.message)}));case 4:case"end":return n.stop()}}),n)}))))},addTheme:function(){this.isCreate=!0,this.themeId=null,this.showEdit=!0},editClose:function(){this.showEdit=!1,this.getThemes()}}},_=n(83744);const v=(0,_.Z)(w,[["render",p],["__scopeId","data-v-1ecd13fc"]]);var C=v}}]);
//# sourceMappingURL=6078.da693e86.js.map