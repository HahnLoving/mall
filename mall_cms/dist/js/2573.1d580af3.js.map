{"version":3,"file":"js/2573.1d580af3.js","mappings":"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","sources":["webpack://lin-cms-vue/./src/model/activity.js","webpack://lin-cms-vue/./src/model/category.js","webpack://lin-cms-vue/./src/view/activity/activity-edit.vue","webpack://lin-cms-vue/./src/view/activity/activity-edit.vue?7aeb","webpack://lin-cms-vue/./src/view/coupon/coupon-list.vue","webpack://lin-cms-vue/./src/view/coupon/coupon-list.vue?5a2f"],"sourcesContent":["import { post, get, put, _delete } from '@/lin/plugin/axios'\n\nclass Activity {\n  static async addActivity(data) {\n    const res = await post('v1/activity', data)\n    return res\n  }\n\n  static async getActivity(id) {\n    const res = await get(`v1/activity/${id}`)\n    return res\n  }\n\n  static async getActivityDetail(id) {\n    const res = await get(`v1/activity/${id}/detail`)\n    return res\n  }\n\n  static async editActivity(id, data) {\n    const res = await put(`v1/activity/${id}`, data)\n    return res\n  }\n\n  static async deleteActivity(id) {\n    const res = await _delete(`v1/activity/${id}`)\n    return res\n  }\n\n  static async getActivities(page = 0, count = 10) {\n    const res = await get('v1/activity/page', { page, count })\n    return res\n  }\n}\n\nexport default Activity\n","import { post, get, put, _delete } from '@/lin/plugin/axios'\n\nclass Category {\n  static async addCategory(data) {\n    const res = await post('v1/category', data)\n    return res\n  }\n\n  static async getCategory(id) {\n    const res = await get(`v1/category/${id}`)\n    return res\n  }\n\n  static async editCategory(id, data) {\n    const res = await put(`v1/category/${id}`, data)\n    return res\n  }\n\n  static async deleteCategory(id) {\n    const res = await _delete(`v1/category/${id}`)\n    return res\n  }\n\n  /**\n   * 分页获取分类数据\n   * @param page\n   * @param count\n   * @param root 1: 父类\n   * @returns {Promise<*>}\n   */\n  static async getCategories(page = 0, count = 10, root = 1) {\n    const res = await get('v1/category/page', {\n      page,\n      count,\n      root,\n    })\n    return res\n  }\n\n  /**\n   * 分页获取子分类数据\n   * @param page\n   * @param count\n   * @param id 父分类id\n   * @returns {Promise<*>}\n   */\n  static async getSubCategories(page = 0, count = 10, id = 1) {\n    const res = await get('v1/category/sub-page', {\n      page,\n      count,\n      id,\n    })\n    return res\n  }\n\n  static async getList() {\n    const res = await get('v1/category/list')\n    return res\n  }\n}\n\nexport default Category\n","<template>\n  <div>\n    <sticky-top>\n      <div class=\"title\">\n        <span>{{ isCreate ? '创建优惠卷' : '更新优惠卷' }}</span>\n        <span class=\"back\" @click=\"back\"> <i class=\"iconfont icon-fanhui\"></i> 返回 </span>\n        <el-divider></el-divider>\n      </div>\n    </sticky-top>\n    <div class=\"container\">\n      <div class=\"wrap\">\n        <el-row>\n          <el-col :lg=\"16\" :md=\"20\" :sm=\"24\" :xs=\"24\">\n            <el-form :model=\"form\" status-icon ref=\"form\" label-width=\"100px\" @submit.native.prevent>\n              <el-form-item label=\"标题\" prop=\"title\">\n                <el-input size=\"medium\" v-model=\"form.title\" placeholder=\"请填写优惠卷标题\"></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"名称\" prop=\"name\">\n                <el-input size=\"medium\" v-model=\"form.name\" placeholder=\"请填写优惠卷名称\"></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"提示\" prop=\"remark\">\n                <el-input size=\"medium\" v-model=\"form.remark\" placeholder=\"请填写优惠卷提示\"></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"状态\" prop=\"online\">\n                <el-select v-model=\"form.online\" placeholder=\"请填写状态\">\n                  <el-option v-for=\"(item, index) in types\" :key=\"item\" :label=\"item\" :value=\"index\"></el-option>\n                </el-select>\n              </el-form-item>\n\n              <el-form-item label=\"时间\">\n                <el-date-picker\n                  v-model=\"range\"\n                  type=\"daterange\"\n                  align=\"right\"\n                  unlink-panels\n                  range-separator=\"至\"\n                  start-placeholder=\"开始日期\"\n                  end-placeholder=\"结束日期\"\n                  :picker-options=\"pickerOptions\"\n                ></el-date-picker>\n              </el-form-item>\n\n              <!-- <el-form-item label=\"选择分类\" prop=\"categoryIds\">\n                <el-cascader placeholder=\"选择分类\" v-model=\"categoryIds\" :props=\"cascaderCategoryProps\"></el-cascader>\n              </el-form-item>-->\n\n              <!-- <el-form-item label=\"选择优惠卷\" prop=\"couponIds\">\n                <el-cascader placeholder=\"选择优惠卷\" v-model=\"couponIds\" :props=\"cascaderCouponProps\"></el-cascader>\n              </el-form-item>-->\n\n              <el-form-item label=\"主图\" prop=\"cover_img\">\n                <upload-imgs :max-num=\"maxNum\" ref=\"uploadCoverEle\" :rules=\"rules\" :value=\"initCoverData\" />\n              </el-form-item>\n\n              <el-form-item label=\"顶部图\" prop=\"internal_top_img\">\n                <upload-imgs :max-num=\"maxNum\" ref=\"uploadTopEle\" :rules=\"rules\" :value=\"initTopData\" />\n              </el-form-item>\n\n              <el-form-item label=\"描述\" prop=\"description\">\n                <el-input size=\"medium\" v-model=\"form.description\" placeholder=\"请填写优惠卷描述\"></el-input>\n              </el-form-item>\n\n              <el-form-item class=\"submit\">\n                <el-button\n                  v-permission=\"{ permission: ['创建活动', '更新活动'], type: 'disabled' }\"\n                  type=\"primary\"\n                  @click=\"submitForm('form')\"\n                  >保 存</el-button\n                >\n                <!-- <el-button @click=\"resetForm('form')\">重 置</el-button> -->\n              </el-form-item>\n            </el-form>\n          </el-col>\n        </el-row>\n      </div>\n      <coupon-list v-if=\"!isCreate\" :activityId=\"activityId\"></coupon-list>\n    </div>\n  </div>\n</template>\n\n<script>\nimport dayjs from 'dayjs'\nimport Activity from '@/model/activity'\nimport Category from '@/model/category'\nimport coupon from '@/model/coupon'\nimport UploadImgs from '@/component/base/upload-image'\nimport CouponList from '../coupon/coupon-list'\n\nexport default {\n  components: { UploadImgs, CouponList },\n  props: {\n    isCreate: {\n      type: Boolean,\n      default: false,\n    },\n    activityId: {\n      type: String,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      form: {\n        id: null,\n        name: '',\n        title: '',\n        description: '',\n        online: 1,\n        remark: '',\n        coupon_ids: [],\n      },\n      types: ['下线', '上线'],\n      range: '',\n      pickerOptions: {\n        shortcuts: [\n          {\n            text: '最近一周',\n            onClick(picker) {\n              const end = new Date()\n              const start = new Date()\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 7)\n              picker.$emit('pick', [start, end])\n            },\n          },\n          {\n            text: '最近一个月',\n            onClick(picker) {\n              const end = new Date()\n              const start = new Date()\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 30)\n              picker.$emit('pick', [start, end])\n            },\n          },\n          {\n            text: '最近三个月',\n            onClick(picker) {\n              const end = new Date()\n              const start = new Date()\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 90)\n              picker.$emit('pick', [start, end])\n            },\n          },\n        ],\n      },\n      rules: {\n        minWidth: 10,\n        minHeight: 10,\n        maxSize: 5,\n      },\n      initCoverData: [],\n      initTopData: [],\n      categoryIds: [],\n      couponIds: [],\n      maxNum: 1,\n      cascaderCategoryProps: {\n        lazy: true,\n        multiple: true,\n        async lazyLoad(node, resolve) {\n          const { level } = node\n          try {\n            const suggestions = await Category.getList()\n            const nodes = suggestions.map(item => ({\n              value: item.id,\n              label: `${item.id}-${item.name}`,\n              leaf: level >= 0,\n            }))\n            resolve(nodes)\n          } catch (error) {\n            this.$message.error('获取分类信息失败，请检查网络')\n          }\n        },\n      },\n      cascaderCouponProps: {\n        lazy: true,\n        multiple: true,\n        async lazyLoad(node, resolve) {\n          const { level } = node\n          try {\n            const suggestions = await coupon.getSuggestions(null)\n            const nodes = suggestions.map(item => ({\n              value: item.id,\n              label: `${item.id}-${item.name}`,\n              leaf: level >= 0,\n            }))\n            resolve(nodes)\n          } catch (error) {\n            this.$message.error('获取优惠卷信息失败，请检查网络')\n          }\n        },\n      },\n    }\n  },\n  async mounted() {\n    if (!this.isCreate) {\n      const res = await Activity.getActivityDetail(this.activityId)\n      this.form = res\n      const end = new Date(res.end_time)\n      const start = new Date(res.start_time)\n      this.range = [start, end]\n      this.initCoverData = [\n        {\n          id: res.id,\n          display: res.entrance_img,\n        },\n      ]\n\n      this.initTopData = [\n        {\n          id: res.id,\n          display: res.internal_top_img,\n        },\n      ]\n      this.couponIds = res.coupon_ids.map(it => [it])\n      this.form.coupon_ids = res.coupon_ids\n    }\n  },\n  methods: {\n    // eslint-disable-next-line\n    async submitForm(formName) {\n      await this.getValue()\n      try {\n        const postData = { ...this.form }\n        if (this.form.activity_cover_id === 0) {\n          this.form.activity_cover_id = null\n        }\n        postData.coupon_ids = this.couponIds.map(it => it[0])\n        postData.start_time = this.dateFormat(this.range[0])\n        postData.end_time = this.dateFormat(this.range[1])\n        let res\n        if (this.isCreate) {\n          res = await Activity.addActivity(postData)\n        } else {\n          res = await Activity.editActivity(\n            this.activityId,\n            // eslint-disable-next-line\n            postData,\n          )\n        }\n        if (res.code < window.MAX_SUCCESS_CODE) {\n          this.$message.success(`${res.message}`)\n          this.$confirm('是否返回上一页?', '提示', {\n            confirmButtonText: '是',\n            cancelButtonText: '否',\n            type: 'info',\n          }).then(async () => {\n            this.$emit('editClose')\n          })\n        }\n      } catch (error) {\n        console.error(error)\n      }\n    },\n    // 重置表单\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    },\n    back() {\n      this.$emit('editClose')\n    },\n    dateFormat(val) {\n      return dayjs(val).format('YYYY-MM-DD HH:mm:ss')\n    },\n    async getValue() {\n      const val = await this.$refs.uploadTopEle.getValue()\n      if (val && val.length > 0) {\n        this.form.internal_top_img = val[0].display\n      }\n      const val1 = await this.$refs.uploadCoverEle.getValue()\n      if (val1 && val1.length > 0) {\n        this.form.entrance_img = val1[0].display\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.el-divider--horizontal {\n  margin: 0;\n}\n\n.container {\n  .title {\n    height: 59px;\n    line-height: 59px;\n    color: $parent-title-color;\n    font-size: 16px;\n    font-weight: 500;\n    text-indent: 40px;\n\n    .back {\n      float: right;\n      margin-right: 40px;\n      cursor: pointer;\n    }\n  }\n\n  .wrap {\n    padding: 20px;\n  }\n\n  .submit {\n    float: left;\n  }\n}\n\n.my-autocomplete {\n  li {\n    line-height: normal;\n    padding: 7px;\n    display: inline-flex;\n    align-content: space-around;\n    .name {\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n    .id {\n      margin-right: 15px;\n      font-size: 12px;\n      color: #b4b4b4;\n    }\n\n    .highlighted .addr {\n      color: #ddd;\n    }\n  }\n}\n</style>\n","import { render } from \"./activity-edit.vue?vue&type=template&id=53ddb6ac&scoped=true\"\nimport script from \"./activity-edit.vue?vue&type=script&lang=js\"\nexport * from \"./activity-edit.vue?vue&type=script&lang=js\"\n\nimport \"./activity-edit.vue?vue&type=style&index=0&id=53ddb6ac&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhahn/Documents/Hahn/自考/mall/mall_cms/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-53ddb6ac\"]])\n\nexport default __exports__","<template>\n  <div>\n    <div v-if=\"!showEdit\" class=\"container\">\n      <div class=\"header\">\n        <div class=\"title\">优惠卷列表</div>\n        <!-- <el-button @click.prevent=\"addCoupon\" type=\"primary\" plain size=\"medium\">添加优惠卷</el-button> -->\n      </div>\n\n      <el-table stripe v-loading=\"loading\" :data=\"tableData\">\n        <el-table-column prop=\"id\" label=\"id\" width=\"100\"></el-table-column>\n        <el-table-column :show-overflow-tooltip=\"true\" prop=\"title\" label=\"标题\" width=\"250\"></el-table-column>\n        <el-table-column prop=\"full_money\" label=\"满减额\" width=\"150\"></el-table-column>\n        <el-table-column :show-overflow-tooltip=\"true\" prop=\"minus\" label=\"优惠额\" width=\"150\"></el-table-column>\n        <el-table-column :show-overflow-tooltip=\"true\" prop=\"rate\" label=\"折扣\" width=\"150\"></el-table-column>\n        <el-table-column prop=\"type\" label=\"类型\" width=\"150\">\n          <template  #default=\"scope\">{{ scope.row.type | typeFormat }}</template>\n        </el-table-column>\n        <el-table-column prop=\"start_time\" label=\"开始时间\" width=\"200\">\n          <template  #default=\"scope\">{{ scope.row.start_time | dateFormat }}</template>\n        </el-table-column>\n        <el-table-column prop=\"end_time\" label=\"结束时间\" width=\"200\">\n          <template #default=\"scope\">{{ scope.row.end_time | dateFormat }}</template>\n        </el-table-column>\n        <el-table-column\n          :show-overflow-tooltip=\"true\"\n          prop=\"description\"\n          min-width=\"200\"\n          label=\"描述\"\n        ></el-table-column>\n        <el-table-column fixed=\"right\" width=\"150\" label=\"操作\">\n          <template #default=\"scope\">\n            <el-button @click.prevent=\"handleEdit(scope.row)\" type=\"primary\" plain size=\"mini\">编辑</el-button>\n            <el-button\n              v-permission=\"{ auth: ['删除优惠卷'], type: 'disabled' }\"\n              @click.prevent=\"handleDelete(scope.row)\"\n              type=\"danger\"\n              size=\"mini\"\n              plain\n              >删除</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-table stripe v-loading=\"loading\" :data=\"templates\">\n        <el-table-column prop=\"id\" label=\"id\" width=\"100\"></el-table-column>\n        <el-table-column prop=\"title\" label=\"名称\" width=\"250\"></el-table-column>\n        <el-table-column prop=\"full_money\" label=\"满减额\" width=\"150\"></el-table-column>\n        <el-table-column prop=\"minus\" label=\"优惠额\" width=\"150\"></el-table-column>\n        <el-table-column prop=\"rate\" label=\"折扣\" width=\"150\"></el-table-column>\n        <el-table-column prop=\"type\" label=\"类型\" width=\"150\">\n          <template #default=\"scope\">{{ scope.row.type | typeFormat }}</template>\n        </el-table-column>\n        <el-table-column prop=\"description\" label=\"描述\" min-width=\"300\"></el-table-column>\n        <el-table-column fixed=\"right\" width=\"300\" label=\"操作\">\n          <template #default=\"scope\">\n            <el-button\n              v-permission=\"{ permission: ['创建优惠卷'], type: 'disabled' }\"\n              @click.prevent=\"addCoupon(scope.row)\"\n              type=\"primary\"\n              plain\n              size=\"mini\"\n              >从当前模板创建</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <coupon-edit\n      v-else\n      @editClose=\"editClose\"\n      :templateData=\"templateData\"\n      :couponId=\"couponId\"\n      :isCreate=\"isCreate\"\n      :activityId=\"activityId\"\n    ></coupon-edit>\n  </div>\n</template>\n\n<script>\nimport dayjs from 'dayjs'\nimport Coupon from '@/model/coupon'\nimport CouponEdit from './CouponEdit'\n\nexport default {\n  components: { CouponEdit },\n  props: {\n    activityId: {\n      type: String,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      couponId: null,\n      isCreate: false,\n      tableData: [],\n      templates: [],\n      showEdit: false,\n      totalNums: 0,\n      currentPage: 1,\n      pageCount: 10,\n      refreshPagination: true,\n      templateData: null,\n      loading: false,\n    }\n  },\n  async created() {\n    this.$nextTick(() => {\n      this.loading = true\n      this.getCoupons()\n      this.getTemplates()\n      this.loading = false\n    })\n  },\n  methods: {\n    async getCoupons() {\n      const coupons = await Coupon.getListByActivityId(this.activityId)\n      this.tableData = coupons\n    },\n    async getTemplates() {\n      const templates = await Coupon.getCouponTemplates()\n      this.templates = templates\n    },\n    async handleCurrentChange(val) {\n      this.currentPage = val\n      this.loading = true\n      this.getCoupons()\n      this.loading = false\n    },\n    handleEdit(val) {\n      this.isCreate = false\n      this.couponId = `${val.id}`\n      this.showEdit = true\n    },\n    handleDelete(val) {\n      this.$confirm('此操作将永久删除该项, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n      }).then(async () => {\n        const res = await Coupon.deleteCoupon(val.id)\n        if (res.code < window.MAX_SUCCESS_CODE) {\n          this.getCoupons()\n          this.$message({\n            type: 'success',\n            message: `${res.message}`,\n          })\n        }\n      })\n    },\n    addCoupon(templateData) {\n      this.templateData = templateData\n      this.isCreate = true\n      this.couponId = null\n      this.showEdit = true\n      this.getTemplates()\n    },\n    editClose() {\n      this.showEdit = false\n      this.getCoupons()\n    },\n  },\n  filters: {\n    dateFormat(val) {\n      return dayjs(val).format('YYYY-MM-DD HH:mm:ss')\n    },\n    typeFormat(val) {\n      switch (val) {\n        case 1:\n          return '满减券'\n        case 2:\n          return '折扣券'\n        case 3:\n          return '无门槛券'\n        case 4:\n          return '满金额折扣券'\n        default:\n          return val\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  padding: 0 30px;\n\n  .header {\n    display: flex;\n    align-items: center;\n\n    .title {\n      height: 59px;\n      line-height: 59px;\n      color: $parent-title-color;\n      font-size: 16px;\n      font-weight: 500;\n    }\n  }\n\n  .pagination {\n    display: flex;\n    justify-content: flex-end;\n    margin: 20px;\n  }\n}\n</style>\n","import { render } from \"./coupon-list.vue?vue&type=template&id=093feb16&scoped=true\"\nimport script from \"./coupon-list.vue?vue&type=script&lang=js\"\nexport * from \"./coupon-list.vue?vue&type=script&lang=js\"\n\nimport \"./coupon-list.vue?vue&type=style&index=0&id=093feb16&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhahn/Documents/Hahn/自考/mall/mall_cms/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-093feb16\"]])\n\nexport default __exports__"],"names":["Activity","data","post","res","id","get","put","_delete","page","count","Category","root","class","isCreate","back","lg","md","sm","xs","model","form","ref","label","prop","size","title","placeholder","name","remark","online","types","item","index","key","value","range","type","align","pickerOptions","maxNum","rules","initCoverData","initTopData","description","submitForm","activityId","components","UploadImgs","CouponList","props","Boolean","default","String","coupon_ids","shortcuts","text","onClick","picker","end","Date","start","setTime","getTime","$emit","minWidth","minHeight","maxSize","categoryIds","couponIds","cascaderCategoryProps","lazy","multiple","lazyLoad","node","resolve","level","suggestions","nodes","map","leaf","$message","error","cascaderCouponProps","coupon","mounted","end_time","start_time","display","entrance_img","internal_top_img","it","methods","formName","getValue","postData","activity_cover_id","dateFormat","code","window","MAX_SUCCESS_CODE","success","message","$confirm","confirmButtonText","cancelButtonText","then","console","resetForm","this","$refs","resetFields","val","format","uploadTopEle","length","uploadCoverEle","val1","__exports__","render","showEdit","editClose","templateData","couponId","stripe","tableData","width","scope","row","typeFormat","fixed","handleEdit","plain","handleDelete","loading","templates","addCoupon","CouponEdit","totalNums","currentPage","pageCount","refreshPagination","created","$nextTick","getCoupons","getTemplates","coupons","handleCurrentChange","filters"],"sourceRoot":""}