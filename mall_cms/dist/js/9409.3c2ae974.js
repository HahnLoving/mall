"use strict";(self["webpackChunklin_cms_vue"]=self["webpackChunklin_cms_vue"]||[]).push([[9409,370,6955,9311],{16205:function(t,e,n){n.r(e),n.d(e,{default:function(){return W}});var i=n(66252),r=n(58061),a=n(56612),o=function(t){return(0,i.dD)("data-v-5889662c"),t=t(),(0,i.Cn)(),t},l={key:0,class:"container"},u={class:"header"},s=o((function(){return(0,i._)("div",{class:"title"},"活动列表",-1)})),c=(0,i.Uk)("添加活动"),d=["src","alt"],m=["src","alt"],p=(0,i.Uk)("编辑"),w=(0,i.Uk)("删除"),f={class:"pagination"};function g(t,e,n,o,g,h){var _=(0,i.up)("el-button"),v=(0,i.up)("el-table-column"),C=(0,i.up)("el-table"),y=(0,i.up)("el-pagination"),k=(0,i.up)("activity-edit"),b=(0,i.Q2)("permission"),D=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("div",null,[g.showEdit?((0,i.wg)(),(0,i.j4)(k,{key:1,onEditClose:h.editClose,activityId:g.activityId,isCreate:g.isCreate},null,8,["onEditClose","activityId","isCreate"])):((0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("div",u,[s,(0,i.Wm)(_,{style:{"margin-left":"30px"},onClick:(0,r.iM)(h.addActivity,["prevent"]),type:"primary",plain:"",size:"medium"},{default:(0,i.w5)((function(){return[c]})),_:1},8,["onClick"])]),(0,i.wy)((0,i.Wm)(C,{stripe:"",data:g.tableData},{default:(0,i.w5)((function(){return[(0,i.Wm)(v,{prop:"id",label:"id",width:"100"}),(0,i.Wm)(v,{prop:"entrance_img",label:"入口图",width:"200"},{default:(0,i.w5)((function(t){return[(0,i._)("img",{class:"display_img",src:t.row.entrance_img,alt:t.row.entrance_img},null,8,d)]})),_:1}),(0,i.Wm)(v,{"show-overflow-tooltip":!0,prop:"title",label:"标题",width:"150"}),(0,i.Wm)(v,{prop:"name",label:"名称",width:"150"}),(0,i.Wm)(v,{"show-overflow-tooltip":!0,prop:"remark",label:"提示信息",width:"200"}),(0,i.Wm)(v,{prop:"internal_top_img",label:"顶部图",width:"200"},{default:(0,i.w5)((function(t){return[(0,i._)("img",{class:"display_img",src:t.row.internal_top_img,alt:t.row.internal_top_img},null,8,m)]})),_:1}),(0,i.Wm)(v,{prop:"online",label:"状态",width:"150"},{default:(0,i.w5)((function(t){return[(0,i.Uk)((0,a.zw)(t.row.online_date),1)]})),_:1}),(0,i.Wm)(v,{prop:"start_time",label:"开始时间",width:"200"},{default:(0,i.w5)((function(t){return[(0,i.Uk)((0,a.zw)(t.row.start_time_date),1)]})),_:1}),(0,i.Wm)(v,{prop:"end_time",label:"结束时间",width:"200"},{default:(0,i.w5)((function(t){return[(0,i.Uk)((0,a.zw)(t.row.end_time_date),1)]})),_:1}),(0,i.Wm)(v,{"show-overflow-tooltip":!0,"min-width":"300",prop:"description",label:"描述"}),(0,i.Wm)(v,{fixed:"right",width:"150",label:"操作"},{default:(0,i.w5)((function(t){return[(0,i.Wm)(_,{onClick:(0,r.iM)((function(e){return h.handleEdit(t.row)}),["prevent"]),type:"primary",plain:"",size:"mini"},{default:(0,i.w5)((function(){return[p]})),_:2},1032,["onClick"]),(0,i.wy)((0,i.Wm)(_,{onClick:(0,r.iM)((function(e){return h.handleDelete(t.row)}),["prevent"]),type:"danger",size:"mini",plain:""},{default:(0,i.w5)((function(){return[w]})),_:2},1032,["onClick"]),[[b,{permission:["删除活动"],type:"disabled"}]])]})),_:1})]})),_:1},8,["data"]),[[D,t.loading]]),(0,i._)("div",f,[g.refreshPagination?((0,i.wg)(),(0,i.j4)(y,{key:0,onCurrentChange:h.handleCurrentChange,background:!0,"page-size":g.pageCount,"current-page":g.currentPage,layout:"prev, pager, next, jumper",total:g.totalNums},null,8,["onCurrentChange","page-size","current-page","total"])):(0,i.kq)("",!0)])]))])}var h=n(48534),_=(n(41539),n(54747),n(35666),n(27484)),v=n.n(_),C=n(18356),y=n(2573),k={components:{ActivityEdit:y["default"]},data:function(){return{activityId:null,isCreate:!1,tableData:[],showEdit:!1,totalNums:0,currentPage:1,pageCount:10,refreshPagination:!0}},created:function(){var t=this;return(0,h.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loading=!0,t.getActivities(),t.loading=!1;case 3:case"end":return e.stop()}}),e)})))()},methods:{getActivities:function(){var t=this;return(0,h.Z)(regeneratorRuntime.mark((function e(){var n,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.currentPage-1,i=t.pageCount,e.next=4,C["default"].getActivities(n,i);case 4:r=e.sent,t.tableData=r.items,t.totalNums=r.total,t.tableData.forEach((function(t){t.start_time_date=v()(t.start_time).format("YYYY-MM-DD HH:mm:ss"),t.end_time_date=v()(t.end_time).format("YYYY-MM-DD HH:mm:ss"),0==t.online?t.online_date="下线":t.online_date="上线"}));case 8:case"end":return e.stop()}}),e)})))()},handleCurrentChange:function(t){var e=this;return(0,h.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.currentPage=t,e.loading=!0,e.getActivities(),e.loading=!1;case 4:case"end":return n.stop()}}),n)})))()},handleEdit:function(t){this.isCreate=!1,this.activityId="".concat(t.id),this.showEdit=!0},handleDelete:function(t){var e=this;this.$confirm("此操作将永久删除该项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((0,h.Z)(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,C["default"].deleteActivity(t.id);case 2:i=n.sent,i.code<window.MAX_SUCCESS_CODE&&(e.getActivities(),e.$message({type:"success",message:"".concat(i.message)}));case 4:case"end":return n.stop()}}),n)}))))},addActivity:function(t){this.templateData=t,this.isCreate=!0,this.activityId=null,this.showEdit=!0},editClose:function(){this.showEdit=!1,this.getActivities()}},filters:{dateFormat:function(t){return v()(t).format("YYYY-MM-DD HH:mm:ss")},onlineFormat:function(t){switch(t){case 0:return"下线";case 1:return"上线";default:return t}}}},b=n(83744);const D=(0,b.Z)(k,[["render",g],["__scopeId","data-v-5889662c"]]);var W=D}}]);
//# sourceMappingURL=9409.3c2ae974.js.map