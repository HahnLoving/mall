{"version":3,"file":"js/6251.7a86c017.js","mappings":"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","sources":["webpack://lin-cms-vue/./src/model/banner.js","webpack://lin-cms-vue/./src/view/banner/banner-with-items.vue","webpack://lin-cms-vue/./src/view/banner/banner-with-items.vue?e18f"],"sourcesContent":["import { post, get, put, _delete } from '@/lin/plugin/axios'\n\nclass Banner {\n  static async addBanner(data) {\n    const res = await post('v1/banner', data)\n    return res\n  }\n\n  static async getBanner(id) {\n    const res = await get(`v1/banner/${id}`)\n    return res\n  }\n\n  static async editBanner(id, data) {\n    const res = await put(`v1/banner/${id}`, data)\n    return res\n  }\n\n  static async deleteBanner(id) {\n    const res = await _delete(`v1/banner/${id}`)\n    return res\n  }\n\n  static async getBanners(page = 0, count = 10) {\n    const res = await get('v1/banner/page', {\n      page,\n      count,\n    })\n    return res\n  }\n}\n\nexport default Banner\n","<template>\n  <div class=\"container\" v-if=\"!showEdit\">\n    <div class=\"title\">\n      <span>修改Banner</span> <span class=\"back\" @click=\"back\"> <i class=\"iconfont icon-fanhui\"></i> 返回 </span>\n    </div>\n    <el-divider></el-divider>\n    <div class=\"wrap\">\n      <el-row>\n        <el-col :lg=\"16\" :md=\"20\" :sm=\"24\" :xs=\"24\">\n          <el-form :model=\"form\" status-icon ref=\"form\" label-width=\"100px\" v-loading=\"loading\" @submit.native.prevent>\n            <el-form-item label=\"名称\" prop=\"name\">\n              <el-input size=\"medium\" v-model=\"form.name\" placeholder=\"请填写名称\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"标题\" prop=\"title\">\n              <el-input size=\"medium\" v-model=\"form.title\" placeholder=\"请填写标题\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"主图\" prop=\"img\">\n              <upload-imgs ref=\"uploadEle\" :value=\"initData\" :max-num=\"mainMaxNum\" />\n            </el-form-item>\n            <el-form-item label=\"描述\" prop=\"description\">\n              <el-input size=\"medium\" v-model=\"form.description\" type=\"textarea\" :rows=\"4\" placeholder=\"请填写描述\">\n              </el-input>\n            </el-form-item>\n            <el-form-item class=\"submit\">\n              <el-button\n                type=\"primary\"\n                v-permission=\"{ permission: '更新Banner', type: 'disabled' }\"\n                @click=\"submitForm('form')\"\n                >保 存</el-button\n              >\n              <!-- <el-button @click=\"resetForm('form')\">重 置</el-button> -->\n            </el-form-item>\n          </el-form>\n        </el-col>\n      </el-row>\n    </div>\n    <div>\n      <el-divider></el-divider>\n      <div class=\"header\">\n        <div class=\"title\">\n          <span>Banner-Item列表</span>\n          <el-button @click.prevent=\"addBannerItem\" class=\"add-btn\" type=\"primary\" plain>新增Banner-Item</el-button>\n        </div>\n      </div>\n      <el-row class=\"inner-container\">\n        <el-table stripe v-loading=\"loading\" :data=\"bannerItems\">\n          <el-table-column prop=\"id\" label=\"id\" width=\"100\"></el-table-column>\n          <el-table-column prop=\"img\" label=\"图片\" width=\"200\">\n            <template #default=\"scope\">\n              <el-image :src=\"scope.row.img\" :preview-src-list=\"imgSrcList\" style=\"max-height: 50px; max-width: 100px;\">\n              </el-image>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"name\" label=\"名称\" width=\"150\"></el-table-column>\n          <!-- <el-table-column prop=\"keyword\" label=\"关键字\" min-width=\"200\"></el-table-column> -->\n          <el-table-column prop=\"type_name\" label=\"类型\" width=\"150\"></el-table-column>\n          <el-table-column prop=\"spu_name\" label=\"SPU名称\" width=\"150\"></el-table-column>\n          <el-table-column prop=\"theme_name\" label=\"主题名称\" width=\"150\"></el-table-column>\n          <el-table-column fixed=\"right\" width=\"150\" label=\"操作\">\n            <template #default=\"scope\">\n              <el-button @click.prevent=\"handleEdit(scope.row)\" type=\"primary\" plain size=\"mini\">编辑</el-button>\n              <el-button\n                @click.prevent=\"handleDelete(scope.row)\"\n                type=\"danger\"\n                plain\n                size=\"mini\"\n                v-permission=\"{ permission: '删除Banner item', type: 'disabled' }\"\n                >删除</el-button\n              >\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-row>\n    </div>\n  </div>\n  <banner-item-edit\n    v-else\n    @editClose=\"editClose\"\n    :bannerId=\"bannerId\"\n    :isCreate=\"isCreate\"\n    :editID=\"editID\"\n  ></banner-item-edit>\n</template>\n\n<script>\nimport Banner from '@/model/banner'\nimport BannerItem from '@/model/banner-item'\nimport UploadImgs from '@/component/base/upload-image'\nimport BannerItemEdit from './banner-item-edit'\n\nexport default {\n  components: {\n    UploadImgs,\n    BannerItemEdit,\n  },\n  props: {\n    bannerId: {\n      type: Number,\n    },\n  },\n  data() {\n    return {\n      loading: false,\n      form: {\n        name: '',\n        title: '',\n        description: '',\n        keyword: null,\n      },\n      bannerItems: [],\n      imgSrcList: [],\n      mainMaxNum: 1,\n      initData: [],\n      isCreate: false,\n      showEdit: false,\n      editID: 0,\n      suggestions:[],\n    }\n  },\n  async mounted() {\n    this.loading = true\n    this.getDetail()\n    this.loading = false\n    // this.loadSuggestions()\n  },\n  methods: {\n    async getValue() {\n      const val = await this.$refs.uploadEle.getValue()\n      if (val && val.length > 0) {\n        this.form.img = val[0].display\n      }\n    },\n    async getDetail() {\n      const res = await Banner.getBanner(this.bannerId)\n      this.form = res\n      this.initData = [{ id: res.id, display: res.img }]\n      this.bannerItems = res.items\n      this.bannerItems.forEach(item=> {\n        if(item.type == 1) {\n          item.type_name = \"无类型\"\n        }else if(item.type == 2) {\n          item.type_name = \"Spu\"\n        }else if(item.type == 3) {\n          item.type_name = \"主题\"\n        }\n      })\n      this.initImgSrcList()\n    },\n    initImgSrcList() {\n      this.bannerItems.forEach(item => {\n        if (!item.img) {\n          return\n        }\n        this.imgSrcList.push(item.img)\n      })\n    },\n    async submitForm() {\n      await this.getValue()\n      const form = { ...this.form }\n      const res = await Banner.editBanner(this.bannerId, form)\n      if (res.code < window.MAX_SUCCESS_CODE) {\n        this.$message.success(`${res.message}`)\n        this.$emit('detailClose')\n      }\n    },\n    // 重置表单\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    },\n    back() {\n      this.$emit('detailClose')\n    },\n    addBannerItem() {\n      this.isCreate = true\n      this.editID = 0\n      this.showEdit = true\n    },\n    editClose() {\n      this.showEdit = false\n      this.getDetail()\n    },\n    handleEdit(row) {\n      this.isCreate = false\n      this.editID = row.id\n      this.showEdit = true\n    },\n    handleDelete(row) {\n      this.$confirm('此操作将永久删除该项, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n      }).then(async () => {\n        const res = await BannerItem.deleteBannerItem(row.id)\n        if (res.code < window.MAX_SUCCESS_CODE) {\n          this.getDetail()\n          this.$message({\n            type: 'success',\n            message: `${res.message}`,\n          })\n        }\n      })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.el-divider--horizontal {\n  margin: 0;\n}\n\n.container {\n  .title {\n    height: 59px;\n    line-height: 59px;\n    color: $parent-title-color;\n    font-size: 16px;\n    font-weight: 500;\n    text-indent: 40px;\n    .add-btn {\n      margin-left: 30px;\n    }\n\n    .back {\n      float: right;\n      margin-right: 40px;\n      cursor: pointer;\n    }\n  }\n\n  .wrap {\n    padding: 20px;\n  }\n\n  .submit {\n    float: left;\n  }\n\n  .inner-container {\n    margin-bottom: 50px;\n  }\n}\n.col {\n  display: flex;\n  justify-content: space-between;\n}\n</style>\n","import { render } from \"./banner-with-items.vue?vue&type=template&id=66c3cc55&scoped=true\"\nimport script from \"./banner-with-items.vue?vue&type=script&lang=js\"\nexport * from \"./banner-with-items.vue?vue&type=script&lang=js\"\n\nimport \"./banner-with-items.vue?vue&type=style&index=0&id=66c3cc55&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhahn/Documents/Hahn/自考/mall/mall_cms/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-66c3cc55\"]])\n\nexport default __exports__"],"names":["Banner","data","post","res","id","get","put","_delete","page","count","class","showEdit","editClose","bannerId","isCreate","editID","back","lg","md","sm","xs","model","form","ref","label","prop","size","name","placeholder","title","value","initData","mainMaxNum","description","type","rows","submitForm","loading","addBannerItem","plain","stripe","bannerItems","width","default","src","scope","row","img","imgSrcList","style","fixed","handleEdit","handleDelete","components","UploadImgs","BannerItemEdit","props","Number","keyword","suggestions","mounted","getDetail","methods","getValue","$refs","uploadEle","val","length","display","items","forEach","item","type_name","initImgSrcList","this","push","code","window","MAX_SUCCESS_CODE","$message","success","message","$emit","resetForm","formName","resetFields","$confirm","confirmButtonText","cancelButtonText","then","__exports__","render"],"sourceRoot":""}