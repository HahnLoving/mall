{"version":3,"file":"js/2194.e5677ec5.js","mappings":"+PAIqBA,EAAAA,W,yEAKnB,SAAgBC,GACd,OAAOC,EAAAA,EAAAA,YAAO,CACZC,OAAQ,OACRC,IAAK,oBACLC,KAAM,CACJC,MAAOL,EAAKK,MACZC,SAAUN,EAAKM,SACfC,SAAUP,EAAKO,SACfC,UAAWR,EAAKS,SAChBC,iBAAkBV,EAAKW,iBAEzBC,aAAa,M,wEAWjB,WAAsBN,EAAUC,EAAUM,EAASC,GAAnD,wGACuBb,EAAAA,EAAAA,YAAO,CAC1BE,IAAK,iBACLD,OAAQ,OACRE,KAAM,CACJS,QAAAA,EACAP,SAAAA,EACAC,SAAAA,GAEFQ,QAAS,CACPD,IAAAA,KAVN,cACQE,EADR,QAaEC,EAAAA,EAAAA,YAAWD,EAAOE,aAAcF,EAAOG,eAbzC,kBAcSH,GAdT,2C,8IAoBA,uHACqBI,EAAAA,EAAAA,KAAI,wBADzB,cACQC,EADR,OAEQC,EAAmC,OAAvBC,EAAAA,WAAAA,QAAAA,KAA8B,GAAKA,EAAAA,WAAAA,QAAAA,KAFvD,kBAGSC,OAAOC,QAAP,UAAmBH,GAAaD,IAHzC,2C,uIASA,uHACqBD,EAAAA,EAAAA,KAAI,wBADzB,cACQC,EADR,OAEQC,EAAmC,OAAvBC,EAAAA,WAAAA,QAAAA,KAA8B,GAAKA,EAAAA,WAAAA,QAAAA,KAFvD,kBAGSC,OAAOC,QAAP,UAAmBH,GAAaD,IAHzC,2C,qFAaA,YAAwE,IAAhDK,EAAgD,EAAhDA,aAAcC,EAAkC,EAAlCA,aAAcjB,EAAoB,EAApBA,iBAClD,OAAOkB,EAAAA,EAAAA,KAAI,2BAA4B,CACrCD,aAAAA,EACAjB,iBAAAA,EACAgB,aAAAA,Q,EAzEe3B","sources":["webpack://lin-cms-vue/./src/lin/model/user.js"],"sourcesContent":["import store from '@/store'\nimport _axios, { get, put } from '@/lin/plugin/axios'\nimport { saveTokens } from '../util/token'\n\nexport default class User {\n  /**\n   * 分配用户\n   * @param {object} user 注册信息\n   */\n  static register(user) {\n    return _axios({\n      method: 'post',\n      url: 'cms/user/register',\n      data: {\n        email: user.email,\n        username: user.username,\n        password: user.password,\n        group_ids: user.groupIds,\n        confirm_password: user.confirmPassword,\n      },\n      handleError: true,\n    })\n  }\n\n  /**\n   * 登陆获取tokens\n   * @param { String } username 用户名\n   * @param { String } password 密码\n   * @param { String } captcha 验证码\n   * @param { String } tag 验证码签名\n   */\n  static async getToken(username, password, captcha, tag) {\n    const tokens = await _axios({\n      url: 'cms/user/login',\n      method: 'POST',\n      data: {\n        captcha,\n        username,\n        password,\n      },\n      headers: {\n        tag,\n      },\n    })\n    saveTokens(tokens.access_token, tokens.refresh_token)\n    return tokens\n  }\n\n  /**\n   * 获取当前用户信息，并返回User实例\n   */\n  static async getInformation() {\n    const info = await get('cms/user/information')\n    const storeUser = store.getters.user === null ? {} : store.getters.user\n    return Object.assign({ ...storeUser }, info)\n  }\n\n  /**\n   * 获取当前用户信息和所拥有的权限\n   */\n  static async getPermissions() {\n    const info = await get('cms/user/permissions')\n    const storeUser = store.getters.user === null ? {} : store.getters.user\n    return Object.assign({ ...storeUser }, info)\n  }\n\n  /**\n   * 用户修改密码\n   * @param {string} newPassword 新密码\n   * @param {string} confirmPassword 确认新密码\n   * @param {string} oldPassword 旧密码\n   */\n  // eslint-disable-next-line camelcase\n  static updatePassword({ old_password, new_password, confirm_password }) {\n    return put('cms/user/change_password', {\n      new_password,\n      confirm_password,\n      old_password,\n    })\n  }\n}\n"],"names":["User","user","_axios","method","url","data","email","username","password","group_ids","groupIds","confirm_password","confirmPassword","handleError","captcha","tag","headers","tokens","saveTokens","access_token","refresh_token","get","info","storeUser","store","Object","assign","old_password","new_password","put"],"sourceRoot":""}