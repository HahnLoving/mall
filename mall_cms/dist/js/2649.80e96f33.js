"use strict";(self["webpackChunklin_cms_vue"]=self["webpackChunklin_cms_vue"]||[]).push([[2649],{92649:function(n,t,e){e.r(t),e.d(t,{default:function(){return I}});var o=e(66252);function i(n,t,e,i,r,a){var u=(0,o.up)("editor");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(u,{id:"tinymceEditor",init:r.tinymceInit,modelValue:r.content,"onUpdate:modelValue":t[0]||(t[0]=function(n){return r.content=n}),key:r.tinymceFlag},null,8,["init","modelValue"])])}var r=e(48534),a=(e(35666),e(9653),["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"]),u=function(n){return-1!==a.map((function(n){return n.toLowerCase()})).indexOf(n.toLowerCase())},l=function(n,t,e){Object.keys(t).filter(u).forEach((function(o){var i=t[o];"function"===typeof i&&("onInit"===o?i(n,e):e.on(o.substring(2),(function(n){return i(n,e)})))}))},c=function(n,t,e,i){var r=n.modelEvents?n.modelEvents:null,a=Array.isArray(r)?r.join(" "):r;(0,o.YP)(i,(function(t,o){e&&"string"===typeof t&&t!==o&&t!==e.getContent({format:n.outputFormat})&&e.setContent(t)})),e.on(a||"change input undo redo",(function(){t.emit("update:modelValue",e.getContent({format:n.outputFormat}))}))},s=function(n,t,e,o,i,r){o.setContent(r()),e.attrs["onUpdate:modelValue"]&&c(t,e,o,i),l(n,e.attrs,o)},d=0,f=function(n){var t=Date.now(),e=Math.floor(1e9*Math.random());return d++,n+"_"+e+d+String(t)},p=function(n){return null!==n&&"textarea"===n.tagName.toLowerCase()},m=function(n){return"undefined"===typeof n||""===n?[]:Array.isArray(n)?n:n.split(" ")},g=function(n,t){return m(n).concat(m(t))},h=function(n){return null===n||void 0===n},v=function(){return{listeners:[],scriptId:f("tiny-script"),scriptLoaded:!1}},y=function(){var n=v(),t=function(n,t,e,o){var i=t.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=n,i.src=e;var r=function(){i.removeEventListener("load",r),o()};i.addEventListener("load",r),t.head&&t.head.appendChild(i)},e=function(e,o,i){n.scriptLoaded?i():(n.listeners.push(i),e.getElementById(n.scriptId)||t(n.scriptId,e,o,(function(){n.listeners.forEach((function(n){return n()})),n.scriptLoaded=!0})))},o=function(){n=v()};return{load:e,reinitialize:o}},b=y(),C=function(){return"undefined"!==typeof window?window:e.g},S=function(){var n=C();return n&&n.tinymce?n.tinymce:null},w={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(n){return"html"===n||"text"===n}}},k=e(62931),D=function(){return D=Object.assign||function(n){for(var t,e=1,o=arguments.length;e<o;e++)for(var i in t=arguments[e],t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n},D.apply(this,arguments)},E=function(n,t,e,o){return n(o||"div",{id:t,ref:e})},M=function(n,t,e){return n("textarea",{id:t,visibility:"hidden",ref:e})},O=(0,o.aZ)({props:w,setup:function(n,t){var e=(0,k.BK)(n),i=e.disabled,r=e.modelValue,a=(0,k.iH)(null),u=null,l=n.id||f("tiny-vue"),c=n.init&&n.init.inline||n.inline,d=!!t.attrs["onUpdate:modelValue"],m=!0,v=n.initialValue?n.initialValue:"",y="",C=function(n){return d?function(){return(null===r||void 0===r?void 0:r.value)?r.value:""}:function(){return n?v:y}},w=function(){var e=C(m),o=D(D({},n.init),{readonly:n.disabled,selector:"#"+l,plugins:g(n.init&&n.init.plugins,n.plugins),toolbar:n.toolbar||n.init&&n.init.toolbar,inline:c,setup:function(o){u=o,o.on("init",(function(i){return s(i,n,t,o,r,e)})),n.init&&"function"===typeof n.init.setup&&n.init.setup(o)}});p(a.value)&&(a.value.style.visibility=""),S().init(o),m=!1};return(0,o.YP)(i,(function(n){null!==u&&u.setMode(n?"readonly":"design")})),(0,o.bv)((function(){if(null!==S())w();else if(a.value&&a.value.ownerDocument){var t=n.cloudChannel?n.cloudChannel:"5",e=n.apiKey?n.apiKey:"no-api-key",o=h(n.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/"+e+"/tinymce/"+t+"/tinymce.min.js":n.tinymceScriptSrc;b.load(a.value.ownerDocument,o,w)}})),(0,o.Jd)((function(){null!==S()&&S().remove(u)})),c||((0,o.dl)((function(){m||w()})),(0,o.se)((function(){var n;d||(y=u.getContent()),null===(n=S())||void 0===n||n.remove(u)}))),function(){return c?E(o.h,l,a,n.tagName):M(o.h,l,a)}}}),P=O,A=e(12109),B={name:"TinymceEditor",props:{defaultContent:{type:String,default:""},height:{type:Number,default:500},width:{type:Number,default:void 0},showMenubar:{type:Boolean,default:!0},toolbar:{type:String,default:" undo redo\n      | formatselect\n      | bold italic strikethrough forecolor backcolor formatpainter\n      | link image | alignleft aligncenter alignright alignjustify\n      | numlist bullist outdent indent\n      | removeformat\n      | preview fullscreen code"}},components:{Editor:P},data:function(){return{content:"",tinymceFlag:1,tinymceInit:{}}},created:function(){this.tinymceInit={language:"zh_CN",height:this.height,branding:!0,statusbar:!1,elementpath:!1,toolbar:this.toolbar,paste_data_images:!0,browser_spellcheck:!0,menubar:this.showMenubar,plugins:"print fullpage searchreplace autolink directionality visualblocks\n        visualchars template codesample charmap hr pagebreak nonbreaking anchor toc insertdatetime\n        wordcount textpattern help advlist table lists paste preview fullscreen image imagetools code link",images_upload_handler:function(n,t,e){return(0,r.Z)(regeneratorRuntime.mark((function o(){var i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:i=new File([n.blob()],n.filename(),{type:"image/*"}),(0,A.post)("cms/file",{file:i}).then((function(n){var e;n.length&&null!==(e=n[0])&&void 0!==e&&e.url&&t(n[0].url)})).catch((function(n){return e(n)}));case 2:case"end":return o.stop()}}),o)})))()}}},mounted:function(){this.defaultContent&&(this.content=this.defaultContent)},watch:{content:{handler:function(){this.$emit("change",this.content)}},defaultContent:{handler:function(){this.content=this.defaultContent},immediate:!0}},activated:function(){this.tinymceFlag++}},V=e(83744);const j=(0,V.Z)(B,[["render",i]]);var I=j}}]);
//# sourceMappingURL=2649.80e96f33.js.map