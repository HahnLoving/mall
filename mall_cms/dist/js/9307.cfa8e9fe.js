"use strict";(self["webpackChunklin_cms_vue"]=self["webpackChunklin_cms_vue"]||[]).push([[9307,370,1573],{42771:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var i=n(66252),r=n(58061),a=n(56612),o=function(e){return(0,i.dD)("data-v-bbf21e7c"),e=e(),(0,i.Cn)(),e},u={key:0,class:"container"},s={class:"header"},l=o((function(){return(0,i._)("div",{class:"title"},"SKU列表",-1)})),c=(0,i.Uk)("添加SKU"),d=(0,i.Uk)("编辑"),p=(0,i.Uk)("删除"),h={class:"pagination"};function g(e,t,n,o,g,m){var f=(0,i.up)("el-button"),w=(0,i.up)("el-table-column"),k=(0,i.up)("el-image"),v=(0,i.up)("el-table"),C=(0,i.up)("el-pagination"),b=(0,i.up)("sku-edit"),S=(0,i.Q2)("permission"),_=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("div",null,[g.showEdit?((0,i.wg)(),(0,i.j4)(b,{key:1,onEditClose:m.editClose,skuId:g.skuId,isCreate:g.isCreate},null,8,["onEditClose","skuId","isCreate"])):((0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("div",s,[l,(0,i.Wm)(f,{style:{"margin-left":"30px"},onClick:(0,r.iM)(m.addSku,["prevent"]),type:"primary",plain:"",size:"medium"},{default:(0,i.w5)((function(){return[c]})),_:1},8,["onClick"])]),(0,i.wy)((0,i.Wm)(v,{stripe:"",data:g.tableData},{default:(0,i.w5)((function(){return[(0,i.Wm)(w,{fixed:"left",prop:"id",label:"id",width:"100"}),(0,i.Wm)(w,{prop:"img",width:"100",label:"图片"},{default:(0,i.w5)((function(e){return[(0,i.Wm)(k,{src:e.row.img,"preview-src-list":g.imgSrcList,style:{"max-width":"200px"}},null,8,["src","preview-src-list"])]})),_:1}),(0,i.Wm)(w,{"show-overflow-tooltip":!0,prop:"title",label:"标题",width:"150"}),(0,i.Wm)(w,{prop:"spu_id",label:"spu_id",width:"100"}),(0,i.Wm)(w,{"show-overflow-tooltip":!0,prop:"rate_price",label:"折扣",width:"100"}),(0,i.Wm)(w,{"show-overflow-tooltip":!0,prop:"price",label:"价格（元）",width:"150"}),(0,i.Wm)(w,{prop:"online",label:"是否上架",width:"150"},{default:(0,i.w5)((function(t){return[(0,i.Uk)((0,a.zw)(t.row.online|e.onLine),1)]})),_:1}),(0,i.Wm)(w,{"show-overflow-tooltip":!0,prop:"code",label:"编码",width:"200"}),(0,i.Wm)(w,{prop:"stock",label:"库存（个）",width:"150"}),(0,i.Wm)(w,{width:"150",fixed:"right",label:"操作"},{default:(0,i.w5)((function(e){return[(0,i.Wm)(f,{onClick:(0,r.iM)((function(t){return m.handleEdit(e.row)}),["prevent"]),type:"primary",plain:"",size:"mini"},{default:(0,i.w5)((function(){return[d]})),_:2},1032,["onClick"]),(0,i.wy)((0,i.Wm)(f,{onClick:(0,r.iM)((function(t){return m.handleDelete(e.row)}),["prevent"]),type:"danger",size:"mini",plain:""},{default:(0,i.w5)((function(){return[p]})),_:2},1032,["onClick"]),[[S,{permission:["删除SKU"],type:"disabled"}]])]})),_:1})]})),_:1},8,["data"]),[[_,e.loading]]),(0,i._)("div",h,[g.refreshPagination?((0,i.wg)(),(0,i.j4)(C,{key:0,onCurrentChange:m.handleCurrentChange,background:!0,"page-size":g.pageCount,"current-page":g.currentPage,layout:"prev, pager, next, jumper",total:g.totalNums},null,8,["onCurrentChange","page-size","current-page","total"])):(0,i.kq)("",!0)])]))])}var m=n(48534),f=(n(41539),n(54747),n(35666),n(87551)),w=n(5781),k={components:{SkuEdit:w["default"]},data:function(){return{skuId:null,isCreate:!1,imgSrcList:[],tableData:[],showEdit:!1,totalNums:0,currentPage:1,pageCount:10,refreshPagination:!0}},created:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.getSkus(),e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()},methods:{getSkus:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark((function t(){var n,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.currentPage-1,i=e.pageCount,t.next=4,f["default"].getSkus(n,i);case 4:r=t.sent,e.tableData=r.items,e.totalNums=r.total,e.initImgSrcList();case 8:case"end":return t.stop()}}),t)})))()},initImgSrcList:function(){var e=this;this.tableData.forEach((function(t){t.img&&e.imgSrcList.push(t.img)}))},handleCurrentChange:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.imgSrcList=[],t.currentPage=e,t.loading=!0,t.getSkus(),t.loading=!1;case 5:case"end":return n.stop()}}),n)})))()},handleEdit:function(e){this.isCreate=!1,this.skuId="".concat(e.id),this.showEdit=!0},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((0,m.Z)(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,f["default"].deleteSku(e.id);case 2:i=n.sent,i.code<window.MAX_SUCCESS_CODE&&(t.getSkus(),t.$message({type:"success",message:"".concat(i.message)}));case 4:case"end":return n.stop()}}),n)}))))},addSku:function(){this.isCreate=!0,this.skuId=null,this.showEdit=!0},editClose:function(){this.showEdit=!1,this.getSkus()}},filters:{onLine:function(e){return 1===e?"是":"否"}}},v=n(83744);const C=(0,v.Z)(k,[["render",g],["__scopeId","data-v-bbf21e7c"]]);var b=C}}]);
//# sourceMappingURL=9307.cfa8e9fe.js.map