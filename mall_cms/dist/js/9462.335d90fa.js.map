{"version":3,"file":"js/9462.335d90fa.js","mappings":"mRACOA,MAAM,a,uBACT,OAA+B,OAA1BA,MAAM,SAAQ,UAAM,M,GAGhBA,MAAM,W,WAsBiD,O,8OA1BlE,QAiCM,MAjCN,EAiCM,CAhCJ,GACA,QA8BS,Q,kBA7BP,iBA4BS,EA5BT,QA4BS,GA5BAC,GAAI,GAAKC,GAAI,GAAKC,GAAI,GAAKC,GAAI,IAAxC,C,kBACE,iBA0BM,EA1BN,OA0BM,MA1BN,EA0BM,WAzBJ,QAwBU,GAvBRC,IAAI,OACJ,iBACCC,MAAO,EAAAA,MACPC,MAAO,EAAAC,MACR,iBAAe,QACf,cAAY,QAEX,SAAM,sBAAP,cAAe,eARjB,C,kBAUE,iBAEe,EAFf,QAEe,GAFDC,MAAM,OAAOC,KAAK,QAAhC,C,kBACE,iBAAoD,EAApD,QAAoD,GAA1CC,UAAA,G,WAAmB,EAAAH,MAAMI,K,qDAAN,EAAAJ,MAAMI,KAAI,KAAvC,2B,OAEF,QAEe,GAFDH,MAAM,OAAOC,KAAK,QAAhC,C,kBACE,iBAAoD,EAApD,QAAoD,GAA1CC,UAAA,G,WAAmB,EAAAH,MAAMK,K,qDAAN,EAAAL,MAAMK,KAAI,KAAvC,2B,OAEF,QAGe,Q,kBAFb,iBACoB,EADpB,QACoB,GADDC,MAAM,OAAOT,IAAI,mBAAoB,oBAAmB,EAAAU,mBAA3E,oC,OAGF,QAGe,GAHDf,MAAM,UAAQ,C,kBAC1B,iBAAqE,EAArE,QAAqE,GAA1DgB,KAAK,UAAW,QAAK,+BAAE,EAAAC,WAAU,WAA5C,C,kBAAsD,iBAAG,O,yBArB7D,yBAOa,EAAAC,iB,8HA+BvB,GACEC,WAAY,CACVC,iBAAA,cAEFC,MAJa,WAQX,MAAkBC,IAAVhB,EAAR,EAAQA,MAGFiB,GAAO,QAAI,MACXC,GAAmB,QAAI,MAEvBN,GAAU,SAAI,GACdO,GAAS,UACTC,GAAc,QAAI,IAClBC,GAAiB,QAAI,IACrBnB,GAAQ,QAAS,CAAEI,KAAM,GAAIC,KAAM,KAKnCe,EAAY,WAChBL,EAAKM,MAAMC,cACXN,EAAiBK,MAAME,uBAOnBd,EAAS,kDAAI,8FACjBM,EAAKM,MAAMG,SAAX,kDAAoB,WAAMC,GAAN,6FACdA,EADc,wBAEZC,EAAM,GACJC,EAAmBT,EAAYG,MAAMO,QAAO,SAAAC,GAAA,OAAKC,OAAOC,KAAKZ,EAAeE,OAAOW,QAAQH,GAAK,KAHtF,SAKdnB,EAAQW,OAAQ,EALF,SAMF,4BAA0BrB,EAAMI,KAAMJ,EAAMK,KAAMsB,GANhD,OAMdD,EANc,4DAQdhB,EAAQW,OAAQ,EAChBY,QAAQC,MAAR,MATc,QAWZR,EAAIS,KAAOC,OAAOC,kBACpB3B,EAAQW,OAAQ,EAChB,uBAAqBK,EAAIY,UACzBrB,EAAOsB,KAAK,qBACZnB,KAEAV,EAAQW,OAAQ,EAjBF,wBAoBhB,WAAgB,YApBA,0DAApB,uDADiB,2CAAJ,qDA6BTd,EAAoB,SAAAiC,GACxBtB,EAAYG,MAAQmB,GAGtB,MAAO,CACLzB,KAAAA,EACAjB,MAAAA,EACAE,MAAAA,EACAU,QAAAA,EACAU,UAAAA,EACAX,WAAAA,EACAO,iBAAAA,EACAT,kBAAAA,KAKN,SAASO,IACP,IAAM2B,EAAY,SAACC,EAAMrB,EAAOsB,GAC9B,IAAKtB,EACH,OAAOsB,EAAS,IAAIC,MAAM,aAE5BD,KAEI7C,EAAQ,CAAEO,KAAM,GAAID,KAAM,CAAC,CAAEyC,UAAWJ,EAAWK,QAAS,CAAC,OAAQ,UAAWC,UAAU,KAChG,MAAO,CAAEjD,MAAAA,G,eC3HX,MAAMkD,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF","sources":["webpack://lin-cms-vue/./src/view/admin/group/group-create.vue","webpack://lin-cms-vue/./src/view/admin/group/group-create.vue?a532"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"title\">新建分组信息</div>\n    <el-row>\n      <el-col :lg=\"16\" :md=\"20\" :sm=\"24\" :xs=\"24\">\n        <div class=\"content\">\n          <el-form\n            ref=\"form\"\n            status-icon\n            :rules=\"rules\"\n            :model=\"group\"\n            label-position=\"right\"\n            label-width=\"100px\"\n            v-loading=\"loading\"\n            @submit.prevent\n          >\n            <el-form-item label=\"分组名称\" prop=\"name\">\n              <el-input clearable v-model=\"group.name\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"分组描述\" prop=\"info\">\n              <el-input clearable v-model=\"group.info\"></el-input>\n            </el-form-item>\n            <el-form-item>\n              <group-permissions title=\"分配权限\" ref=\"groupPermissions\" @updatePermissions=\"updatePermissions\">\n              </group-permissions>\n            </el-form-item>\n            <el-form-item class=\"submit\">\n              <el-button type=\"primary\" @click=\"submitForm('form')\">保 存</el-button>\n              <!-- <el-button @click=\"resetForm('form')\">重 置</el-button> -->\n            </el-form-item>\n          </el-form>\n        </div>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport { useRouter } from 'vue-router'\nimport { ref, reactive } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport AdminModel from '@/lin/model/admin'\nimport GroupPermissions from './group-permission'\n\nexport default {\n  components: {\n    GroupPermissions,\n  },\n  setup() {\n    /**\n     * 表单验证规则\n     */\n    const { rules } = getRules()\n\n    // originally data properties\n    const form = ref(null)\n    const groupPermissions = ref(null)\n\n    const loading = ref(false)\n    const router = useRouter()\n    const permissions = ref([])\n    const allPermissions = ref([])\n    const group = reactive({ name: '', info: '' })\n\n    /**\n     * 重置表单\n     */\n    const resetForm = () => {\n      form.value.resetFields()\n      groupPermissions.value.getGroupPermissions()\n    }\n\n    /**\n     * 提交表单\n     * 添加新的分组\n     */\n    const submitForm = async () => {\n      form.value.validate(async valid => {\n        if (valid) {\n          let res = {}\n          const finalPermissions = permissions.value.filter(x => Object.keys(allPermissions.value).indexOf(x) < 0)\n          try {\n            loading.value = true\n            res = await AdminModel.createOneGroup(group.name, group.info, finalPermissions)\n          } catch (e) {\n            loading.value = false\n            console.error(e)\n          }\n          if (res.code < window.MAX_SUCCESS_CODE) {\n            loading.value = false\n            ElMessage.success(`${res.message}`)\n            router.push('/admin/group/list')\n            resetForm()\n          } else {\n            loading.value = false\n          }\n        } else {\n          ElMessage.error('请将信息填写完整')\n        }\n      })\n    }\n\n    /**\n     * 编辑后的最终权限\n     */\n    const updatePermissions = picked => {\n      permissions.value = picked\n    }\n\n    return {\n      form,\n      rules,\n      group,\n      loading,\n      resetForm,\n      submitForm,\n      groupPermissions,\n      updatePermissions,\n    }\n  },\n}\n\nfunction getRules() {\n  const checkName = (rule, value, callback) => {\n    if (!value) {\n      return callback(new Error('分组名称不能为空'))\n    }\n    callback()\n  }\n  const rules = { info: [], name: [{ validator: checkName, trigger: ['blur', 'change'], required: true }] }\n  return { rules }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  .title {\n    height: 59px;\n    line-height: 59px;\n    color: $parent-title-color;\n    font-size: 16px;\n    font-weight: 500;\n    text-indent: 40px;\n    border-bottom: 1px solid #dae1ec;\n  }\n\n  .content {\n    margin-top: 10px;\n    padding-left: 25px;\n    padding-right: 40px;\n  }\n\n  .submit {\n    float: left;\n  }\n}\n</style>\n","import { render } from \"./group-create.vue?vue&type=template&id=c2bff1cc&scoped=true\"\nimport script from \"./group-create.vue?vue&type=script&lang=js\"\nexport * from \"./group-create.vue?vue&type=script&lang=js\"\n\nimport \"./group-create.vue?vue&type=style&index=0&id=c2bff1cc&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhahn/Documents/Hahn/自考/mall/mall_cms/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c2bff1cc\"]])\n\nexport default __exports__"],"names":["class","lg","md","sm","xs","ref","rules","model","group","label","prop","clearable","name","info","title","updatePermissions","type","submitForm","loading","components","GroupPermissions","setup","getRules","form","groupPermissions","router","permissions","allPermissions","resetForm","value","resetFields","getGroupPermissions","validate","valid","res","finalPermissions","filter","x","Object","keys","indexOf","console","error","code","window","MAX_SUCCESS_CODE","message","push","picked","checkName","rule","callback","Error","validator","trigger","required","__exports__","render"],"sourceRoot":""}