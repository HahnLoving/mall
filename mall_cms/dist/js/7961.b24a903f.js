(self["webpackChunklin_cms_vue"]=self["webpackChunklin_cms_vue"]||[]).push([[7961,7901,8059,6619],{81150:function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},76091:function(e,t,r){var n=r(47293),a=r(81361),i="​᠎";e.exports=function(e){return n((function(){return!!a[e]()||i[e]()!=i||a[e].name!==e}))}},64765:function(e,t,r){"use strict";var n=r(27007),a=r(19670),i=r(84488),s=r(81150),c=r(97651);n("search",1,(function(e,t,r){return[function(t){var r=i(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,r):new RegExp(t)[e](String(r))},function(e){var n=r(t,e,this);if(n.done)return n.value;var i=a(e),u=String(this),o=i.lastIndex;s(o,0)||(i.lastIndex=0);var l=c(i,u);return s(i.lastIndex,o)||(i.lastIndex=o),null===l?-1:l.index}]}))},73210:function(e,t,r){"use strict";var n=r(82109),a=r(53111).trim,i=r(76091);n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return a(this)}})},77901:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var n=r(66252),a={class:"container"};function i(e,t,r,i,s,c){var u=(0,n.up)("el-date-picker");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(u,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.value=e}),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","popper-class":"date-box","default-time":s.defaultTime,shortcuts:s.shortcuts},null,8,["modelValue","default-time","shortcuts"])])}r(21249);var s=r(27484),c=r.n(s),u={data:function(){return{value:"",defaultTime:[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)],shortcuts:[{text:"最近一周",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}()},{text:"最近一个月",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}()},{text:"最近三个月",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-7776e6),[t,e]}()}]}},watch:{value:function(e){this.$emit("dateChange",e?e.map((function(e){return c()(e).format("YYYY-MM-DD HH:mm:ss")})):"")}},methods:{clear:function(){this.value=""}}},o=r(83744);const l=(0,o.Z)(u,[["render",i]]);var d=l},38059:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});r(74916),r(64765);var n=r(66252),a={class:"lin-search"};function i(e,t,r,i,s,c){var u=(0,n.up)("el-input");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(u,{placeholder:r.placeholder,clearable:"",modelValue:s.keyword,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.keyword=e}),class:"input-with-select"},{suffix:(0,n.w5)((function(){return[(0,n._)("i",{class:"el-input__icon el-icon-search",onClick:t[0]||(t[0]=function(){return c.search&&c.search.apply(c,arguments)})})]})),_:1},8,["placeholder","modelValue"])])}var s=r(73016),c={props:{placeholder:{type:String,default:"请输入内容"}},data:function(){return{keyword:""}},created:function(){var e=this;this.$watch("keyword",s["default"].debounce((function(t){e.$emit("query",t)}),1e3))},methods:{clear:function(){this.keyword=""},search:function(){this.$emit("query",this.keyword)}}},u=r(83744);const o=(0,u.Z)(c,[["render",i],["__scopeId","data-v-2c8733c8"]]);var l=o},62941:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P}});var n=r(66252),a=r(58061),i=r(56612),s=function(e){return(0,n.dD)("data-v-716ade01"),e=e(),(0,n.Cn)(),e},c={key:0,class:"container"},u={class:"header"},o=s((function(){return(0,n._)("div",{class:"title"},"订单列表",-1)})),l={class:"header-left"},d={key:0,class:"search"},h={class:"search-tip"},f=(0,n.Uk)(" 搜索“"),p={class:"search-keyword"},w=(0,n.Uk)("”， 找到 "),g={class:"search-num"},m=(0,n.Uk)(" 条订单信息 "),v={class:"tags"},y=(0,n.Uk)("过期"),k=(0,n.Uk)("编辑"),D=(0,n.Uk)("删除"),C={class:"pagination"};function _(e,t,r,s,_,x){var b=(0,n.up)("lin-search"),W=(0,n.up)("lin-date-picker"),R=(0,n.up)("el-table-column"),T=(0,n.up)("el-tag"),I=(0,n.up)("el-button"),U=(0,n.up)("el-table"),K=(0,n.up)("el-pagination"),P=(0,n.up)("order-detail"),E=(0,n.Q2)("permission"),O=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",null,[_.showEdit?((0,n.wg)(),(0,n.j4)(P,{key:1,onEditClose:x.editClose,orderId:_.orderId},null,8,["onEditClose","orderId"])):((0,n.wg)(),(0,n.iD)("div",c,[(0,n._)("div",u,[o,(0,n.wy)((0,n._)("div",l,[(0,n.Wm)(b,{onQuery:x.onQueryChange,ref:"searchKeyword"},null,8,["onQuery"]),(0,n.Wm)(W,{onDateChange:x.handleDateChange,ref:"searchDate",class:"date"},null,8,["onDateChange"])],512),[[E,"搜索订单"]])]),(0,n.Wm)(a.uT,{name:"fade"},{default:(0,n.w5)((function(){return[_.keyword?((0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("p",h,[f,(0,n._)("span",p,(0,i.zw)(_.keyword),1),w,(0,n._)("span",g,(0,i.zw)(_.totalNums),1),m]),(0,n._)("button",{class:"search-back",onClick:t[0]||(t[0]=function(){return x.backInit&&x.backInit.apply(x,arguments)})},"返回全部订单")])):(0,n.kq)("",!0)]})),_:1}),(0,n.wy)((0,n.Wm)(U,{stripe:"",data:_.tableData},{default:(0,n.w5)((function(){return[(0,n.Wm)(R,{prop:"id",label:"id",width:"100"}),(0,n.Wm)(R,{"show-overflow-tooltip":!0,prop:"order_no",label:"订单号",width:"150"}),(0,n.Wm)(R,{"show-overflow-tooltip":!0,prop:"user_id",label:"用户id",width:"150"}),(0,n.Wm)(R,{prop:"total_count",label:"单品数量",width:"150"}),(0,n.Wm)(R,{prop:"total_price",width:"200",label:"总价格"}),(0,n.Wm)(R,{prop:"status","min-width":"100",label:"状态"},{default:(0,n.w5)((function(t){return[(0,n._)("div",v,[(0,n.Wm)(T,{type:x.computeTagType(t.row.status)},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(t.row.status|e.orderStatus),1)]})),_:2},1032,["type"]),t.row.expired&&1===t.row.status?((0,n.wg)(),(0,n.j4)(T,{key:0,style:{"margin-left":"5px"},type:"danger",size:"mini"},{default:(0,n.w5)((function(){return[y]})),_:1})):(0,n.kq)("",!0)])]})),_:1}),(0,n.Wm)(R,{fixed:"right",width:"150",label:"操作"},{default:(0,n.w5)((function(e){return[(0,n.Wm)(I,{onClick:(0,a.iM)((function(t){return x.handleEdit(e.row)}),["prevent"]),type:"primary",plain:"",size:"mini"},{default:(0,n.w5)((function(){return[k]})),_:2},1032,["onClick"]),(0,n.Wm)(I,{disabled:"",onClick:(0,a.iM)((function(t){return x.handleDelete(e.row)}),["prevent"]),type:"danger",size:"mini",plain:""},{default:(0,n.w5)((function(){return[D]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),[[O,_.loading]]),(0,n._)("div",C,[_.refreshPagination?((0,n.wg)(),(0,n.j4)(K,{key:0,onCurrentChange:x.handleCurrentChange,background:!0,"page-size":_.pageCount,"current-page":_.currentPage,layout:"prev, pager, next, jumper",total:_.totalNums},null,8,["onCurrentChange","page-size","current-page","total"])):(0,n.kq)("",!0)])]))])}var x=r(48534),b=(r(92222),r(74916),r(64765),r(73210),r(35666),r(38059)),W=r(77901),R=r(57891),T=r(89903),I={components:{OrderDetail:T["default"],LinSearch:b["default"],LinDatePicker:W["default"]},data:function(){return{orderId:null,showEdit:!1,tableData:[],loading:!1,keyword:null,searchDate:[],searchKeyword:"",totalNums:0,currentPage:1,pageCount:10,refreshPagination:!0}},created:function(){var e=this;return(0,x.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.getOrders(),e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()},watch:{searchKeyword:function(e){e?(this.keyword=e,this.searchUser&&(this.keyword="".concat(e)),this.searchDate.length&&(this.keyword="".concat(e," ").concat(this.searchDate))):(this.keyword="",this.searchDate.length&&(this.keyword="".concat(this.searchDate)),this.$refs.searchKeyword.clear()),this.searchPage()},searchDate:function(e){e&&e.length?(this.keyword="".concat(e[0],"至").concat(e[1]),this.searchKeyword&&(this.keyword="".concat(this.searchKeyword," ").concat(e[0],"至").concat(e[1]))):(this.keyword="",this.searchUser&&(this.keyword="".concat(this.searchUser)),this.searchKeyword&&(this.keyword="".concat(this.searchUser," ").concat(this.searchKeyword)),this.$refs.searchDate.clear()),this.searchPage()}},methods:{getOrders:function(){var e=this;return(0,x.Z)(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.currentPage-1,n=e.pageCount,t.next=4,R["default"].getOrders(r,n);case 4:a=t.sent,e.tableData=a.items,e.totalNums=a.total;case 7:case"end":return t.stop()}}),t)})))()},searchPage:function(){var e=this;return(0,x.Z)(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.currentPage-1,n=e.pageCount,t.next=4,R["default"].search({keyword:e.searchKeyword,page:r,count:n,start:e.searchDate[0],end:e.searchDate[1]});case 4:a=t.sent,e.tableData=a.items,e.totalNums=a.total;case 7:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){var t=this;return(0,x.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.currentPage=e,t.loading=!0,t.searchKeyword.length||t.searchDate.length?t.searchPage():t.getOrders(),t.loading=!1;case 4:case"end":return r.stop()}}),r)})))()},handleEdit:function(e){this.orderId="".concat(e.id),this.showEdit=!0},handleDateChange:function(e){this.searchDate=e},editClose:function(){this.showEdit=!1,this.getOrders()},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((0,x.Z)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,R["default"].deleteOrder(e.id);case 2:n=r.sent,n.code<window.MAX_SUCCESS_CODE&&(t.getOrders(),t.$message({type:"success",message:"".concat(n.message)}));case 4:case"end":return r.stop()}}),r)}))))},backInit:function(){var e=this;return(0,x.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.searchKeyword="",e.keyword="",e.searchDate=[],e.tableData=[],e.loading=!0,t.next=7,e.getOrders();case 7:e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},computeTagType:function(e){switch(e){case 0:return"";case 1:return"info";case 2:return"success";case 3:return"success";case 4:return"success";case 5:return"warning";default:return""}},onQueryChange:function(e){var t=this;return(0,x.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.searchKeyword=e.trim();case 1:case"end":return r.stop()}}),r)})))()}},filters:{orderStatus:function(e){switch(e){case 0:return"全部";case 1:return"待支付";case 2:return"已支付";case 3:return"已发货";case 4:return"已完成";case 5:return"已取消";default:return"全部"}}}},U=r(83744);const K=(0,U.Z)(I,[["render",_],["__scopeId","data-v-716ade01"]]);var P=K}}]);
//# sourceMappingURL=7961.b24a903f.js.map