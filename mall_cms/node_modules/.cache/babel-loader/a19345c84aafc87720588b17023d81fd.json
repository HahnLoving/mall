{"ast":null,"code":"import \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, resolveDirective as _resolveDirective, withDirectives as _withDirectives, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-7e3528b0\"), n = n(), _popScopeId(), n;\n};\n\nvar _hoisted_1 = {\n  class: \"container\"\n};\nvar _hoisted_2 = {\n  class: \"title\"\n};\n\nvar _hoisted_3 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"i\", {\n    class: \"iconfont icon-fanhui\"\n  }, null, -1\n  /* HOISTED */\n  );\n});\n\nvar _hoisted_4 = /*#__PURE__*/_createTextVNode(\" 返回 \");\n\nvar _hoisted_5 = [_hoisted_3, _hoisted_4];\nvar _hoisted_6 = {\n  class: \"wrap\"\n};\n\nvar _hoisted_7 = /*#__PURE__*/_createTextVNode(\"保 存\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_el_input = _resolveComponent(\"el-input\");\n\n  var _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  var _component_el_input_number = _resolveComponent(\"el-input-number\");\n\n  var _component_el_option = _resolveComponent(\"el-option\");\n\n  var _component_el_select = _resolveComponent(\"el-select\");\n\n  var _component_el_date_picker = _resolveComponent(\"el-date-picker\");\n\n  var _component_el_button = _resolveComponent(\"el-button\");\n\n  var _component_el_form = _resolveComponent(\"el-form\");\n\n  var _component_el_col = _resolveComponent(\"el-col\");\n\n  var _component_el_row = _resolveComponent(\"el-row\");\n\n  var _directive_permission = _resolveDirective(\"permission\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"span\", null, _toDisplayString($props.isCreate ? '创建优惠卷' : '更新优惠卷'), 1\n  /* TEXT */\n  ), _createElementVNode(\"span\", {\n    class: \"back\",\n    onClick: _cache[0] || (_cache[0] = function () {\n      return $options.back && $options.back.apply($options, arguments);\n    })\n  }, _hoisted_5)]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_row, null, {\n    default: _withCtx(function () {\n      return [_createVNode(_component_el_col, {\n        lg: 16,\n        md: 20,\n        sm: 24,\n        xs: 24\n      }, {\n        default: _withCtx(function () {\n          return [_createVNode(_component_el_form, {\n            model: $data.form,\n            \"status-icon\": \"\",\n            ref: \"form\",\n            \"label-width\": \"100px\",\n            onSubmit: _cache[9] || (_cache[9] = _withModifiers(function () {}, [\"prevent\"]))\n          }, {\n            default: _withCtx(function () {\n              return [_createVNode(_component_el_form_item, {\n                label: \"标题\",\n                prop: \"title\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input, {\n                    size: \"medium\",\n                    modelValue: $data.form.title,\n                    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n                      return $data.form.title = $event;\n                    }),\n                    placeholder: \"请填写优惠卷标题\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"满减额\",\n                prop: \"full_money\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input_number, {\n                    modelValue: $data.form.full_money,\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n                      return $data.form.full_money = $event;\n                    }),\n                    precision: 2,\n                    step: 1\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"优惠额\",\n                prop: \"minus\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input_number, {\n                    modelValue: $data.form.minus,\n                    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n                      return $data.form.minus = $event;\n                    }),\n                    precision: 2,\n                    step: 1\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"折扣\",\n                prop: \"discount\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input_number, {\n                    modelValue: $data.form.discount,\n                    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = function ($event) {\n                      return $data.form.discount = $event;\n                    }),\n                    precision: 2,\n                    step: 0.1,\n                    max: 1\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\", \"step\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"类型\",\n                prop: \"type\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createCommentVNode(\" <el-input size=\\\"medium\\\" v-model=\\\"form.type\\\" placeholder=\\\"请填写优惠卷类型\\\"></el-input> \"), _createVNode(_component_el_select, {\n                    modelValue: $data.form.type,\n                    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = function ($event) {\n                      return $data.form.type = $event;\n                    }),\n                    placeholder: \"请填写类型\"\n                  }, {\n                    default: _withCtx(function () {\n                      return [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.types, function (item, index) {\n                        return _openBlock(), _createBlock(_component_el_option, {\n                          key: item,\n                          label: item,\n                          value: index + 1\n                        }, null, 8\n                        /* PROPS */\n                        , [\"label\", \"value\"]);\n                      }), 128\n                      /* KEYED_FRAGMENT */\n                      ))];\n                    }),\n                    _: 1\n                    /* STABLE */\n\n                  }, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"时间\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_date_picker, {\n                    modelValue: $data.range,\n                    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = function ($event) {\n                      return $data.range = $event;\n                    }),\n                    type: \"daterange\",\n                    align: \"right\",\n                    \"unlink-panels\": \"\",\n                    \"range-separator\": \"至\",\n                    \"start-placeholder\": \"开始日期\",\n                    \"end-placeholder\": \"结束日期\",\n                    \"picker-options\": $data.pickerOptions\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\", \"picker-options\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"描述\",\n                prop: \"description\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input, {\n                    size: \"medium\",\n                    modelValue: $data.form.description,\n                    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = function ($event) {\n                      return $data.form.description = $event;\n                    }),\n                    placeholder: \"请填写优惠卷描述\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                class: \"submit\"\n              }, {\n                default: _withCtx(function () {\n                  return [_withDirectives(_createVNode(_component_el_button, {\n                    type: \"primary\",\n                    onClick: _cache[8] || (_cache[8] = function ($event) {\n                      return $options.submitForm('form');\n                    })\n                  }, {\n                    default: _withCtx(function () {\n                      return [_hoisted_7];\n                    }),\n                    _: 1\n                    /* STABLE */\n\n                  }, 512\n                  /* NEED_PATCH */\n                  ), [[_directive_permission, {\n                    permission: ['创建优惠卷', '更新优惠卷'],\n                    type: 'disabled'\n                  }]]), _createCommentVNode(\" <el-button @click=\\\"resetForm('form')\\\">重 置</el-button> \")];\n                }),\n                _: 1\n                /* STABLE */\n\n              })];\n            }),\n            _: 1\n            /* STABLE */\n\n          }, 8\n          /* PROPS */\n          , [\"model\"])];\n        }),\n        _: 1\n        /* STABLE */\n\n      })];\n    }),\n    _: 1\n    /* STABLE */\n\n  })])]);\n}","map":{"version":3,"sources":["/Users/zhahn/Documents/Hahn/自考/项目/mall_cms/src/view/coupon/CouponEdit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"title\">\n      <span>{{ isCreate ? '创建优惠卷' : '更新优惠卷' }}</span>\n      <span class=\"back\" @click=\"back\"> <i class=\"iconfont icon-fanhui\"></i> 返回 </span>\n    </div>\n    <div class=\"wrap\">\n      <el-row>\n        <el-col :lg=\"16\" :md=\"20\" :sm=\"24\" :xs=\"24\">\n          <el-form :model=\"form\" status-icon ref=\"form\" label-width=\"100px\" @submit.native.prevent>\n            <el-form-item label=\"标题\" prop=\"title\">\n              <el-input size=\"medium\" v-model=\"form.title\" placeholder=\"请填写优惠卷标题\"></el-input>\n            </el-form-item>\n\n            <el-form-item label=\"满减额\" prop=\"full_money\">\n              <el-input-number v-model=\"form.full_money\" :precision=\"2\" :step=\"1\"></el-input-number>\n            </el-form-item>\n\n            <el-form-item label=\"优惠额\" prop=\"minus\">\n              <el-input-number v-model=\"form.minus\" :precision=\"2\" :step=\"1\"></el-input-number>\n            </el-form-item>\n\n            <el-form-item label=\"折扣\" prop=\"discount\">\n              <el-input-number v-model=\"form.discount\" :precision=\"2\" :step=\"0.1\" :max=\"1\"></el-input-number>\n            </el-form-item>\n\n            <el-form-item label=\"类型\" prop=\"type\">\n              <!-- <el-input size=\"medium\" v-model=\"form.type\" placeholder=\"请填写优惠卷类型\"></el-input> -->\n              <el-select v-model=\"form.type\" placeholder=\"请填写类型\">\n                <el-option v-for=\"(item, index) in types\" :key=\"item\" :label=\"item\" :value=\"index + 1\"></el-option>\n              </el-select>\n            </el-form-item>\n\n            <el-form-item label=\"时间\">\n              <el-date-picker\n                v-model=\"range\"\n                type=\"daterange\"\n                align=\"right\"\n                unlink-panels\n                range-separator=\"至\"\n                start-placeholder=\"开始日期\"\n                end-placeholder=\"结束日期\"\n                :picker-options=\"pickerOptions\"\n              ></el-date-picker>\n            </el-form-item>\n\n            <el-form-item label=\"描述\" prop=\"description\">\n              <el-input size=\"medium\" v-model=\"form.description\" placeholder=\"请填写优惠卷描述\"></el-input>\n            </el-form-item>\n\n            <el-form-item class=\"submit\">\n              <el-button\n                v-permission=\"{ permission: ['创建优惠卷', '更新优惠卷'], type: 'disabled' }\"\n                type=\"primary\"\n                @click=\"submitForm('form')\"\n                >保 存</el-button\n              >\n              <!-- <el-button @click=\"resetForm('form')\">重 置</el-button> -->\n            </el-form-item>\n          </el-form>\n        </el-col>\n      </el-row>\n    </div>\n  </div>\n</template>\n\n<script>\nimport dayjs from 'dayjs'\nimport Coupon from '@/model/coupon'\n\nexport default {\n  props: {\n    isCreate: {\n      type: Boolean,\n      default: false,\n    },\n    couponId: {\n      type: String,\n      default: null,\n    },\n    activityId: {\n      type: String,\n      default: null,\n    },\n    templateData: {\n      type: Object,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      form: {\n        name: '',\n        title: '',\n        full_money: null,\n        minus: null,\n        discount: null,\n        type: null,\n        activity_id: null,\n      },\n      types: [],\n      range: '',\n      pickerOptions: {\n        shortcuts: [\n          {\n            text: '最近一周',\n            onClick(picker) {\n              const end = new Date()\n              const start = new Date()\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 7)\n              picker.$emit('pick', [start, end])\n            },\n          },\n          {\n            text: '最近一个月',\n            onClick(picker) {\n              const end = new Date()\n              const start = new Date()\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 30)\n              picker.$emit('pick', [start, end])\n            },\n          },\n          {\n            text: '最近三个月',\n            onClick(picker) {\n              const end = new Date()\n              const start = new Date()\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 90)\n              picker.$emit('pick', [start, end])\n            },\n          },\n        ],\n      },\n    }\n  },\n  async mounted() {\n    this.types = Coupon.types\n    if (!this.isCreate) {\n      const res = await Coupon.getCoupon(this.couponId)\n      this.form = res\n      const end = new Date(res.end_time)\n      const start = new Date(res.start_time)\n      this.range = [start, end]\n    } else {\n      this.form = this.templateData\n    }\n  },\n  methods: {\n    async submitForm(formName) {\n      this.form.activity_id = this.activityId\n      try {\n        const postData = { ...this.form }\n        if (postData.discount === 0) {\n          postData.discount = null\n        }\n        if (postData.minus === 0) {\n          postData.minus = null\n        }\n        if (postData.full_money === 0) {\n          postData.full_money = null\n        }\n        postData.start_time = this.dateFormat(this.range[0])\n        postData.end_time = this.dateFormat(this.range[1])\n        let res\n        if (this.isCreate) {\n          res = await Coupon.addCoupon(postData)\n        } else {\n          res = await Coupon.editCoupon(\n            this.couponId,\n            // eslint-disable-next-line\n            postData,\n          )\n        }\n        if (res.code < window.MAX_SUCCESS_CODE) {\n          this.$message.success(`${res.message}`)\n          this.resetForm(formName)\n          this.$confirm('是否返回上一页?', '提示', {\n            confirmButtonText: '是',\n            cancelButtonText: '否',\n            type: 'info',\n          }).then(async () => {\n            this.$emit('editClose')\n          })\n        }\n      } catch (error) {\n        console.error(error)\n      }\n    },\n    // 重置表单\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    },\n    back() {\n      this.$emit('editClose')\n    },\n    dateFormat(val) {\n      return dayjs(val).format('YYYY-MM-DD HH:mm:ss')\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.el-divider--horizontal {\n  margin: 0;\n}\n\n.container {\n  .title {\n    height: 59px;\n    line-height: 59px;\n    color: $parent-title-color;\n    font-size: 16px;\n    font-weight: 500;\n    text-indent: 40px;\n\n    .back {\n      float: right;\n      margin-right: 40px;\n      cursor: pointer;\n    }\n  }\n\n  .wrap {\n    padding: 20px;\n  }\n\n  .submit {\n    float: left;\n  }\n}\n\n.my-autocomplete {\n  li {\n    line-height: normal;\n    padding: 7px;\n    display: inline-flex;\n    align-content: space-around;\n    .name {\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n    .id {\n      margin-right: 15px;\n      font-size: 12px;\n      color: #b4b4b4;\n    }\n\n    .highlighted .addr {\n      color: #ddd;\n    }\n  }\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}