{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, resolveDirective as _resolveDirective, withDirectives as _withDirectives, withModifiers as _withModifiers, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-23f10e96\"), n = n(), _popScopeId(), n;\n};\n\nvar _hoisted_1 = {\n  class: \"title\"\n};\n\nvar _hoisted_2 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"i\", {\n    class: \"iconfont icon-fanhui\"\n  }, null, -1\n  /* HOISTED */\n  );\n});\n\nvar _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 返回 \");\n\nvar _hoisted_4 = [_hoisted_2, _hoisted_3];\nvar _hoisted_5 = {\n  class: \"container\"\n};\nvar _hoisted_6 = {\n  class: \"wrap\"\n};\n\nvar _hoisted_7 = /*#__PURE__*/_createTextVNode(\"保 存\");\n\nvar _hoisted_8 = /*#__PURE__*/_createTextVNode(\"重 置\");\n\nvar _hoisted_9 = {\n  key: 0,\n  class: \"title plus\"\n};\n\nvar _hoisted_10 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"span\", null, \"主题下的SPU\", -1\n  /* HOISTED */\n  );\n});\n\nvar _hoisted_11 = [_hoisted_10];\nvar _hoisted_12 = {\n  key: 1,\n  class: \"wrap\"\n};\nvar _hoisted_13 = [\"src\", \"alt\"];\n\nvar _hoisted_14 = /*#__PURE__*/_createTextVNode(\"删除\");\n\nvar _hoisted_15 = {\n  class: \"complete\"\n};\nvar _hoisted_16 = {\n  class: \"id\"\n};\nvar _hoisted_17 = {\n  class: \"name\"\n};\n\nvar _hoisted_18 = /*#__PURE__*/_createTextVNode(\"添加\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_el_divider = _resolveComponent(\"el-divider\");\n\n  var _component_sticky_top = _resolveComponent(\"sticky-top\");\n\n  var _component_el_input = _resolveComponent(\"el-input\");\n\n  var _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  var _component_el_option = _resolveComponent(\"el-option\");\n\n  var _component_el_select = _resolveComponent(\"el-select\");\n\n  var _component_el_switch = _resolveComponent(\"el-switch\");\n\n  var _component_upload_imgs = _resolveComponent(\"upload-imgs\");\n\n  var _component_el_button = _resolveComponent(\"el-button\");\n\n  var _component_el_form = _resolveComponent(\"el-form\");\n\n  var _component_el_col = _resolveComponent(\"el-col\");\n\n  var _component_el_row = _resolveComponent(\"el-row\");\n\n  var _component_el_table_column = _resolveComponent(\"el-table-column\");\n\n  var _component_el_table = _resolveComponent(\"el-table\");\n\n  var _component_el_autocomplete = _resolveComponent(\"el-autocomplete\");\n\n  var _directive_permission = _resolveDirective(\"permission\");\n\n  var _directive_loading = _resolveDirective(\"loading\");\n\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_sticky_top, null, {\n    default: _withCtx(function () {\n      return [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"span\", null, _toDisplayString($props.isCreate ? '创建主题' : '更新主题'), 1\n      /* TEXT */\n      ), _createElementVNode(\"span\", {\n        class: \"back\",\n        onClick: _cache[0] || (_cache[0] = function () {\n          return $options.back && $options.back.apply($options, arguments);\n        })\n      }, _hoisted_4), _createVNode(_component_el_divider)])];\n    }),\n    _: 1\n    /* STABLE */\n\n  }), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_row, null, {\n    default: _withCtx(function () {\n      return [_createVNode(_component_el_col, {\n        lg: 16,\n        md: 20,\n        sm: 24,\n        xs: 24\n      }, {\n        default: _withCtx(function () {\n          return [_createVNode(_component_el_form, {\n            model: $data.form,\n            \"status-icon\": \"\",\n            ref: \"form\",\n            \"label-width\": \"100px\",\n            onSubmit: _cache[8] || (_cache[8] = _withModifiers(function () {}, [\"prevent\"]))\n          }, {\n            default: _withCtx(function () {\n              return [_createVNode(_component_el_form_item, {\n                label: \"标题\",\n                prop: \"title\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input, {\n                    size: \"medium\",\n                    modelValue: $data.form.title,\n                    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n                      return $data.form.title = $event;\n                    }),\n                    placeholder: \"请填写标题\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"名称\",\n                prop: \"title\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input, {\n                    size: \"medium\",\n                    modelValue: $data.form.name,\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n                      return $data.form.name = $event;\n                    }),\n                    placeholder: \"请填写名称\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"主题描述\",\n                prop: \"description\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input, {\n                    size: \"medium\",\n                    modelValue: $data.form.description,\n                    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n                      return $data.form.description = $event;\n                    }),\n                    placeholder: \"请填写主题描述\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"模板名\",\n                prop: \"tpl_name\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_select, {\n                    modelValue: $data.form.tpl_name,\n                    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = function ($event) {\n                      return $data.form.tpl_name = $event;\n                    }),\n                    placeholder: \"请选择模板名\"\n                  }, {\n                    default: _withCtx(function () {\n                      return [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.tpl_options, function (item) {\n                        return _openBlock(), _createBlock(_component_el_option, {\n                          key: item,\n                          label: item,\n                          value: item\n                        }, null, 8\n                        /* PROPS */\n                        , [\"label\", \"value\"]);\n                      }), 128\n                      /* KEYED_FRAGMENT */\n                      ))];\n                    }),\n                    _: 1\n                    /* STABLE */\n\n                  }, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"是否上线\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_switch, {\n                    size: \"medium\",\n                    modelValue: $data.onlined,\n                    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = function ($event) {\n                      return $data.onlined = $event;\n                    }),\n                    \"active-color\": \"#13ce66\",\n                    \"inactive-color\": \"#ff4949\",\n                    \"active-text\": \"上线\",\n                    \"inactive-text\": \"下线\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"标题图\",\n                prop: \"title_img\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_upload_imgs, {\n                    rules: $data.rules,\n                    \"max-num\": $data.maxNum,\n                    ref: \"uploadImgEle\",\n                    value: $data.initImgData\n                  }, null, 8\n                  /* PROPS */\n                  , [\"rules\", \"max-num\", \"value\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"入口图\",\n                prop: \"entrance_img\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_upload_imgs, {\n                    rules: $data.rules,\n                    \"max-num\": $data.maxNum,\n                    ref: \"uploadEntranceEle\",\n                    value: $data.initEntranceData\n                  }, null, 8\n                  /* PROPS */\n                  , [\"rules\", \"max-num\", \"value\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"外部图\",\n                prop: \"entrance_img\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_upload_imgs, {\n                    rules: $data.rules,\n                    \"max-num\": $data.maxNum,\n                    ref: \"uploadInternalEle\",\n                    value: $data.initInternalData\n                  }, null, 8\n                  /* PROPS */\n                  , [\"rules\", \"max-num\", \"value\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                class: \"submit\"\n              }, {\n                default: _withCtx(function () {\n                  return [_withDirectives(_createVNode(_component_el_button, {\n                    type: \"primary\",\n                    onClick: _cache[6] || (_cache[6] = function ($event) {\n                      return $options.submitForm('form');\n                    })\n                  }, {\n                    default: _withCtx(function () {\n                      return [_hoisted_7];\n                    }),\n                    _: 1\n                    /* STABLE */\n\n                  }, 512\n                  /* NEED_PATCH */\n                  ), [[_directive_permission, {\n                    permission: ['创建主题', '更新主题'],\n                    type: 'disabled'\n                  }]]), _createVNode(_component_el_button, {\n                    onClick: _cache[7] || (_cache[7] = function ($event) {\n                      return $options.resetForm('form');\n                    })\n                  }, {\n                    default: _withCtx(function () {\n                      return [_hoisted_8];\n                    }),\n                    _: 1\n                    /* STABLE */\n\n                  })];\n                }),\n                _: 1\n                /* STABLE */\n\n              })];\n            }),\n            _: 1\n            /* STABLE */\n\n          }, 8\n          /* PROPS */\n          , [\"model\"])];\n        }),\n        _: 1\n        /* STABLE */\n\n      })];\n    }),\n    _: 1\n    /* STABLE */\n\n  })]), !$props.isCreate ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _hoisted_11)) : _createCommentVNode(\"v-if\", true), !$props.isCreate ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createVNode(_component_el_row, null, {\n    default: _withCtx(function () {\n      return [_withDirectives(_createVNode(_component_el_table, {\n        stripe: \"\",\n        data: $data.tableData\n      }, {\n        default: _withCtx(function () {\n          return [_createVNode(_component_el_table_column, {\n            prop: \"id\",\n            fixed: \"left\",\n            label: \"id\",\n            width: \"100\"\n          }), _createVNode(_component_el_table_column, {\n            prop: \"img\",\n            label: \"主图\",\n            width: \"200\"\n          }, {\n            default: _withCtx(function (scope) {\n              return [_createElementVNode(\"img\", {\n                class: \"display_img\",\n                src: scope.row.img,\n                alt: scope.row.img\n              }, null, 8\n              /* PROPS */\n              , _hoisted_13)];\n            }),\n            _: 1\n            /* STABLE */\n\n          }), _createVNode(_component_el_table_column, {\n            prop: \"title\",\n            label: \"标题\",\n            width: \"150\"\n          }), _createVNode(_component_el_table_column, {\n            prop: \"subtitle\",\n            label: \"副标题\",\n            \"min-width\": \"300\"\n          }), _createVNode(_component_el_table_column, {\n            fixed: \"right\",\n            width: \"150\",\n            label: \"操作\"\n          }, {\n            default: _withCtx(function (scope) {\n              return [_withDirectives(_createVNode(_component_el_button, {\n                onClick: _withModifiers(function ($event) {\n                  return $options.handleDelete(scope.row);\n                }, [\"prevent\"]),\n                type: \"danger\",\n                size: \"mini\",\n                plain: \"\"\n              }, {\n                default: _withCtx(function () {\n                  return [_hoisted_14];\n                }),\n                _: 2\n                /* DYNAMIC */\n\n              }, 1032\n              /* PROPS, DYNAMIC_SLOTS */\n              , [\"onClick\"]), [[_directive_permission, {\n                permission: ['删除主题下的spu'],\n                type: 'disabled'\n              }]])];\n            }),\n            _: 1\n            /* STABLE */\n\n          })];\n        }),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"data\"]), [[_directive_loading, $data.loading]]), _createElementVNode(\"div\", _hoisted_15, [_createVNode(_component_el_autocomplete, {\n        onFocus: $options.loadSpuSuggestions,\n        \"popper-class\": \"my-autocomplete\",\n        class: \"inline-input\",\n        modelValue: $data.spuState,\n        \"onUpdate:modelValue\": _cache[9] || (_cache[9] = function ($event) {\n          return $data.spuState = $event;\n        }),\n        \"fetch-suggestions\": $options.querySpuSearch,\n        placeholder: \"添加SPU\",\n        onSelect: $options.handleSpuSelect\n      }, {\n        default: _withCtx(function (scope) {\n          return [_createElementVNode(\"span\", _hoisted_16, _toDisplayString(_ctx.item.id), 1\n          /* TEXT */\n          ), _createElementVNode(\"span\", _hoisted_17, _toDisplayString(_ctx.item.title), 1\n          /* TEXT */\n          )];\n        }),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"onFocus\", \"modelValue\", \"fetch-suggestions\", \"onSelect\"]), _withDirectives(_createVNode(_component_el_button, {\n        class: \"add\",\n        onClick: _withModifiers($options.addThemeSpu, [\"prevent\"]),\n        type: \"primary\",\n        plain: \"\",\n        size: \"medium\"\n      }, {\n        default: _withCtx(function () {\n          return [_hoisted_18];\n        }),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"onClick\"]), [[_directive_permission, {\n        permission: ['添加主题下的spu'],\n        type: 'disabled'\n      }]])])];\n    }),\n    _: 1\n    /* STABLE */\n\n  })])) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"sources":["/Users/zhahn/Documents/Hahn/自考/项目/mall_cms/src/view/theme/theme-edit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <sticky-top>\n      <div class=\"title\">\n        <span>{{ isCreate ? '创建主题' : '更新主题' }}</span>\n        <span class=\"back\" @click=\"back\"> <i class=\"iconfont icon-fanhui\"></i> 返回 </span>\n        <el-divider></el-divider>\n      </div>\n    </sticky-top>\n    <div class=\"container\">\n      <div class=\"wrap\">\n        <el-row>\n          <el-col :lg=\"16\" :md=\"20\" :sm=\"24\" :xs=\"24\">\n            <el-form :model=\"form\" status-icon ref=\"form\" label-width=\"100px\" @submit.native.prevent>\n              <el-form-item label=\"标题\" prop=\"title\">\n                <el-input size=\"medium\" v-model=\"form.title\" placeholder=\"请填写标题\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"名称\" prop=\"title\">\n                <el-input size=\"medium\" v-model=\"form.name\" placeholder=\"请填写名称\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"主题描述\" prop=\"description\">\n                <el-input size=\"medium\" v-model=\"form.description\" placeholder=\"请填写主题描述\"></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"模板名\" prop=\"tpl_name\">\n                <el-select v-model=\"form.tpl_name\" placeholder=\"请选择模板名\">\n                  <el-option v-for=\"item in tpl_options\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\n                </el-select>\n              </el-form-item>\n\n              <el-form-item label=\"是否上线\">\n                <el-switch\n                  size=\"medium\"\n                  v-model=\"onlined\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#ff4949\"\n                  active-text=\"上线\"\n                  inactive-text=\"下线\"\n                ></el-switch>\n              </el-form-item>\n\n              <el-form-item label=\"标题图\" prop=\"title_img\">\n                <upload-imgs :rules=\"rules\" :max-num=\"maxNum\" ref=\"uploadImgEle\" :value=\"initImgData\" />\n              </el-form-item>\n\n              <el-form-item label=\"入口图\" prop=\"entrance_img\">\n                <upload-imgs :rules=\"rules\" :max-num=\"maxNum\" ref=\"uploadEntranceEle\" :value=\"initEntranceData\" />\n              </el-form-item>\n\n              <el-form-item label=\"外部图\" prop=\"entrance_img\">\n                <upload-imgs :rules=\"rules\" :max-num=\"maxNum\" ref=\"uploadInternalEle\" :value=\"initInternalData\" />\n              </el-form-item>\n\n              <el-form-item class=\"submit\">\n                <el-button\n                  v-permission=\"{ permission: ['创建主题', '更新主题'], type: 'disabled' }\"\n                  type=\"primary\"\n                  @click=\"submitForm('form')\"\n                  >保 存</el-button\n                >\n                <el-button @click=\"resetForm('form')\">重 置</el-button>\n              </el-form-item>\n            </el-form>\n          </el-col>\n        </el-row>\n      </div>\n\n      <div v-if=\"!isCreate\" class=\"title plus\">\n        <span>主题下的SPU</span>\n      </div>\n      <div v-if=\"!isCreate\" class=\"wrap\">\n        <el-row>\n          <el-table stripe v-loading=\"loading\" :data=\"tableData\">\n            <el-table-column prop=\"id\" fixed=\"left\" label=\"id\" width=\"100\"></el-table-column>\n            <el-table-column prop=\"img\" label=\"主图\" width=\"200\">\n              <template #default=\"scope\">\n                <img class=\"display_img\" :src=\"scope.row.img\" :alt=\"scope.row.img\" />\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"title\" label=\"标题\" width=\"150\"></el-table-column>\n            <el-table-column prop=\"subtitle\" label=\"副标题\" min-width=\"300\"></el-table-column>\n            <el-table-column fixed=\"right\" width=\"150\" label=\"操作\">\n              <template #default=\"scope\">\n                <el-button\n                  v-permission=\"{ permission: ['删除主题下的spu'], type: 'disabled' }\"\n                  @click.prevent=\"handleDelete(scope.row)\"\n                  type=\"danger\"\n                  size=\"mini\"\n                  plain\n                  >删除</el-button\n                >\n              </template>\n            </el-table-column>\n          </el-table>\n\n          <div class=\"complete\">\n            <el-autocomplete\n              @focus=\"loadSpuSuggestions\"\n              popper-class=\"my-autocomplete\"\n              class=\"inline-input\"\n              v-model=\"spuState\"\n              :fetch-suggestions=\"querySpuSearch\"\n              placeholder=\"添加SPU\"\n              @select=\"handleSpuSelect\"\n            >\n              <template #default=\"scope\">\n                <span class=\"id\">{{ item.id }}</span>\n                <span class=\"name\">{{ item.title }}</span>\n              </template>\n            </el-autocomplete>\n            <el-button\n              v-permission=\"{ permission: ['添加主题下的spu'], type: 'disabled' }\"\n              class=\"add\"\n              @click.prevent=\"addThemeSpu\"\n              type=\"primary\"\n              plain\n              size=\"medium\"\n              >添加</el-button\n            >\n          </div>\n        </el-row>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport theme from '@/model/theme'\nimport UploadImgs from '@/component/base/upload-image'\n\nexport default {\n  components: {\n    UploadImgs,\n  },\n  props: {\n    isCreate: {\n      type: Boolean,\n      default: false,\n    },\n    themeId: {\n      type: String,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      form: {\n        title: '',\n        name: '',\n        tpl_name: '',\n        description: '',\n        online: 1,\n        title_img: null,\n        entrance_img: null,\n        internal_top_img: null,\n      },\n      rules: {\n        minWidth: 10,\n        minHeight: 10,\n        maxSize: 5,\n      },\n      initImgData: [],\n      initEntranceData: [],\n      initInternalData: [],\n      maxNum: 1,\n      tableData: [],\n      loading: false,\n      spuState: '',\n      spuId: null,\n      spuSuggestions: [],\n      onlined: true,\n      tpl_options: ['diana', 'irelia', 'camille', 'janna', 'spu-list'],\n    }\n  },\n  watch: {\n    onlined(val) {\n      this.form.online = val ? 1 : 0\n    },\n  },\n  async mounted() {\n    if (!this.isCreate) {\n      const res = await theme.getTheme(this.themeId)\n      this.form = res\n      const initImgData = [\n        {\n          id: res.id,\n          display: res.title_img,\n        },\n      ]\n      this.initImgData = initImgData\n      const initEntranceData = [\n        {\n          id: res.id,\n          display: res.entrance_img,\n        },\n      ]\n      this.initEntranceData = initEntranceData\n      const initInternalData = [\n        {\n          id: res.id,\n          display: res.internal_top_img,\n        },\n      ]\n      this.initInternalData = initInternalData\n      await this.getSpus(res.id)\n    }\n  },\n  methods: {\n    // eslint-disable-next-line\n    async submitForm(formName) {\n      await this.getValue()\n      try {\n        const postData = { ...this.form }\n        let res\n        if (this.isCreate) {\n          res = await theme.addTheme(postData)\n        } else {\n          res = await theme.editTheme(this.themeId, postData)\n        }\n        if (res.code < window.MAX_SUCCESS_CODE) {\n          this.$message.success(`${res.message}`)\n          this.$confirm('是否返回上一页', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning',\n          }).then(async () => {\n            this.$emit('editClose')\n          })\n        }\n      } catch (error) {\n        console.error(error)\n      }\n    },\n    async addThemeSpu() {\n      const info = { theme_id: this.form.id, spu_id: this.spuId }\n      try {\n        const res = await theme.addThemeSpu(info)\n        if (res.code < window.MAX_SUCCESS_CODE) {\n          this.$message.success(`${res.message}`)\n          this.getSpus(this.form.id)\n          this.spuId = null\n          this.spuState = ''\n        }\n      } catch (error) {\n        console.error(error)\n      }\n    },\n    async getSpus(id) {\n      const spus = await theme.getSpus(id)\n      this.tableData = spus\n    },\n    async loadSpuSuggestions() {\n      if (this.spuSuggestions.length > 0) {\n        return\n      }\n      try {\n        if (!this.isCreate) {\n          this.spuSuggestions = await theme.getSpuList(this.form.id)\n          if (this.spuSuggestions.length === 0) {\n            this.$message.error('未找到SPU建议，请先添加SPU')\n          }\n        }\n      } catch (error) {\n        this.$message.error('获取SPU建议信息失败')\n        console.error(error)\n      }\n    },\n    querySpuSearch(queryString, cb) {\n      // eslint-disable-next-line\n      const suggestions = this.spuSuggestions\n      const results = queryString ? suggestions.filter(this.createSpuFilter(queryString)) : suggestions\n      cb(results)\n    },\n    createSpuFilter(queryString) {\n      // eslint-disable-next-line\n      return suggestion => {\n        return suggestion.title.toLowerCase().indexOf(queryString.toLowerCase()) === 0\n      }\n    },\n    handleSpuSelect(item) {\n      this.spuState = item.title\n      this.spuId = item.id\n    },\n    async getValue() {\n      const val = await this.$refs.uploadImgEle.getValue()\n      if (val && val.length > 0) {\n        this.form.title_img = val[0].display\n      }\n      const val1 = await this.$refs.uploadEntranceEle.getValue()\n      if (val1 && val1.length > 0) {\n        this.form.entrance_img = val1[0].display\n      }\n      const val2 = await this.$refs.uploadInternalEle.getValue()\n      if (val2 && val2.length > 0) {\n        this.form.internal_top_img = val2[0].display\n      }\n    },\n    async handleDelete(row) {\n      try {\n        const res = await theme.deleteSpu(row.tid)\n        if (res.code < window.MAX_SUCCESS_CODE) {\n          this.$message.success(`${res.message}`)\n          await this.getSpus(this.form.id)\n        }\n      } catch (error) {\n        console.error(error)\n      }\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    },\n    back() {\n      this.$emit('editClose')\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.el-divider--horizontal {\n  margin: 0;\n}\n\n.container {\n  .title {\n    height: 59px;\n    line-height: 59px;\n    color: $parent-title-color;\n    font-size: 16px;\n    font-weight: 500;\n    text-indent: 40px;\n\n    .back {\n      float: right;\n      margin-right: 40px;\n      cursor: pointer;\n    }\n  }\n\n  .wrap {\n    padding: 20px;\n  }\n\n  .submit {\n    float: left;\n  }\n}\n\n.display_img {\n  max-width: 100px;\n  max-height: 50px;\n  width: auto;\n  height: auto;\n}\n\n.plus {\n  display: flex;\n  justify-content: space-between;\n}\n\n.complete {\n  margin-top: 20px;\n  display: flex;\n  .add {\n    margin-left: 10px;\n  }\n}\n\n.my-autocomplete {\n  li {\n    line-height: normal;\n    padding: 7px;\n    display: inline-flex;\n    align-content: space-around;\n    .name {\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n    .id {\n      margin-right: 15px;\n      font-size: 12px;\n      color: #b4b4b4;\n    }\n\n    .highlighted .addr {\n      color: #ddd;\n    }\n  }\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}