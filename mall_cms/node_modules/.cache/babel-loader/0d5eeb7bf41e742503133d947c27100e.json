{"ast":null,"code":"import _asyncToGenerator from \"/Users/zhahn/Desktop/\\u672A\\u547D\\u540D\\u6587\\u4EF6\\u5939/lin-cms-vue/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport { onMounted, ref } from 'vue';\nimport AdminModel from '@/lin/model/admin';\nexport default {\n  props: ['id', 'title'],\n  setup: function setup(props, ctx) {\n    var loading = ref(false);\n    var allPermissions = ref({});\n    var halfPermissions = ref([]); // 该分类下的权限没有全选中\n\n    var permissionModuleIds = ref([]); // 权限组 集合 id\n\n    var permissionModuleNames = ref([]); // 权限组 module name\n\n    var checkedPermissionNames = ref([]);\n    /**\n     * 初始化权限\n     * 通过判断有没有传入id，来判断当前页面是添加分组还是编辑分组\n     */\n\n    var getGroupPermissions = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var res, temp, cache;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return AdminModel.getAllPermissions();\n\n              case 2:\n                allPermissions.value = _context.sent;\n\n                if (!props.id) {\n                  _context.next = 13;\n                  break;\n                }\n\n                _context.next = 6;\n                return AdminModel.getOneGroup(props.id);\n\n              case 6:\n                res = _context.sent;\n                temp = [];\n                cache = {};\n                res.permissions.forEach(function (v) {\n                  permissionModuleIds.value.push(v.id);\n                  checkedPermissionNames.value.push(v.name);\n                  temp.push(v.module); // 每个module拥有权限个数\n\n                  if (!cache[v.module]) {\n                    cache[v.module] = 1;\n                  } else {\n                    cache[v.module]++;\n                  }\n                }); // 去重\n\n                temp = Array.from(new Set(temp)); // 半选\n\n                temp.forEach(function (item) {\n                  if (allPermissions.value[item].length !== cache[item]) {\n                    halfPermissions.value.push(item);\n                  }\n                });\n                permissionModuleNames.value = Array.from(new Set(temp));\n\n              case 13:\n                ctx.emit('getCacheAuthIds', permissionModuleIds.value.slice());\n                ctx.emit('updatePermissions', permissionModuleIds.value);\n                ctx.emit('updateAllPermissions', allPermissions.value);\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function getGroupPermissions() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    onMounted( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              loading.value = true;\n              _context2.next = 4;\n              return getGroupPermissions();\n\n            case 4:\n              loading.value = false;\n              _context2.next = 11;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              loading.value = false;\n              console.error(_context2.t0);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 7]]);\n    })));\n    /**\n     * 权限批量选中（一个module）\n     */\n\n    var moduleCheck = function moduleCheck(checked, ids, moduleName) {\n      var _ids = ids.map(function (item) {\n        return item.id;\n      });\n\n      var checkedNames = ids.map(function (item) {\n        return item.name;\n      });\n\n      if (checked) {\n        permissionModuleIds.value = Array.from(new Set(permissionModuleIds.value.concat(_ids)));\n        checkedPermissionNames.value = Array.from(new Set(checkedPermissionNames.value.concat(checkedNames)));\n\n        if (!permissionModuleNames.value.includes(moduleName)) {\n          permissionModuleNames.value.push(moduleName);\n        }\n      } else {\n        permissionModuleIds.value = permissionModuleIds.value.filter(function (v) {\n          return !_ids.includes(v);\n        });\n        checkedPermissionNames.value = checkedPermissionNames.value.filter(function (v) {\n          return !checkedNames.includes(v);\n        });\n        permissionModuleNames.value = permissionModuleNames.value.filter(function (v) {\n          return v !== moduleName;\n        });\n      }\n\n      halfPermissions.value = halfPermissions.value.filter(function (v) {\n        return v !== moduleName;\n      });\n      ctx.emit('updatePermissions', permissionModuleIds.value);\n    };\n    /**\n     * 单选某一权限\n     */\n\n\n    var singleCheck = function singleCheck(id, permission, moduleName) {\n      var _ids = permission.map(function (item) {\n        return item.id;\n      });\n\n      var count = 0;\n      var index = permissionModuleIds.value.indexOf(id);\n\n      if (index === -1) {\n        permissionModuleIds.value.push(id);\n      } else {\n        permissionModuleIds.value.splice(index, 1);\n      }\n\n      _ids.forEach(function (item) {\n        if (permissionModuleIds.value.indexOf(item) > -1) {\n          count++;\n        } // 全选状态\n\n\n        if (_ids.length === count) {\n          permissionModuleNames.value.push(moduleName);\n          halfPermissions.value = halfPermissions.value.filter(function (v) {\n            return v !== moduleName;\n          });\n        } else if (count === 0) {\n          // 未选中状态\n          permissionModuleNames.value = permissionModuleNames.value.filter(function (v) {\n            return v !== moduleName;\n          });\n          halfPermissions.value = halfPermissions.value.filter(function (v) {\n            return v !== moduleName;\n          });\n        } else {\n          // 半选状态\n          permissionModuleNames.value = permissionModuleNames.value.filter(function (v) {\n            return v !== moduleName;\n          });\n\n          if (!halfPermissions.value.includes(moduleName)) {\n            halfPermissions.value.push(moduleName);\n          }\n        }\n      });\n\n      ctx.emit('updatePermissions', permissionModuleIds.value);\n    };\n\n    return {\n      loading: loading,\n      moduleCheck: moduleCheck,\n      singleCheck: singleCheck,\n      allPermissions: allPermissions,\n      halfPermissions: halfPermissions,\n      getGroupPermissions: getGroupPermissions,\n      permissionModuleIds: permissionModuleIds,\n      permissionModuleNames: permissionModuleNames,\n      checkedPermissionNames: checkedPermissionNames\n    };\n  }\n};","map":{"version":3,"sources":["/Users/zhahn/Desktop/未命名文件夹/lin-cms-vue/src/view/admin/group/group-permission.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"container\" v-loading=\"loading\">\n    <div class=\"group\">\n      <div class=\"label\">\n        <label>{{ title }}</label>\n      </div>\n      <div class=\"details\">\n        <div class=\"permissions-box\" v-for=\"(permission, moduleName) in allPermissions\" :key=\"moduleName\">\n          <el-checkbox-group v-model=\"permissionModuleNames\">\n            <div class=\"module-box\">\n              <el-checkbox\n                @change=\"moduleCheck($event, permission, moduleName)\"\n                class=\"module\"\n                :label=\"moduleName\"\n                :indeterminate=\"halfPermissions.includes(moduleName)\"\n              ></el-checkbox>\n            </div>\n          </el-checkbox-group>\n          <el-checkbox-group v-model=\"checkedPermissionNames\">\n            <ul class=\"permissions-ul\">\n              <li class=\"permissions-li\" v-for=\"(item, key) in permission\" :key=\"key\">\n                <el-checkbox\n                  :label=\"item.name\"\n                  :value=\"permissionModuleIds.indexOf(item.id) > -1\"\n                  @change=\"singleCheck(item.id, permission, moduleName)\"\n                ></el-checkbox>\n              </li>\n            </ul>\n          </el-checkbox-group>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { onMounted, ref } from 'vue'\nimport AdminModel from '@/lin/model/admin'\n\nexport default {\n  props: ['id', 'title'],\n  setup(props, ctx) {\n    const loading = ref(false)\n    const allPermissions = ref({})\n    const halfPermissions = ref([]) // 该分类下的权限没有全选中\n    const permissionModuleIds = ref([]) // 权限组 集合 id\n    const permissionModuleNames = ref([]) // 权限组 module name\n    const checkedPermissionNames = ref([])\n\n    /**\n     * 初始化权限\n     * 通过判断有没有传入id，来判断当前页面是添加分组还是编辑分组\n     */\n    const getGroupPermissions = async () => {\n      allPermissions.value = await AdminModel.getAllPermissions()\n      // 编辑分组权限\n      if (props.id) {\n        const res = await AdminModel.getOneGroup(props.id)\n        let temp = []\n        const cache = {}\n        res.permissions.forEach(v => {\n          permissionModuleIds.value.push(v.id)\n          checkedPermissionNames.value.push(v.name)\n          temp.push(v.module)\n          // 每个module拥有权限个数\n          if (!cache[v.module]) {\n            cache[v.module] = 1\n          } else {\n            cache[v.module]++\n          }\n        })\n        // 去重\n        temp = Array.from(new Set(temp))\n        // 半选\n        temp.forEach(item => {\n          if (allPermissions.value[item].length !== cache[item]) {\n            halfPermissions.value.push(item)\n          }\n        })\n        permissionModuleNames.value = Array.from(new Set(temp))\n      }\n      ctx.emit('getCacheAuthIds', permissionModuleIds.value.slice())\n      ctx.emit('updatePermissions', permissionModuleIds.value)\n      ctx.emit('updateAllPermissions', allPermissions.value)\n    }\n\n    onMounted(async () => {\n      try {\n        loading.value = true\n        await getGroupPermissions()\n        loading.value = false\n      } catch (e) {\n        loading.value = false\n        console.error(e)\n      }\n    })\n\n    /**\n     * 权限批量选中（一个module）\n     */\n    const moduleCheck = (checked, ids, moduleName) => {\n      const _ids = ids.map(item => item.id)\n      const checkedNames = ids.map(item => item.name)\n      if (checked) {\n        permissionModuleIds.value = Array.from(new Set(permissionModuleIds.value.concat(_ids)))\n        checkedPermissionNames.value = Array.from(new Set(checkedPermissionNames.value.concat(checkedNames)))\n        if (!permissionModuleNames.value.includes(moduleName)) {\n          permissionModuleNames.value.push(moduleName)\n        }\n      } else {\n        permissionModuleIds.value = permissionModuleIds.value.filter(v => !_ids.includes(v))\n        checkedPermissionNames.value = checkedPermissionNames.value.filter(v => !checkedNames.includes(v))\n        permissionModuleNames.value = permissionModuleNames.value.filter(v => v !== moduleName)\n      }\n      halfPermissions.value = halfPermissions.value.filter(v => v !== moduleName)\n      ctx.emit('updatePermissions', permissionModuleIds.value)\n    }\n\n    /**\n     * 单选某一权限\n     */\n    const singleCheck = (id, permission, moduleName) => {\n      const _ids = permission.map(item => item.id)\n      let count = 0\n      const index = permissionModuleIds.value.indexOf(id)\n      if (index === -1) {\n        permissionModuleIds.value.push(id)\n      } else {\n        permissionModuleIds.value.splice(index, 1)\n      }\n      _ids.forEach(item => {\n        if (permissionModuleIds.value.indexOf(item) > -1) {\n          count++\n        }\n        // 全选状态\n        if (_ids.length === count) {\n          permissionModuleNames.value.push(moduleName)\n          halfPermissions.value = halfPermissions.value.filter(v => v !== moduleName)\n        } else if (count === 0) {\n          // 未选中状态\n          permissionModuleNames.value = permissionModuleNames.value.filter(v => v !== moduleName)\n          halfPermissions.value = halfPermissions.value.filter(v => v !== moduleName)\n        } else {\n          // 半选状态\n          permissionModuleNames.value = permissionModuleNames.value.filter(v => v !== moduleName)\n          if (!halfPermissions.value.includes(moduleName)) {\n            halfPermissions.value.push(moduleName)\n          }\n        }\n      })\n      ctx.emit('updatePermissions', permissionModuleIds.value)\n    }\n\n    return {\n      loading,\n      moduleCheck,\n      singleCheck,\n      allPermissions,\n      halfPermissions,\n      getGroupPermissions,\n      permissionModuleIds,\n      permissionModuleNames,\n      checkedPermissionNames,\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.group {\n  margin-left: -95px;\n\n  .label {\n    margin-bottom: 10px;\n    width: 70px;\n    margin-left: 20px;\n    float: left;\n    font-weight: 500;\n\n    label {\n      color: #333333;\n      font-size: 14px;\n      font-weight: 500;\n      height: 20px;\n      line-height: 20px;\n    }\n\n    .necessary {\n      color: #e46a76;\n      font-size: 14px;\n      font-weight: 500px;\n      margin-right: 5px;\n      font-size: 16px;\n    }\n  }\n\n  .details {\n    display: inline-block;\n    width: calc(100% - 95px);\n    margin-top: 5px;\n    margin-left: 5px;\n\n    .text-input {\n      height: 40px;\n      width: 780px;\n      background: rgba(255, 255, 255, 1);\n      border-radius: 2px;\n      border: 1px solid #dee2e6;\n      text-indent: 20px;\n\n      &::placeholder {\n        font-size: 14px;\n        font-weight: 400;\n        color: #c4c9d2;\n        text-indent: 20px;\n      }\n    }\n\n    .permissions-box {\n      .module {\n        height: 20px;\n        font-size: 13px;\n        color: #45526b;\n        line-height: 20px;\n        margin-bottom: 10px;\n      }\n\n      .permissions-ul {\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: space-between;\n        padding: 20px 20px 0;\n        background: #f5f5f6;\n        margin-bottom: 20px;\n\n        .permissions-li {\n          width: 150px;\n          height: 20px;\n          line-height: 20px;\n          margin-bottom: 20px;\n          display: flex;\n          flex-direction: row;\n          justify-content: flex-start;\n          vertical-align: text-top;\n          margin-right: 10px;\n\n          .check {\n            transform: translateY(2px);\n            margin-right: 5px;\n          }\n\n          .permissions-name {\n            height: 20px;\n            font-size: 14px;\n            font-weight: 400;\n            color: #596c8e;\n            line-height: 20px;\n            margin-right: 20px;\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}