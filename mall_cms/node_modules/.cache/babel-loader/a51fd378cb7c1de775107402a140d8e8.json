{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, resolveComponent as _resolveComponent, createBlock as _createBlock, withCtx as _withCtx, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-067109e5\"), n = n(), _popScopeId(), n;\n};\n\nvar _hoisted_1 = {\n  key: 0,\n  style: {\n    \"margin-top\": \"15px\"\n  }\n};\n\nvar _hoisted_2 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"i\", {\n    class: \"el-icon-search\"\n  }, null, -1\n  /* HOISTED */\n  );\n});\n\nvar _hoisted_3 = [_hoisted_2];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_el_option = _resolveComponent(\"el-option\");\n\n  var _component_el_select = _resolveComponent(\"el-select\");\n\n  return $data.showSidebarSearch ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [!$data.showSearchList ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: \"search-display\",\n    onClick: _cache[0] || (_cache[0] = function () {\n      return $options.toSearch && $options.toSearch.apply($options, arguments);\n    })\n  }, _hoisted_3)) : _createCommentVNode(\"v-if\", true), $data.showSearchList ? (_openBlock(), _createBlock(_component_el_select, {\n    key: 1,\n    clearable: \"\",\n    filterable: \"\",\n    class: \"search\",\n    modelValue: $data.sidebar,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return $data.sidebar = $event;\n    }),\n    ref: \"searchInput\",\n    \"filter-method\": $options.search,\n    onChange: $options.handleChange,\n    placeholder: \"请输入关键字\"\n  }, {\n    default: _withCtx(function () {\n      return [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.groups, function (item) {\n        return _openBlock(), _createBlock(_component_el_option, {\n          key: item.key,\n          label: item.title,\n          value: item.path\n        }, null, 8\n        /* PROPS */\n        , [\"label\", \"value\"]);\n      }), 128\n      /* KEYED_FRAGMENT */\n      ))];\n    }),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"modelValue\", \"filter-method\", \"onChange\"])) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true);\n}","map":{"version":3,"sources":["/Users/zhahn/Documents/Hahn/自考/mall/mall_cms/src/component/layout/sidebar/search.vue"],"names":[],"mappings":";;;;;;;;;;AACgC,EAAA,KAAwB,EAAxB;AAAA,kBAAA;AAAA;;;;sBACyC,mBAAA,CAA8B,GAA9B,EAA8B;AAA3B,IAAA,KAAK,EAAC;AAAqB,GAA9B,EAAyB,IAAzB,EAAyB,CAAA;AAAA;AAAzB,G;;;kBAAA,U;;;;;;SAD5D,KAAA,CAAA,iB,kBAAX,mBAAA,CAeM,KAfN,EAAA,UAAA,EAeM,C,CAd+B,KAAA,CAAA,c,kBAAnC,mBAAA,CAAyG,KAAzG,EAAyG;UAAA;AAApG,IAAA,KAAK,EAAC,gBAA8F;AAArD,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,QAAA,CAAA,QAAA,IAAA,QAAA,CAAA,QAAA,OAAA,QAAA,YAAF;AAAA,KAAA;AAAgD,GAAzG,E,UAAA,C,qCAcI,EAPI,KAAA,CAAA,c,kBANR,YAAA,CAYY,oBAZZ,EAYY;UAAA;AAXV,IAAA,SAAS,EAAT,EAWU;AAVV,IAAA,UAAU,EAAV,EAUU;AATV,IAAA,KAAK,EAAC,QASI;gBARD,KAAA,CAAA,OAQC;;aARD,KAAA,CAAA,O,GAAO,M;MAQN;AAPV,IAAA,GAAG,EAAC,aAOM;AALT,qBAAe,QAAA,CAAA,MAKN;AAJT,IAAA,QAAM,EAAE,QAAA,CAAA,YAIC;AAHV,IAAA,WAAW,EAAC;AAGF,GAZZ,E;sBAWa;AAAA,aAAsB,E,kBAAjC,mBAAA,CAAsG,SAAtG,EAAsG,IAAtG,EAAsG,WAAA,CAA5E,KAAA,CAAA,MAA4E,EAAtE,UAAd,IAAc,EAAV;6BAAtB,YAAA,CAAsG,oBAAtG,EAAsG;AAAnE,UAAA,GAAG,EAAE,IAAI,CAAC,GAAyD;AAAnD,UAAA,KAAK,EAAE,IAAI,CAAC,KAAuC;AAA/B,UAAA,KAAK,EAAE,IAAI,CAAC;AAAmB,SAAtG,E,IAAA,E;;AAAA,U,kBAAA,C;OAAsG,CAAtG,E;;AAAA,OAAiC,EAAtB;AAAA,K;;;;GAXb,E;;AAAA,I,2CAAA,C,qCAaI,CAfN,C","sourcesContent":["<template>\n  <div v-if=\"showSidebarSearch\" style=\"margin-top: 15px\">\n    <div class=\"search-display\" v-if=\"!showSearchList\" @click=\"toSearch\"><i class=\"el-icon-search\"></i></div>\n    <el-select\n      clearable\n      filterable\n      class=\"search\"\n      v-model=\"sidebar\"\n      ref=\"searchInput\"\n      v-if=\"showSearchList\"\n      :filter-method=\"search\"\n      @change=\"handleChange\"\n      placeholder=\"请输入关键字\"\n    >\n      <el-option v-for=\"item in groups\" :key=\"item.key\" :label=\"item.title\" :value=\"item.path\"> </el-option>\n    </el-select>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport emitter from 'lin/util/emitter'\n\nimport Config from '@/config/index'\n\nexport default {\n  data() {\n    return {\n      groups: [],\n      sidebar: '',\n      showSearchList: false,\n      showSidebarSearch: Config.showSidebarSearch,\n    }\n  },\n  computed: {\n    ...mapGetters(['sidebarList']),\n  },\n  mounted() {\n    emitter.on('removeSidebarSearch', () => {\n      this.showSidebarSearch = false\n    })\n    emitter.on('showSidebarSearch', () => {\n      if (Config.showSidebarSearch) {\n        this.showSidebarSearch = true\n      }\n    })\n  },\n  methods: {\n    handleChange(val) {\n      this.groups = []\n      this.sidebar = ''\n      this.showSearchList = false\n      this.$router.push(val)\n    },\n    toSearch() {\n      this.showSearchList = true\n      setTimeout(() => {\n        this.$refs.searchInput.focus()\n      }, 200)\n    },\n    search(val) {\n      this.groups = []\n\n      // 深度遍历配置树, 摘取叶子节点作为路由部分\n      function deepTravel(config, fuc) {\n        if (Array.isArray(config)) {\n          config.forEach(subConfig => {\n            deepTravel(subConfig, fuc)\n          })\n        } else if (config.children) {\n          config.children.forEach(subConfig => {\n            deepTravel(subConfig, fuc)\n          })\n        } else {\n          fuc(config)\n        }\n      }\n\n      deepTravel(this.sidebarList, viewConfig => {\n        // 构造舞台view路由\n        if (viewConfig.title.includes(val)) {\n          const viewRouter = {}\n          viewRouter.path = viewConfig.path\n          viewRouter.title = viewConfig.title\n          viewRouter.key = Math.random()\n          this.groups.push(viewRouter)\n        }\n      })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.search-display {\n  position: relative;\n  width: 80%;\n  margin: 0 auto;\n  height: 36px;\n  border-bottom: 1px rgb(185, 190, 195) solid;\n  cursor: pointer;\n\n  .el-icon-search {\n    position: absolute;\n    left: 1px;\n    top: 10px;\n    color: rgb(185, 190, 195);\n  }\n}\n\n.search {\n  width: 80%;\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}