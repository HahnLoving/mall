{"ast":null,"code":"import _objectSpread from \"/Users/zhahn/Documents/Hahn/\\u81EA\\u8003/\\u9879\\u76EE/mall_cms/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/Users/zhahn/Documents/Hahn/\\u81EA\\u8003/\\u9879\\u76EE/mall_cms/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport Banner from '@/model/banner';\nimport UploadImgs from '@/component/base/upload-image';\nexport default {\n  components: {\n    UploadImgs: UploadImgs\n  },\n  data: function data() {\n    return {\n      form: {\n        name: '',\n        title: '',\n        description: '',\n        img: ''\n      },\n      initData: [],\n      maxNum: 1\n    };\n  },\n  methods: {\n    getValue: function getValue() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var val;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.$refs.uploadEle.getValue();\n\n              case 2:\n                val = _context.sent;\n                console.log(val);\n\n                if (val && val.length > 0) {\n                  _this.form.img = val[0].display;\n                }\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    submitForm: function submitForm(formName) {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var form, res;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return _this2.getValue();\n\n              case 2:\n                form = _objectSpread({}, _this2.form);\n                _context3.next = 5;\n                return Banner.addBanner(form);\n\n              case 5:\n                res = _context3.sent;\n\n                if (res.code < window.MAX_SUCCESS_CODE) {\n                  _this2.$message.success(\"\".concat(res.message));\n\n                  _this2.resetForm(formName);\n\n                  _this2.$confirm('是否跳转到Banner列表页？', '提示', {\n                    confirmButtonText: '是',\n                    cancelButtonText: '否',\n                    type: 'info'\n                  }).then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n                    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            _this2.$router.push({\n                              path: '/banner/list'\n                            });\n\n                          case 1:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  })));\n                }\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    // 重置表单\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n    }\n  }\n};","map":{"version":3,"sources":["/Users/zhahn/Documents/Hahn/自考/项目/mall_cms/src/view/banner/banner-add.vue"],"names":[],"mappings":";;;AAqCA,OAAO,MAAP,MAAmB,gBAAnB;AACA,OAAO,UAAP,MAAuB,+BAAvB;AAEA,eAAe;AACb,EAAA,UAAU,EAAE;AAAE,IAAA,UAAS,EAAT;AAAF,GADC;AAEb,EAAA,IAFa,kBAEN;AACL,WAAO;AACL,MAAA,IAAI,EAAE;AACJ,QAAA,IAAI,EAAE,EADF;AAEJ,QAAA,KAAK,EAAE,EAFH;AAGJ,QAAA,WAAW,EAAE,EAHT;AAIJ,QAAA,GAAG,EAAE;AAJD,OADD;AAOL,MAAA,QAAQ,EAAE,EAPL;AAQL,MAAA,MAAM,EAAE;AARH,KAAP;AAUD,GAbY;AAcb,EAAA,OAAO,EAAE;AACD,IAAA,QADC,sBACU;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACG,KAAI,CAAC,KAAL,CAAW,SAAX,CAAqB,QAArB,EADH;;AAAA;AACT,gBAAA,GADS;AAEf,gBAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;;AACA,oBAAI,GAAE,IAAK,GAAG,CAAC,MAAJ,GAAa,CAAxB,EAA2B;AACzB,kBAAA,KAAI,CAAC,IAAL,CAAU,GAAV,GAAgB,GAAG,CAAC,CAAD,CAAH,CAAO,OAAvB;AACF;;AALe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMhB,KAPM;AAQD,IAAA,UARC,sBAQU,QARV,EAQoB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACnB,MAAI,CAAC,QAAL,EADmB;;AAAA;AAEnB,gBAAA,IAFmB,qBAEP,MAAI,CAAC,IAFE;AAAA;AAAA,uBAGP,MAAM,CAAC,SAAP,CAAiB,IAAjB,CAHO;;AAAA;AAGnB,gBAAA,GAHmB;;AAIzB,oBAAI,GAAG,CAAC,IAAJ,GAAW,MAAM,CAAC,gBAAtB,EAAwC;AACtC,kBAAA,MAAI,CAAC,QAAL,CAAc,OAAd,WAAyB,GAAG,CAAC,OAA7B;;AACA,kBAAA,MAAI,CAAC,SAAL,CAAe,QAAf;;AACA,kBAAA,MAAI,CAAC,QAAL,CAAc,iBAAd,EAAiC,IAAjC,EAAuC;AACrC,oBAAA,iBAAiB,EAAE,GADkB;AAErC,oBAAA,gBAAgB,EAAE,GAFmB;AAGrC,oBAAA,IAAI,EAAE;AAH+B,mBAAvC,EAIG,IAJH,uEAIQ;AAAA;AAAA;AAAA;AAAA;AACN,4BAAA,MAAI,CAAC,OAAL,CAAa,IAAb,CAAkB;AAAE,8BAAA,IAAI,EAAE;AAAR,6BAAlB;;AADM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAJR;AAOF;;AAdyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAe1B,KAvBM;AAwBP;AACA,IAAA,SAzBO,qBAyBG,QAzBH,EAyBa;AAClB,WAAK,KAAL,CAAW,QAAX,EAAqB,WAArB;AACD;AA3BM;AAdI,CAAf","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"title\">创建Banner</div>\n    <div class=\"wrap\">\n      <el-row>\n        <el-col :lg=\"16\" :md=\"20\" :sm=\"24\" :xs=\"24\">\n          <el-form :model=\"form\" status-icon ref=\"form\" label-width=\"100px\" @submit.native.prevent>\n            <el-form-item label=\"名称\" prop=\"name\">\n              <el-input size=\"medium\" v-model=\"form.name\" placeholder=\"请填写名称\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"标题\" prop=\"title\">\n              <el-input size=\"medium\" v-model=\"form.title\" placeholder=\"请填写标题\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"主图\" prop=\"img\">\n              <upload-imgs ref=\"uploadEle\" :max-num=\"maxNum\" :value=\"initData\" />\n            </el-form-item>\n            <el-form-item label=\"描述\" prop=\"description\">\n              <el-input size=\"medium\" v-model=\"form.description\" type=\"textarea\" :rows=\"4\" placeholder=\"请填写描述\">\n              </el-input>\n            </el-form-item>\n            <el-form-item class=\"submit\">\n              <el-button\n                type=\"primary\"\n                v-permission=\"{ permission: '创建Banner', type: 'disabled' }\"\n                @click=\"submitForm('form')\"\n                >保 存</el-button\n              >\n              <!-- <el-button @click=\"resetForm('form')\">重 置</el-button> -->\n            </el-form-item>\n          </el-form>\n        </el-col>\n      </el-row>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Banner from '@/model/banner'\nimport UploadImgs from '@/component/base/upload-image'\n\nexport default {\n  components: { UploadImgs },\n  data() {\n    return {\n      form: {\n        name: '',\n        title: '',\n        description: '',\n        img: '',\n      },\n      initData: [],\n      maxNum: 1,\n    }\n  },\n  methods: {\n    async getValue() {\n      const val = await this.$refs.uploadEle.getValue()\n      console.log(val)\n      if (val && val.length > 0) {\n        this.form.img = val[0].display\n      }\n    },\n    async submitForm(formName) {\n      await this.getValue()\n      const form = { ...this.form }\n      const res = await Banner.addBanner(form)\n      if (res.code < window.MAX_SUCCESS_CODE) {\n        this.$message.success(`${res.message}`)\n        this.resetForm(formName)\n        this.$confirm('是否跳转到Banner列表页？', '提示', {\n          confirmButtonText: '是',\n          cancelButtonText: '否',\n          type: 'info',\n        }).then(async () => {\n          this.$router.push({ path: '/banner/list' })\n        })\n      }\n    },\n    // 重置表单\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  .title {\n    height: 59px;\n    line-height: 59px;\n    color: $parent-title-color;\n    font-size: 16px;\n    font-weight: 500;\n    text-indent: 40px;\n    border-bottom: 1px solid #dae1ec;\n  }\n\n  .wrap {\n    padding: 20px;\n  }\n\n  .submit {\n    float: left;\n  }\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}