{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, resolveDirective as _resolveDirective, withDirectives as _withDirectives, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Transition as _Transition, withCtx as _withCtx, createBlock as _createBlock, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-2705e5a8\"), n = n(), _popScopeId(), n;\n};\n\nvar _hoisted_1 = {\n  key: 0,\n  class: \"container\"\n};\nvar _hoisted_2 = {\n  class: \"header\"\n};\n\nvar _hoisted_3 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"div\", {\n    class: \"title\"\n  }, \"订单列表\", -1\n  /* HOISTED */\n  );\n});\n\nvar _hoisted_4 = {\n  class: \"header-left\"\n};\nvar _hoisted_5 = {\n  key: 0,\n  class: \"search\"\n};\nvar _hoisted_6 = {\n  class: \"search-tip\"\n};\n\nvar _hoisted_7 = /*#__PURE__*/_createTextVNode(\" 搜索“\");\n\nvar _hoisted_8 = {\n  class: \"search-keyword\"\n};\n\nvar _hoisted_9 = /*#__PURE__*/_createTextVNode(\"”， 找到 \");\n\nvar _hoisted_10 = {\n  class: \"search-num\"\n};\n\nvar _hoisted_11 = /*#__PURE__*/_createTextVNode(\" 条订单信息 \");\n\nvar _hoisted_12 = {\n  key: 0,\n  class: \"tags\"\n};\n\nvar _hoisted_13 = /*#__PURE__*/_createTextVNode(\"过期\");\n\nvar _hoisted_14 = {\n  \"slot-scope\": \"scope\"\n};\n\nvar _hoisted_15 = /*#__PURE__*/_createTextVNode(\"编辑\");\n\nvar _hoisted_16 = /*#__PURE__*/_createTextVNode(\"删除\");\n\nvar _hoisted_17 = {\n  class: \"pagination\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_lin_search = _resolveComponent(\"lin-search\");\n\n  var _component_lin_date_picker = _resolveComponent(\"lin-date-picker\");\n\n  var _component_el_table_column = _resolveComponent(\"el-table-column\");\n\n  var _component_el_tag = _resolveComponent(\"el-tag\");\n\n  var _component_el_button = _resolveComponent(\"el-button\");\n\n  var _component_el_table = _resolveComponent(\"el-table\");\n\n  var _component_el_pagination = _resolveComponent(\"el-pagination\");\n\n  var _component_order_detail = _resolveComponent(\"order-detail\");\n\n  var _directive_permission = _resolveDirective(\"permission\");\n\n  var _directive_loading = _resolveDirective(\"loading\");\n\n  return _openBlock(), _createElementBlock(\"div\", null, [!$data.showEdit ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _withDirectives(_createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_lin_search, {\n    onQuery: $options.onQueryChange,\n    ref: \"searchKeyword\"\n  }, null, 8\n  /* PROPS */\n  , [\"onQuery\"]), _createVNode(_component_lin_date_picker, {\n    onDateChange: $options.handleDateChange,\n    ref: \"searchDate\",\n    class: \"date\"\n  }, null, 8\n  /* PROPS */\n  , [\"onDateChange\"])], 512\n  /* NEED_PATCH */\n  ), [[_directive_permission, '搜索订单']])]), _createVNode(_Transition, {\n    name: \"fade\"\n  }, {\n    default: _withCtx(function () {\n      return [$data.keyword ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"p\", _hoisted_6, [_hoisted_7, _createElementVNode(\"span\", _hoisted_8, _toDisplayString($data.keyword), 1\n      /* TEXT */\n      ), _hoisted_9, _createElementVNode(\"span\", _hoisted_10, _toDisplayString($data.totalNums), 1\n      /* TEXT */\n      ), _hoisted_11]), _createElementVNode(\"button\", {\n        class: \"search-back\",\n        onClick: _cache[0] || (_cache[0] = function () {\n          return $options.backInit && $options.backInit.apply($options, arguments);\n        })\n      }, \"返回全部订单\")])) : _createCommentVNode(\"v-if\", true)];\n    }),\n    _: 1\n    /* STABLE */\n\n  }), _withDirectives(_createVNode(_component_el_table, {\n    stripe: \"\",\n    data: $data.tableData\n  }, {\n    default: _withCtx(function () {\n      return [_createVNode(_component_el_table_column, {\n        prop: \"id\",\n        label: \"id\",\n        width: \"100\"\n      }), _createVNode(_component_el_table_column, {\n        \"show-overflow-tooltip\": true,\n        prop: \"order_no\",\n        label: \"订单号\",\n        width: \"150\"\n      }), _createVNode(_component_el_table_column, {\n        \"show-overflow-tooltip\": true,\n        prop: \"user_id\",\n        label: \"用户id\",\n        width: \"150\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"total_count\",\n        label: \"单品数量\",\n        width: \"150\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"total_price\",\n        width: \"200\",\n        label: \"总价格\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"status\",\n        \"min-width\": \"100\",\n        label: \"状态\"\n      }, {\n        default: _withCtx(function () {\n          return [_ctx.scope.row.status ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createVNode(_component_el_tag, {\n            type: $options.computeTagType(_ctx.scope.row.status)\n          }, {\n            default: _withCtx(function () {\n              return [_createTextVNode(_toDisplayString(_ctx.scope.row.status | _ctx.orderStatus), 1\n              /* TEXT */\n              )];\n            }),\n            _: 1\n            /* STABLE */\n\n          }, 8\n          /* PROPS */\n          , [\"type\"]), _ctx.scope.row.expired && _ctx.scope.row.status === 1 ? (_openBlock(), _createBlock(_component_el_tag, {\n            key: 0,\n            style: {\n              \"margin-left\": \"5px\"\n            },\n            type: \"danger\",\n            size: \"mini\"\n          }, {\n            default: _withCtx(function () {\n              return [_hoisted_13];\n            }),\n            _: 1\n            /* STABLE */\n\n          })) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true)];\n        }),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_table_column, {\n        fixed: \"right\",\n        width: \"150\",\n        label: \"操作\"\n      }, {\n        default: _withCtx(function () {\n          return [_createElementVNode(\"template\", _hoisted_14, [_createVNode(_component_el_button, {\n            onClick: _cache[1] || (_cache[1] = _withModifiers(function ($event) {\n              return $options.handleEdit(_ctx.scope.row);\n            }, [\"prevent\"])),\n            type: \"primary\",\n            plain: \"\",\n            size: \"mini\"\n          }, {\n            default: _withCtx(function () {\n              return [_hoisted_15];\n            }),\n            _: 1\n            /* STABLE */\n\n          }), _createVNode(_component_el_button, {\n            disabled: \"\",\n            onClick: _cache[2] || (_cache[2] = _withModifiers(function ($event) {\n              return $options.handleDelete(_ctx.scope.row);\n            }, [\"prevent\"])),\n            type: \"danger\",\n            size: \"mini\",\n            plain: \"\"\n          }, {\n            default: _withCtx(function () {\n              return [_hoisted_16];\n            }),\n            _: 1\n            /* STABLE */\n\n          })])];\n        }),\n        _: 1\n        /* STABLE */\n\n      })];\n    }),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"data\"]), [[_directive_loading, $data.loading]]), _createElementVNode(\"div\", _hoisted_17, [$data.refreshPagination ? (_openBlock(), _createBlock(_component_el_pagination, {\n    key: 0,\n    onCurrentChange: $options.handleCurrentChange,\n    background: true,\n    \"page-size\": $data.pageCount,\n    \"current-page\": $data.currentPage,\n    layout: \"prev, pager, next, jumper\",\n    total: $data.totalNums\n  }, null, 8\n  /* PROPS */\n  , [\"onCurrentChange\", \"page-size\", \"current-page\", \"total\"])) : _createCommentVNode(\"v-if\", true)])])) : (_openBlock(), _createBlock(_component_order_detail, {\n    key: 1,\n    onEditClose: $options.editClose,\n    orderId: $data.orderId\n  }, null, 8\n  /* PROPS */\n  , [\"onEditClose\", \"orderId\"]))]);\n}","map":{"version":3,"sources":["/Users/zhahn/Documents/Hahn/自考/项目/mall_cms/src/view/statics/order-list.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div v-if=\"!showEdit\" class=\"container\">\n      <div class=\"header\">\n        <div class=\"title\">订单列表</div>\n        <div class=\"header-left\" v-permission=\"'搜索订单'\">\n          <lin-search @query=\"onQueryChange\" ref=\"searchKeyword\" />\n          <lin-date-picker @dateChange=\"handleDateChange\" ref=\"searchDate\" class=\"date\"> </lin-date-picker>\n        </div>\n      </div>\n      <transition name=\"fade\">\n        <div class=\"search\" v-if=\"keyword\">\n          <p class=\"search-tip\">\n            搜索“<span class=\"search-keyword\">{{ keyword }}</span\n            >”， 找到 <span class=\"search-num\">{{ totalNums }}</span> 条订单信息\n          </p>\n          <button class=\"search-back\" @click=\"backInit\">返回全部订单</button>\n        </div>\n      </transition>\n      <el-table stripe v-loading=\"loading\" :data=\"tableData\">\n        <el-table-column prop=\"id\" label=\"id\" width=\"100\"></el-table-column>\n        <el-table-column :show-overflow-tooltip=\"true\" prop=\"order_no\" label=\"订单号\" width=\"150\"></el-table-column>\n        <el-table-column :show-overflow-tooltip=\"true\" prop=\"user_id\" label=\"用户id\" width=\"150\"></el-table-column>\n        <el-table-column prop=\"total_count\" label=\"单品数量\" width=\"150\"></el-table-column>\n        <el-table-column prop=\"total_price\" width=\"200\" label=\"总价格\"></el-table-column>\n        <el-table-column prop=\"status\" min-width=\"100\" label=\"状态\">\n          <template v-if=\"scope.row.status\" slot-scope=\"scope\">\n            <div class=\"tags\">\n              <el-tag :type=\"computeTagType(scope.row.status)\">{{ scope.row.status | orderStatus }}</el-tag>\n              <el-tag\n                style=\"margin-left:5px;\"\n                v-if=\"scope.row.expired && scope.row.status === 1\"\n                type=\"danger\"\n                size=\"mini\"\n                >过期</el-tag\n              >\n            </div>\n          </template>\n        </el-table-column>\n\n        <el-table-column fixed=\"right\" width=\"150\" label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button @click.prevent=\"handleEdit(scope.row)\" type=\"primary\" plain size=\"mini\">编辑</el-button>\n            <el-button disabled @click.prevent=\"handleDelete(scope.row)\" type=\"danger\" size=\"mini\" plain\n              >删除</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <div class=\"pagination\">\n        <el-pagination\n          @current-change=\"handleCurrentChange\"\n          :background=\"true\"\n          :page-size=\"pageCount\"\n          :current-page=\"currentPage\"\n          v-if=\"refreshPagination\"\n          layout=\"prev, pager, next, jumper\"\n          :total=\"totalNums\"\n        ></el-pagination>\n      </div>\n    </div>\n    <order-detail v-else @editClose=\"editClose\" :orderId=\"orderId\"></order-detail>\n  </div>\n</template>\n\n<script>\nimport LinSearch from '@/component/base/search/lin-search'\nimport LinDatePicker from '@/component/base/date-picker/lin-date-picker'\nimport Order from '@/model/order'\nimport OrderDetail from './order-detail'\n\nexport default {\n  // eslint-disable-next-line\n  components: { OrderDetail, LinSearch, LinDatePicker },\n  data() {\n    return {\n      orderId: null,\n      showEdit: false,\n      tableData: [],\n      loading: false,\n      keyword: null,\n      searchDate: [],\n      searchKeyword: '',\n      totalNums: 0,\n      currentPage: 1,\n      pageCount: 10,\n      refreshPagination: true, // 页数增加的时候，因为缓存的缘故，需要刷新Pagination组件\n    }\n  },\n  async created() {\n    this.loading = true\n    this.getOrders()\n    this.loading = false\n  },\n  watch: {\n    // 关键字搜索\n    searchKeyword(newVal) {\n      if (newVal) {\n        this.keyword = newVal\n        if (this.searchUser) {\n          this.keyword = `${newVal}`\n        }\n        if (this.searchDate.length) {\n          this.keyword = `${newVal} ${this.searchDate}`\n        }\n      } else {\n        this.keyword = ''\n        if (this.searchDate.length) {\n          this.keyword = `${this.searchDate}`\n        }\n        this.$refs.searchKeyword.clear()\n      }\n      this.searchPage()\n    },\n    // 日期搜索\n    searchDate(newDate) {\n      if (newDate && newDate.length) {\n        this.keyword = `${newDate[0]}至${newDate[1]}`\n        if (this.searchKeyword) {\n          this.keyword = `${this.searchKeyword} ${newDate[0]}至${newDate[1]}`\n        }\n      } else {\n        this.keyword = ''\n        if (this.searchUser) {\n          this.keyword = `${this.searchUser}`\n        }\n        if (this.searchKeyword) {\n          this.keyword = `${this.searchUser} ${this.searchKeyword}`\n        }\n        this.$refs.searchDate.clear()\n      }\n      this.searchPage()\n    },\n  },\n  methods: {\n    async getOrders() {\n      const page = this.currentPage - 1\n      const count = this.pageCount\n      const orders = await Order.getOrders(page, count)\n      this.tableData = orders.items\n      this.totalNums = orders.total\n    },\n    async searchPage() {\n      const page = this.currentPage - 1\n      const count = this.pageCount\n      const orders = await Order.search({\n        keyword: this.searchKeyword,\n        page,\n        count,\n        start: this.searchDate[0],\n        end: this.searchDate[1],\n      })\n      this.tableData = orders.items\n      this.totalNums = orders.total\n    },\n    async handleCurrentChange(val) {\n      this.currentPage = val\n      this.loading = true\n      if (this.searchKeyword.length || this.searchDate.length) {\n        this.searchPage()\n      } else {\n        this.getOrders()\n      }\n      this.loading = false\n    },\n    handleEdit(val) {\n      this.orderId = `${val.id}`\n      this.showEdit = true\n    },\n    handleDateChange(date) {\n      this.searchDate = date\n    },\n    editClose() {\n      this.showEdit = false\n      this.getOrders()\n    },\n    handleDelete(val) {\n      this.$confirm('此操作将永久删除该项, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n      }).then(async () => {\n        const res = await Order.deleteOrder(val.id)\n        if (res.code < window.MAX_SUCCESS_CODE) {\n          this.getOrders()\n          this.$message({\n            type: 'success',\n            message: `${res.message}`,\n          })\n        }\n      })\n    },\n    // 清空检索\n    async backInit() {\n      this.searchKeyword = ''\n      this.keyword = ''\n      this.searchDate = []\n      this.tableData = []\n      this.loading = true\n      await this.getOrders()\n      this.loading = false\n    },\n    computeTagType(num) {\n      switch (num) {\n        case 0:\n          return ''\n        case 1:\n          return 'info'\n        case 2:\n          return 'success'\n        case 3:\n          return 'success'\n        case 4:\n          return 'success'\n        case 5:\n          return 'warning'\n        default:\n          return ''\n      }\n    },\n    async onQueryChange(query) {\n      this.searchKeyword = query.trim()\n    },\n  },\n  filters: {\n    orderStatus(num) {\n      switch (num) {\n        case 0:\n          return '全部'\n        case 1:\n          return '待支付'\n        case 2:\n          return '已支付'\n        case 3:\n          return '已发货'\n        case 4:\n          return '已完成'\n        case 5:\n          return '已取消'\n        default:\n          return '全部'\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  padding: 0 30px;\n\n  .header {\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n\n    .title {\n      height: 59px;\n      line-height: 59px;\n      margin-right: 30px;\n      color: $parent-title-color;\n      font-size: 16px;\n      font-weight: 500;\n    }\n\n    .header-left {\n      float: right;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n  }\n\n  .search {\n    height: 52px;\n    width: 100%;\n    background: rgba(57, 99, 188, 0.1);\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    margin-top: 24px;\n    margin-bottom: 24px;\n\n    .search-tip {\n      margin-left: 40px;\n      height: 52px;\n      line-height: 52px;\n      color: #354058;\n      font-size: 14px;\n\n      .search-keyword {\n        color: $theme;\n      }\n\n      .search-num {\n        color: #f4516c;\n      }\n    }\n\n    .search-back {\n      margin: 8px 20px;\n      height: 32px;\n      background: #f4516c;\n      border: none;\n      border-radius: 2px;\n      color: #fff;\n      padding: 0 13px;\n      font-size: 14px;\n      cursor: pointer;\n    }\n  }\n\n  .pagination {\n    display: flex;\n    justify-content: flex-end;\n    margin: 20px;\n  }\n}\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@media screen and (max-width: 1000px) {\n  .date {\n    display: none;\n  }\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}