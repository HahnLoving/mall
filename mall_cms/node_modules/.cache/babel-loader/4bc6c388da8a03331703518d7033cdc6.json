{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, resolveDirective as _resolveDirective, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-6bc78fd2\"), n = n(), _popScopeId(), n;\n};\n\nvar _hoisted_1 = {\n  class: \"title\"\n};\n\nvar _hoisted_2 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"i\", {\n    class: \"iconfont icon-fanhui\"\n  }, null, -1\n  /* HOISTED */\n  );\n});\n\nvar _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 返回 \");\n\nvar _hoisted_4 = [_hoisted_2, _hoisted_3];\nvar _hoisted_5 = {\n  class: \"container\"\n};\nvar _hoisted_6 = {\n  class: \"wrap\"\n};\nvar _hoisted_7 = {\n  class: \"id\"\n};\nvar _hoisted_8 = {\n  class: \"name\"\n};\nvar _hoisted_9 = {\n  class: \"id\"\n};\nvar _hoisted_10 = {\n  class: \"name\"\n};\nvar _hoisted_11 = {\n  class: \"id\"\n};\nvar _hoisted_12 = {\n  class: \"name\"\n};\n\nvar _hoisted_13 = /*#__PURE__*/_createTextVNode(\"保 存\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_el_divider = _resolveComponent(\"el-divider\");\n\n  var _component_sticky_top = _resolveComponent(\"sticky-top\");\n\n  var _component_el_input = _resolveComponent(\"el-input\");\n\n  var _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  var _component_el_autocomplete = _resolveComponent(\"el-autocomplete\");\n\n  var _component_el_switch = _resolveComponent(\"el-switch\");\n\n  var _component_upload_imgs = _resolveComponent(\"upload-imgs\");\n\n  var _component_el_tooltip = _resolveComponent(\"el-tooltip\");\n\n  var _component_dynamic_tag = _resolveComponent(\"dynamic-tag\");\n\n  var _component_el_cascader = _resolveComponent(\"el-cascader\");\n\n  var _component_el_button = _resolveComponent(\"el-button\");\n\n  var _component_el_form = _resolveComponent(\"el-form\");\n\n  var _component_el_col = _resolveComponent(\"el-col\");\n\n  var _component_el_row = _resolveComponent(\"el-row\");\n\n  var _directive_permission = _resolveDirective(\"permission\");\n\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_sticky_top, null, {\n    default: _withCtx(function () {\n      return [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"span\", null, _toDisplayString($props.isCreate ? '创建SPU' : '更新SPU'), 1\n      /* TEXT */\n      ), _createElementVNode(\"span\", {\n        class: \"back\",\n        onClick: _cache[0] || (_cache[0] = function () {\n          return $options.back && $options.back.apply($options, arguments);\n        })\n      }, _hoisted_4), _createVNode(_component_el_divider)])];\n    }),\n    _: 1\n    /* STABLE */\n\n  }), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_row, null, {\n    default: _withCtx(function () {\n      return [_createVNode(_component_el_col, {\n        lg: 16,\n        md: 20,\n        sm: 24,\n        xs: 24\n      }, {\n        default: _withCtx(function () {\n          return [_createVNode(_component_el_form, {\n            model: $data.form,\n            \"status-icon\": \"\",\n            ref: \"form\",\n            \"label-width\": \"100px\",\n            onSubmit: _cache[13] || (_cache[13] = _withModifiers(function () {}, [\"prevent\"]))\n          }, {\n            default: _withCtx(function () {\n              return [_createVNode(_component_el_form_item, {\n                label: \"标题\",\n                prop: \"title\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input, {\n                    size: \"medium\",\n                    modelValue: $data.form.title,\n                    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n                      return $data.form.title = $event;\n                    }),\n                    placeholder: \"请填写标题\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"副标题\",\n                prop: \"subtitle\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input, {\n                    size: \"medium\",\n                    modelValue: $data.form.subtitle,\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n                      return $data.form.subtitle = $event;\n                    }),\n                    placeholder: \"请填写副标题\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"价格\",\n                prop: \"price\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input, {\n                    size: \"medium\",\n                    modelValue: $data.form.price,\n                    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n                      return $data.form.price = $event;\n                    }),\n                    placeholder: \"请填写价格\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"折扣\",\n                prop: \"discount_price\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input, {\n                    size: \"medium\",\n                    modelValue: $data.form.discount_price,\n                    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = function ($event) {\n                      return $data.form.discount_price = $event;\n                    }),\n                    placeholder: \"请填写折扣\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"分类\",\n                prop: \"category_id\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_autocomplete, {\n                    onFocus: $options.loadCategorySuggestions,\n                    \"popper-class\": \"my-autocomplete\",\n                    class: \"inline-input\",\n                    modelValue: $data.categoryState,\n                    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = function ($event) {\n                      return $data.categoryState = $event;\n                    }),\n                    \"fetch-suggestions\": $options.queryCategorySearch,\n                    placeholder: \"请填写所属分类\",\n                    onSelect: $options.handleCategorySelect\n                  }, {\n                    default: _withCtx(function (_ref) {\n                      var item = _ref.item;\n                      return [_createElementVNode(\"span\", _hoisted_7, _toDisplayString(item.id), 1\n                      /* TEXT */\n                      ), _createElementVNode(\"span\", _hoisted_8, _toDisplayString(item.name), 1\n                      /* TEXT */\n                      )];\n                    }),\n                    _: 1\n                    /* STABLE */\n\n                  }, 8\n                  /* PROPS */\n                  , [\"onFocus\", \"modelValue\", \"fetch-suggestions\", \"onSelect\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"默认sku\",\n                prop: \"default_sku_id\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_autocomplete, {\n                    onFocus: $options.loadSkuSuggestions,\n                    \"popper-class\": \"my-autocomplete\",\n                    class: \"inline-input\",\n                    modelValue: $data.skuState,\n                    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = function ($event) {\n                      return $data.skuState = $event;\n                    }),\n                    \"fetch-suggestions\": $options.querySkuSearch,\n                    placeholder: \"请填写默认sku\",\n                    onSelect: $options.handleSkuSelect\n                  }, {\n                    default: _withCtx(function (_ref2) {\n                      var item = _ref2.item;\n                      return [_createElementVNode(\"span\", _hoisted_9, _toDisplayString(item.id), 1\n                      /* TEXT */\n                      ), _createElementVNode(\"span\", _hoisted_10, _toDisplayString(item.title), 1\n                      /* TEXT */\n                      )];\n                    }),\n                    _: 1\n                    /* STABLE */\n\n                  }, 8\n                  /* PROPS */\n                  , [\"onFocus\", \"modelValue\", \"fetch-suggestions\", \"onSelect\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"是否上架\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_switch, {\n                    size: \"medium\",\n                    modelValue: $data.saled,\n                    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = function ($event) {\n                      return $data.saled = $event;\n                    }),\n                    \"active-color\": \"#13ce66\",\n                    \"inactive-color\": \"#ff4949\",\n                    \"active-text\": \"上架\",\n                    \"inactive-text\": \"下架\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"主图\",\n                prop: \"img\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_tooltip, {\n                    class: \"item\",\n                    effect: \"dark\",\n                    content: \"主图可以选择不上传，默认选择轮播图的第一张为主图\",\n                    placement: \"top-start\"\n                  }, {\n                    default: _withCtx(function () {\n                      return [_createVNode(_component_upload_imgs, {\n                        multiple: \"\",\n                        \"max-num\": $data.mainMaxNun,\n                        ref: \"uploadEle\",\n                        value: $data.initData\n                      }, null, 8\n                      /* PROPS */\n                      , [\"max-num\", \"value\"])];\n                    }),\n                    _: 1\n                    /* STABLE */\n\n                  })];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"主题图\",\n                prop: \"for_theme_img\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_upload_imgs, {\n                    \"max-num\": $data.mainMaxNun,\n                    ref: \"uploadThmeEle\",\n                    value: $data.initThemeData\n                  }, null, 8\n                  /* PROPS */\n                  , [\"max-num\", \"value\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"轮播图\",\n                prop: \"spu_img_list\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_upload_imgs, {\n                    multiple: \"\",\n                    sortable: \"\",\n                    \"max-num\": $data.maxNum,\n                    ref: \"uploadBannerEle\",\n                    value: $data.initBannerData\n                  }, null, 8\n                  /* PROPS */\n                  , [\"max-num\", \"value\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"详情图\",\n                prop: \"spu_detail_img_list\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_upload_imgs, {\n                    multiple: \"\",\n                    sortable: \"\",\n                    \"max-num\": $data.maxNum,\n                    ref: \"uploadDetailEle\",\n                    value: $data.initDetailData\n                  }, null, 8\n                  /* PROPS */\n                  , [\"max-num\", \"value\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"标签\",\n                prop: \"tags\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_dynamic_tag, {\n                    modelValue: $data.dynamicTags,\n                    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = function ($event) {\n                      return $data.dynamicTags = $event;\n                    })\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"选择规格\",\n                prop: \"specs\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_cascader, {\n                    placeholder: \"选择规格（可多选）\",\n                    modelValue: $data.specs,\n                    \"onUpdate:modelValue\": _cache[9] || (_cache[9] = function ($event) {\n                      return $data.specs = $event;\n                    }),\n                    props: $data.cascaderProps\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\", \"props\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"可视规格\",\n                prop: \"sketch_spec_id\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_autocomplete, {\n                    onFocus: $options.loadSpecKeySuggestions,\n                    \"popper-class\": \"my-autocomplete\",\n                    class: \"inline-input\",\n                    modelValue: $data.specKeyState,\n                    \"onUpdate:modelValue\": _cache[10] || (_cache[10] = function ($event) {\n                      return $data.specKeyState = $event;\n                    }),\n                    \"fetch-suggestions\": $options.querySpecKeySearch,\n                    placeholder: \"请填写可视规格id\",\n                    onSelect: $options.handleSpecKeySelect\n                  }, {\n                    default: _withCtx(function (_ref3) {\n                      var item = _ref3.item;\n                      return [_createElementVNode(\"span\", _hoisted_11, _toDisplayString(item.id), 1\n                      /* TEXT */\n                      ), _createElementVNode(\"span\", _hoisted_12, _toDisplayString(item.name), 1\n                      /* TEXT */\n                      )];\n                    }),\n                    _: 1\n                    /* STABLE */\n\n                  }, 8\n                  /* PROPS */\n                  , [\"onFocus\", \"modelValue\", \"fetch-suggestions\", \"onSelect\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"描述\",\n                prop: \"description\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input, {\n                    size: \"medium\",\n                    modelValue: $data.form.description,\n                    \"onUpdate:modelValue\": _cache[11] || (_cache[11] = function ($event) {\n                      return $data.form.description = $event;\n                    }),\n                    placeholder: \"请填写描述\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                class: \"submit\"\n              }, {\n                default: _withCtx(function () {\n                  return [_withDirectives(_createVNode(_component_el_button, {\n                    type: \"primary\",\n                    onClick: _cache[12] || (_cache[12] = function ($event) {\n                      return $options.submitForm('form');\n                    })\n                  }, {\n                    default: _withCtx(function () {\n                      return [_hoisted_13];\n                    }),\n                    _: 1\n                    /* STABLE */\n\n                  }, 512\n                  /* NEED_PATCH */\n                  ), [[_directive_permission, {\n                    permission: ['创建SPU', '更新SPU'],\n                    type: 'disabled'\n                  }]]), _createCommentVNode(\" <el-button @click=\\\"resetForm('form')\\\">重 置</el-button> \")];\n                }),\n                _: 1\n                /* STABLE */\n\n              })];\n            }),\n            _: 1\n            /* STABLE */\n\n          }, 8\n          /* PROPS */\n          , [\"model\"])];\n        }),\n        _: 1\n        /* STABLE */\n\n      })];\n    }),\n    _: 1\n    /* STABLE */\n\n  })])])]);\n}","map":{"version":3,"sources":["/Users/zhahn/Documents/Hahn/自考/项目/mall_cms/src/view/spu/spu-edit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <sticky-top>\n      <div class=\"title\">\n        <span>{{ isCreate ? '创建SPU' : '更新SPU' }}</span>\n        <span class=\"back\" @click=\"back\"> <i class=\"iconfont icon-fanhui\"></i> 返回 </span>\n        <el-divider></el-divider>\n      </div>\n    </sticky-top>\n    <div class=\"container\">\n      <div class=\"wrap\">\n        <el-row>\n          <el-col :lg=\"16\" :md=\"20\" :sm=\"24\" :xs=\"24\">\n            <el-form :model=\"form\" status-icon ref=\"form\" label-width=\"100px\" @submit.native.prevent>\n              <el-form-item label=\"标题\" prop=\"title\">\n                <el-input size=\"medium\" v-model=\"form.title\" placeholder=\"请填写标题\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"副标题\" prop=\"subtitle\">\n                <el-input size=\"medium\" v-model=\"form.subtitle\" placeholder=\"请填写副标题\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"价格\" prop=\"price\">\n                <el-input size=\"medium\" v-model=\"form.price\" placeholder=\"请填写价格\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"折扣\" prop=\"discount_price\">\n                <el-input size=\"medium\" v-model=\"form.discount_price\" placeholder=\"请填写折扣\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"分类\" prop=\"category_id\">\n                <el-autocomplete\n                  @focus=\"loadCategorySuggestions\"\n                  popper-class=\"my-autocomplete\"\n                  class=\"inline-input\"\n                  v-model=\"categoryState\"\n                  :fetch-suggestions=\"queryCategorySearch\"\n                  placeholder=\"请填写所属分类\"\n                  @select=\"handleCategorySelect\"\n                >\n                  <template #default=\"{ item }\">\n                    <span class=\"id\">{{ item.id }}</span>\n                    <span class=\"name\">{{ item.name }}</span>\n                  </template>\n                </el-autocomplete>\n              </el-form-item>\n              <el-form-item label=\"默认sku\" prop=\"default_sku_id\">\n                <el-autocomplete\n                  @focus=\"loadSkuSuggestions\"\n                  popper-class=\"my-autocomplete\"\n                  class=\"inline-input\"\n                  v-model=\"skuState\"\n                  :fetch-suggestions=\"querySkuSearch\"\n                  placeholder=\"请填写默认sku\"\n                  @select=\"handleSkuSelect\"\n                >\n                  <template #default=\"{ item }\">\n                    <span class=\"id\">{{ item.id }}</span>\n                    <span class=\"name\">{{ item.title }}</span>\n                  </template>\n                </el-autocomplete>\n              </el-form-item>\n\n              <el-form-item label=\"是否上架\">\n                <el-switch\n                  size=\"medium\"\n                  v-model=\"saled\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#ff4949\"\n                  active-text=\"上架\"\n                  inactive-text=\"下架\"\n                ></el-switch>\n              </el-form-item>\n\n              <el-form-item label=\"主图\" prop=\"img\">\n                <el-tooltip\n                  class=\"item\"\n                  effect=\"dark\"\n                  content=\"主图可以选择不上传，默认选择轮播图的第一张为主图\"\n                  placement=\"top-start\"\n                >\n                  <upload-imgs multiple :max-num=\"mainMaxNun\" ref=\"uploadEle\" :value=\"initData\" />\n                </el-tooltip>\n              </el-form-item>\n\n              <el-form-item label=\"主题图\" prop=\"for_theme_img\">\n                <upload-imgs :max-num=\"mainMaxNun\" ref=\"uploadThmeEle\" :value=\"initThemeData\" />\n              </el-form-item>\n\n              <el-form-item label=\"轮播图\" prop=\"spu_img_list\">\n                <upload-imgs multiple sortable :max-num=\"maxNum\" ref=\"uploadBannerEle\" :value=\"initBannerData\" />\n              </el-form-item>\n\n              <el-form-item label=\"详情图\" prop=\"spu_detail_img_list\">\n                <upload-imgs multiple sortable :max-num=\"maxNum\" ref=\"uploadDetailEle\" :value=\"initDetailData\" />\n              </el-form-item>\n\n              <el-form-item label=\"标签\" prop=\"tags\">\n                <dynamic-tag v-model=\"dynamicTags\"></dynamic-tag>\n              </el-form-item>\n\n              <el-form-item label=\"选择规格\" prop=\"specs\">\n                <el-cascader placeholder=\"选择规格（可多选）\" v-model=\"specs\" :props=\"cascaderProps\"></el-cascader>\n              </el-form-item>\n\n              <el-form-item label=\"可视规格\" prop=\"sketch_spec_id\">\n                <el-autocomplete\n                  @focus=\"loadSpecKeySuggestions\"\n                  popper-class=\"my-autocomplete\"\n                  class=\"inline-input\"\n                  v-model=\"specKeyState\"\n                  :fetch-suggestions=\"querySpecKeySearch\"\n                  placeholder=\"请填写可视规格id\"\n                  @select=\"handleSpecKeySelect\"\n                >\n                  <template #default=\"{ item }\">\n                    <span class=\"id\">{{ item.id }}</span>\n                    <span class=\"name\">{{ item.name }}</span>\n                  </template>\n                </el-autocomplete>\n              </el-form-item>\n\n              <el-form-item label=\"描述\" prop=\"description\">\n                <el-input size=\"medium\" v-model=\"form.description\" placeholder=\"请填写描述\"></el-input>\n              </el-form-item>\n\n              <el-form-item class=\"submit\">\n                <el-button\n                  v-permission=\"{ permission: ['创建SPU', '更新SPU'], type: 'disabled' }\"\n                  type=\"primary\"\n                  @click=\"submitForm('form')\"\n                  >保 存</el-button\n                >\n                <!-- <el-button @click=\"resetForm('form')\">重 置</el-button> -->\n              </el-form-item>\n            </el-form>\n          </el-col>\n        </el-row>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Spu from '@/model/spu'\nimport Category from '@/model/category'\nimport Sku from '@/model/sku'\nimport SpecKey from '@/model/spec-key'\nimport UploadImgs from '@/component/base/upload-image'\nimport DynamicTag from '@/component/tag/DynamicTag.vue'\n\nexport default {\n  components: {\n    UploadImgs,\n    DynamicTag,\n  },\n  props: {\n    isCreate: {\n      type: Boolean,\n      default: false,\n    },\n    spuId: {\n      type: String,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      form: {\n        title: '',\n        subtitle: '',\n        discount_price: null,\n        category_id: null,\n        online: 1,\n        price: null,\n        sketch_spec_id: null,\n        default_sku_id: null,\n        img: null,\n        description: null,\n        spu_img_list: null,\n        spu_detail_img_list: null,\n      },\n      rules: {\n        minWidth: 100,\n        minHeight: 100,\n        maxSize: 5,\n      },\n      dynamicTags: [],\n      initData: [],\n      initThemeData: [],\n      initBannerData: [],\n      initDetailData: [],\n      maxNum: 5,\n      mainMaxNun: 1,\n      saled: true,\n      categoryState: '',\n      specKeyState: '',\n      skuState: '',\n      categorySuggestions: [],\n      specKeySuggestions: [],\n      skuSuggestions: [],\n      specs: [],\n      cascaderProps: {\n        lazy: true,\n        multiple: true,\n        async lazyLoad(node, resolve) {\n          const { level } = node\n          try {\n            const suggestions = await SpecKey.getList()\n            const nodes = suggestions.map(item => ({\n              value: item.id,\n              label: `${item.id} - ${item.name}`,\n              leaf: level >= 0,\n            }))\n            resolve(nodes)\n          } catch (error) {\n            this.$message.error('获取规格信息失败，请检查网络')\n          }\n        },\n      },\n    }\n  },\n  watch: {\n    saled(val) {\n      this.form.online = val ? 1 : 0\n    },\n  },\n  async mounted() {\n    if (!this.isCreate) {\n      const res = await Spu.getDetail(this.spuId)\n      this.form = res\n      const initData = [\n        {\n          id: res.id,\n          display: res.img,\n        },\n      ]\n      this.saled = res.online === 1\n      this.initData = initData\n      this.initThemeData = [\n        {\n          id: res.id,\n          display: res.for_theme_img,\n        },\n      ]\n      // eslint-disable-next-line\n      this.initBannerData = res.spu_img_list ? res.spu_img_list.map((it, index) => ({ id: index, display: it })) : []\n      // eslint-disable-next-line\n      this.initDetailData = res.spu_detail_img_list\n        ? res.spu_detail_img_list.map((it, index) => ({ id: index, display: it }))\n        : []\n      this.specKeyState = res.sketch_spec_key_name\n      this.categoryState = res.category_name\n      this.skuState = res.default_sku_title\n      const hitSpecKeys = await Spu.getSpecKeys(this.spuId)\n      this.specs = hitSpecKeys.map(item => [item])\n      this.dynamicTags = res.tags ? res.tags.split('$') : []\n    }\n  },\n  methods: {\n    // eslint-disable-next-line\n    async submitForm(formName) {\n      await this.getValue()\n      const postData = { ...this.form }\n      const tags = this.dynamicTags.join('$')\n      postData.spec_key_id_list = this.specs.map(spec => spec[0])\n      postData.tags = tags\n      let res\n      if (this.isCreate) {\n        res = await Spu.addSpu(postData)\n      } else {\n        res = await Spu.editSpu(this.spuId, postData)\n      }\n      if (res.code < window.MAX_SUCCESS_CODE) {\n        this.$message.success(`${res.message}`)\n        // this.resetForm(formName)\n        this.$confirm('是否返回上一页', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning',\n        }).then(async () => {\n          this.$emit('editClose')\n        })\n      }\n    },\n    // 重置表单\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    },\n    queryCategorySearch(queryString, cb) {\n      // eslint-disable-next-line\n      const suggestions = this.categorySuggestions\n      const results = queryString ? suggestions.filter(this.createCategoryFilter(queryString)) : suggestions\n      cb(results)\n    },\n    querySpecKeySearch(queryString, cb) {\n      // eslint-disable-next-line\n      const suggestions = this.specKeySuggestions\n      const results = queryString ? suggestions.filter(this.createCategoryFilter(queryString)) : suggestions\n      cb(results)\n    },\n    querySkuSearch(queryString, cb) {\n      // eslint-disable-next-line\n      const suggestions = this.skuSuggestions\n      const results = queryString ? suggestions.filter(this.createSkuFilter(queryString)) : suggestions\n      cb(results)\n    },\n    createCategoryFilter(queryString) {\n      // eslint-disable-next-line\n      return suggestion => {\n        return suggestion.name.toLowerCase().indexOf(queryString.toLowerCase()) === 0\n      }\n    },\n    createSkuFilter(queryString) {\n      // eslint-disable-next-line\n      return suggestion => {\n        return suggestion.title.toLowerCase().indexOf(queryString.toLowerCase()) === 0\n      }\n    },\n    handleCategorySelect(item) {\n      this.categoryState = item.name\n      this.form.category_id = item.id\n    },\n    handleSpecKeySelect(item) {\n      this.specKeyState = item.name\n      this.form.sketch_spec_id = item.id\n    },\n    handleSkuSelect(item) {\n      this.skuState = item.title\n      this.form.default_sku_id = item.id\n    },\n    async getValue() {\n      const val = await this.$refs.uploadEle.getValue()\n      if (val && val.length > 0) {\n        this.form.img = val[0].display\n      }\n      const val3 = await this.$refs.uploadThmeEle.getValue()\n      if (val3 && val3.length > 0) {\n        this.form.for_theme_img = val3[0].display\n      }\n      const val1 = await this.$refs.uploadBannerEle.getValue()\n      if (val1 && val1.length > 0) {\n        this.form.spu_img_list = val1.map(it => it.display)\n      }\n      const val2 = await this.$refs.uploadDetailEle.getValue()\n      if (val2 && val2.length > 0) {\n        this.form.spu_detail_img_list = val2.map(it => it.display)\n      }\n    },\n    back() {\n      this.$emit('editClose')\n    },\n    async loadCategorySuggestions() {\n      if (this.categorySuggestions.length > 0) {\n        return\n      }\n      try {\n        this.categorySuggestions = await Category.getList()\n        if (this.categorySuggestions.length === 0) {\n          this.$message.error('暂无分类，请先添加')\n        }\n      } catch (error) {\n        this.$message.error('获取分类建议信息失败')\n        console.error(error)\n      }\n    },\n    async loadSpecKeySuggestions() {\n      if (this.specKeySuggestions.length > 0) {\n        return\n      }\n      try {\n        if (!this.isCreate) {\n          // 添加当前 spu_id\n          this.specKeySuggestions = await SpecKey.getBySpuId(this.spuId)\n        } else {\n          this.specKeySuggestions = this.specs\n        }\n        if (this.specKeySuggestions.length === 0) {\n          this.$message.error('暂无规格名，请先添加')\n        }\n      } catch (error) {\n        this.$message.error('获取规格键建议信息失败')\n        console.error(error)\n      }\n    },\n    async loadSkuSuggestions() {\n      if (this.skuSuggestions.length > 0) {\n        return\n      }\n      // 如果创建spu，则没有sku，不用建议\n      if (!this.isCreate) {\n        this.skuSuggestions = await Sku.getBySpuId(this.spuId)\n        if (this.skuSuggestions.length === 0) {\n          this.$message.error('暂无SKU，请先添加')\n        }\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.el-divider--horizontal {\n  margin: 0;\n}\n\n.container {\n  .title {\n    height: 59px;\n    line-height: 59px;\n    color: $parent-title-color;\n    font-size: 16px;\n    font-weight: 500;\n    text-indent: 40px;\n\n    .back {\n      float: right;\n      margin-right: 40px;\n      cursor: pointer;\n    }\n  }\n\n  .wrap {\n    padding: 20px;\n  }\n\n  .submit {\n    float: left;\n  }\n}\n\n.my-autocomplete {\n  li {\n    line-height: normal;\n    padding: 7px;\n    display: inline-flex;\n    align-content: space-around;\n    .name {\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n    .id {\n      margin-right: 15px;\n      font-size: 12px;\n      color: #b4b4b4;\n    }\n\n    .highlighted .addr {\n      color: #ddd;\n    }\n  }\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}