{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, withModifiers as _withModifiers, resolveDirective as _resolveDirective, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-1c4d9f46\"), n = n(), _popScopeId(), n;\n};\n\nvar _hoisted_1 = {\n  key: 0,\n  class: \"container\"\n};\n\nvar _hoisted_2 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"div\", {\n    class: \"header\"\n  }, [/*#__PURE__*/_createElementVNode(\"div\", {\n    class: \"title\"\n  }, \"优惠卷列表\"), /*#__PURE__*/_createCommentVNode(\" <el-button @click.prevent=\\\"addCoupon\\\" type=\\\"primary\\\" plain size=\\\"medium\\\">添加优惠卷</el-button> \")], -1\n  /* HOISTED */\n  );\n});\n\nvar _hoisted_3 = /*#__PURE__*/_createTextVNode(\"编辑\");\n\nvar _hoisted_4 = /*#__PURE__*/_createTextVNode(\"删除\");\n\nvar _hoisted_5 = /*#__PURE__*/_createTextVNode(\"从当前模板创建\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_el_table_column = _resolveComponent(\"el-table-column\");\n\n  var _component_el_button = _resolveComponent(\"el-button\");\n\n  var _component_el_table = _resolveComponent(\"el-table\");\n\n  var _component_coupon_edit = _resolveComponent(\"coupon-edit\");\n\n  var _directive_permission = _resolveDirective(\"permission\");\n\n  var _directive_loading = _resolveDirective(\"loading\");\n\n  return _openBlock(), _createElementBlock(\"div\", null, [!$data.showEdit ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _withDirectives(_createVNode(_component_el_table, {\n    stripe: \"\",\n    data: $data.tableData\n  }, {\n    default: _withCtx(function () {\n      return [_createVNode(_component_el_table_column, {\n        prop: \"id\",\n        label: \"id\",\n        width: \"100\"\n      }), _createVNode(_component_el_table_column, {\n        \"show-overflow-tooltip\": true,\n        prop: \"title\",\n        label: \"标题\",\n        width: \"250\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"full_money\",\n        label: \"满减额\",\n        width: \"150\"\n      }), _createVNode(_component_el_table_column, {\n        \"show-overflow-tooltip\": true,\n        prop: \"minus\",\n        label: \"优惠额\",\n        width: \"150\"\n      }), _createVNode(_component_el_table_column, {\n        \"show-overflow-tooltip\": true,\n        prop: \"discount\",\n        label: \"折扣\",\n        width: \"150\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"type\",\n        label: \"类型\",\n        width: \"150\"\n      }, {\n        default: _withCtx(function (scope) {\n          return [_createTextVNode(_toDisplayString(scope.row.type | _ctx.typeFormat), 1\n          /* TEXT */\n          )];\n        }),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_table_column, {\n        prop: \"start_time\",\n        label: \"开始时间\",\n        width: \"200\"\n      }, {\n        default: _withCtx(function (scope) {\n          return [_createTextVNode(_toDisplayString(scope.row.start_time | _ctx.dateFormat), 1\n          /* TEXT */\n          )];\n        }),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_table_column, {\n        prop: \"end_time\",\n        label: \"结束时间\",\n        width: \"200\"\n      }, {\n        default: _withCtx(function (scope) {\n          return [_createTextVNode(_toDisplayString(scope.row.end_time | _ctx.dateFormat), 1\n          /* TEXT */\n          )];\n        }),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_table_column, {\n        \"show-overflow-tooltip\": true,\n        prop: \"description\",\n        \"min-width\": \"200\",\n        label: \"描述\"\n      }), _createVNode(_component_el_table_column, {\n        fixed: \"right\",\n        width: \"150\",\n        label: \"操作\"\n      }, {\n        default: _withCtx(function (scope) {\n          return [_createVNode(_component_el_button, {\n            onClick: _withModifiers(function ($event) {\n              return $options.handleEdit(scope.row);\n            }, [\"prevent\"]),\n            type: \"primary\",\n            plain: \"\",\n            size: \"mini\"\n          }, {\n            default: _withCtx(function () {\n              return [_hoisted_3];\n            }),\n            _: 2\n            /* DYNAMIC */\n\n          }, 1032\n          /* PROPS, DYNAMIC_SLOTS */\n          , [\"onClick\"]), _withDirectives(_createVNode(_component_el_button, {\n            onClick: _withModifiers(function ($event) {\n              return $options.handleDelete(scope.row);\n            }, [\"prevent\"]),\n            type: \"danger\",\n            size: \"mini\",\n            plain: \"\"\n          }, {\n            default: _withCtx(function () {\n              return [_hoisted_4];\n            }),\n            _: 2\n            /* DYNAMIC */\n\n          }, 1032\n          /* PROPS, DYNAMIC_SLOTS */\n          , [\"onClick\"]), [[_directive_permission, {\n            auth: ['删除优惠卷'],\n            type: 'disabled'\n          }]])];\n        }),\n        _: 1\n        /* STABLE */\n\n      })];\n    }),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"data\"]), [[_directive_loading, $data.loading]]), _withDirectives(_createVNode(_component_el_table, {\n    stripe: \"\",\n    data: $data.templates\n  }, {\n    default: _withCtx(function () {\n      return [_createVNode(_component_el_table_column, {\n        prop: \"id\",\n        label: \"id\",\n        width: \"100\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"title\",\n        label: \"名称\",\n        width: \"250\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"full_money\",\n        label: \"满减额\",\n        width: \"150\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"minus\",\n        label: \"优惠额\",\n        width: \"150\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"discount\",\n        label: \"折扣\",\n        width: \"150\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"type\",\n        label: \"类型\",\n        width: \"150\"\n      }, {\n        default: _withCtx(function (scope) {\n          return [_createTextVNode(_toDisplayString(scope.row.type | _ctx.typeFormat), 1\n          /* TEXT */\n          )];\n        }),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_table_column, {\n        prop: \"description\",\n        label: \"描述\",\n        \"min-width\": \"300\"\n      }), _createVNode(_component_el_table_column, {\n        fixed: \"right\",\n        width: \"300\",\n        label: \"操作\"\n      }, {\n        default: _withCtx(function (scope) {\n          return [_withDirectives(_createVNode(_component_el_button, {\n            onClick: _withModifiers(function ($event) {\n              return $options.addCoupon(scope.row);\n            }, [\"prevent\"]),\n            type: \"primary\",\n            plain: \"\",\n            size: \"mini\"\n          }, {\n            default: _withCtx(function () {\n              return [_hoisted_5];\n            }),\n            _: 2\n            /* DYNAMIC */\n\n          }, 1032\n          /* PROPS, DYNAMIC_SLOTS */\n          , [\"onClick\"]), [[_directive_permission, {\n            permission: ['创建优惠卷'],\n            type: 'disabled'\n          }]])];\n        }),\n        _: 1\n        /* STABLE */\n\n      })];\n    }),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"data\"]), [[_directive_loading, $data.loading]])])) : (_openBlock(), _createBlock(_component_coupon_edit, {\n    key: 1,\n    onEditClose: $options.editClose,\n    templateData: $data.templateData,\n    couponId: $data.couponId,\n    isCreate: $data.isCreate,\n    activityId: $props.activityId\n  }, null, 8\n  /* PROPS */\n  , [\"onEditClose\", \"templateData\", \"couponId\", \"isCreate\", \"activityId\"]))]);\n}","map":{"version":3,"sources":["/Users/zhahn/Documents/Hahn/自考/项目/mall_cms/src/view/coupon/coupon-list.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div v-if=\"!showEdit\" class=\"container\">\n      <div class=\"header\">\n        <div class=\"title\">优惠卷列表</div>\n        <!-- <el-button @click.prevent=\"addCoupon\" type=\"primary\" plain size=\"medium\">添加优惠卷</el-button> -->\n      </div>\n\n      <el-table stripe v-loading=\"loading\" :data=\"tableData\">\n        <el-table-column prop=\"id\" label=\"id\" width=\"100\"></el-table-column>\n        <el-table-column :show-overflow-tooltip=\"true\" prop=\"title\" label=\"标题\" width=\"250\"></el-table-column>\n        <el-table-column prop=\"full_money\" label=\"满减额\" width=\"150\"></el-table-column>\n        <el-table-column :show-overflow-tooltip=\"true\" prop=\"minus\" label=\"优惠额\" width=\"150\"></el-table-column>\n        <el-table-column :show-overflow-tooltip=\"true\" prop=\"discount\" label=\"折扣\" width=\"150\"></el-table-column>\n        <el-table-column prop=\"type\" label=\"类型\" width=\"150\">\n          <template  #default=\"scope\">{{ scope.row.type | typeFormat }}</template>\n        </el-table-column>\n        <el-table-column prop=\"start_time\" label=\"开始时间\" width=\"200\">\n          <template  #default=\"scope\">{{ scope.row.start_time | dateFormat }}</template>\n        </el-table-column>\n        <el-table-column prop=\"end_time\" label=\"结束时间\" width=\"200\">\n          <template #default=\"scope\">{{ scope.row.end_time | dateFormat }}</template>\n        </el-table-column>\n        <el-table-column\n          :show-overflow-tooltip=\"true\"\n          prop=\"description\"\n          min-width=\"200\"\n          label=\"描述\"\n        ></el-table-column>\n        <el-table-column fixed=\"right\" width=\"150\" label=\"操作\">\n          <template #default=\"scope\">\n            <el-button @click.prevent=\"handleEdit(scope.row)\" type=\"primary\" plain size=\"mini\">编辑</el-button>\n            <el-button\n              v-permission=\"{ auth: ['删除优惠卷'], type: 'disabled' }\"\n              @click.prevent=\"handleDelete(scope.row)\"\n              type=\"danger\"\n              size=\"mini\"\n              plain\n              >删除</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-table stripe v-loading=\"loading\" :data=\"templates\">\n        <el-table-column prop=\"id\" label=\"id\" width=\"100\"></el-table-column>\n        <el-table-column prop=\"title\" label=\"名称\" width=\"250\"></el-table-column>\n        <el-table-column prop=\"full_money\" label=\"满减额\" width=\"150\"></el-table-column>\n        <el-table-column prop=\"minus\" label=\"优惠额\" width=\"150\"></el-table-column>\n        <el-table-column prop=\"discount\" label=\"折扣\" width=\"150\"></el-table-column>\n        <el-table-column prop=\"type\" label=\"类型\" width=\"150\">\n          <template #default=\"scope\">{{ scope.row.type | typeFormat }}</template>\n        </el-table-column>\n        <el-table-column prop=\"description\" label=\"描述\" min-width=\"300\"></el-table-column>\n        <el-table-column fixed=\"right\" width=\"300\" label=\"操作\">\n          <template #default=\"scope\">\n            <el-button\n              v-permission=\"{ permission: ['创建优惠卷'], type: 'disabled' }\"\n              @click.prevent=\"addCoupon(scope.row)\"\n              type=\"primary\"\n              plain\n              size=\"mini\"\n              >从当前模板创建</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <coupon-edit\n      v-else\n      @editClose=\"editClose\"\n      :templateData=\"templateData\"\n      :couponId=\"couponId\"\n      :isCreate=\"isCreate\"\n      :activityId=\"activityId\"\n    ></coupon-edit>\n  </div>\n</template>\n\n<script>\nimport dayjs from 'dayjs'\nimport Coupon from '@/model/coupon'\nimport CouponEdit from './CouponEdit'\n\nexport default {\n  components: { CouponEdit },\n  props: {\n    activityId: {\n      type: String,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      couponId: null,\n      isCreate: false,\n      tableData: [],\n      templates: [],\n      showEdit: false,\n      totalNums: 0,\n      currentPage: 1,\n      pageCount: 10,\n      refreshPagination: true,\n      templateData: null,\n      loading: false,\n    }\n  },\n  async created() {\n    this.$nextTick(() => {\n      this.loading = true\n      this.getCoupons()\n      this.getTemplates()\n      this.loading = false\n    })\n  },\n  methods: {\n    async getCoupons() {\n      const coupons = await Coupon.getListByActivityId(this.activityId)\n      this.tableData = coupons\n    },\n    async getTemplates() {\n      const templates = await Coupon.getCouponTemplates()\n      this.templates = templates\n    },\n    async handleCurrentChange(val) {\n      this.currentPage = val\n      this.loading = true\n      this.getCoupons()\n      this.loading = false\n    },\n    handleEdit(val) {\n      this.isCreate = false\n      this.couponId = `${val.id}`\n      this.showEdit = true\n    },\n    handleDelete(val) {\n      this.$confirm('此操作将永久删除该项, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n      }).then(async () => {\n        const res = await Coupon.deleteCoupon(val.id)\n        if (res.code < window.MAX_SUCCESS_CODE) {\n          this.getCoupons()\n          this.$message({\n            type: 'success',\n            message: `${res.message}`,\n          })\n        }\n      })\n    },\n    addCoupon(templateData) {\n      this.templateData = templateData\n      console.log('zzr123 =',this.templates)\n      this.isCreate = true\n      this.couponId = null\n      this.showEdit = true\n    },\n    editClose() {\n      this.showEdit = false\n      this.getCoupons()\n    },\n  },\n  filters: {\n    dateFormat(val) {\n      return dayjs(val).format('YYYY-MM-DD HH:mm:ss')\n    },\n    typeFormat(val) {\n      switch (val) {\n        case 1:\n          return '满减券'\n        case 2:\n          return '折扣券'\n        case 3:\n          return '无门槛券'\n        case 4:\n          return '满金额折扣券'\n        default:\n          return val\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  padding: 0 30px;\n\n  .header {\n    display: flex;\n    align-items: center;\n\n    .title {\n      height: 59px;\n      line-height: 59px;\n      color: $parent-title-color;\n      font-size: 16px;\n      font-weight: 500;\n    }\n  }\n\n  .pagination {\n    display: flex;\n    justify-content: flex-end;\n    margin: 20px;\n  }\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}