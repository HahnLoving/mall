{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, withCtx as _withCtx, resolveDirective as _resolveDirective, withDirectives as _withDirectives, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-7fb86caa\"), n = n(), _popScopeId(), n;\n};\n\nvar _hoisted_1 = {\n  class: \"container\"\n};\n\nvar _hoisted_2 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"div\", {\n    class: \"header\"\n  }, [/*#__PURE__*/_createElementVNode(\"div\", {\n    class: \"title\"\n  }, \"规格名列表\")], -1\n  /* HOISTED */\n  );\n});\n\nvar _hoisted_3 = {\n  \"slot-scope\": \"scope\"\n};\n\nvar _hoisted_4 = /*#__PURE__*/_createTextVNode(\"查看\");\n\nvar _hoisted_5 = /*#__PURE__*/_createTextVNode(\"删除\");\n\nvar _hoisted_6 = {\n  class: \"pagination\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_el_table_column = _resolveComponent(\"el-table-column\");\n\n  var _component_el_button = _resolveComponent(\"el-button\");\n\n  var _component_el_table = _resolveComponent(\"el-table\");\n\n  var _component_el_pagination = _resolveComponent(\"el-pagination\");\n\n  var _directive_permission = _resolveDirective(\"permission\");\n\n  var _directive_loading = _resolveDirective(\"loading\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _withDirectives(_createVNode(_component_el_table, {\n    stripe: \"\",\n    data: $data.tableData\n  }, {\n    default: _withCtx(function () {\n      return [_createVNode(_component_el_table_column, {\n        prop: \"id\",\n        label: \"id\",\n        width: \"100\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"name\",\n        label: \"名称\",\n        width: \"150\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"description\",\n        label: \"描述\",\n        \"min-width\": \"200\",\n        \"show-overflow-tooltip\": true\n      }), _createVNode(_component_el_table_column, {\n        prop: \"unit\",\n        label: \"单位\",\n        width: \"150\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"standard\",\n        label: \"标准\",\n        width: \"150\"\n      }), _createVNode(_component_el_table_column, {\n        fixed: \"right\",\n        width: \"150\",\n        label: \"操作\"\n      }, {\n        default: _withCtx(function () {\n          return [_createElementVNode(\"template\", _hoisted_3, [_createVNode(_component_el_button, {\n            onClick: _cache[0] || (_cache[0] = _withModifiers(function ($event) {\n              return $options.handleDetail(_ctx.scope.row);\n            }, [\"prevent\"])),\n            type: \"primary\",\n            plain: \"\",\n            size: \"mini\"\n          }, {\n            default: _withCtx(function () {\n              return [_hoisted_4];\n            }),\n            _: 1\n            /* STABLE */\n\n          }), _withDirectives(_createVNode(_component_el_button, {\n            onClick: _cache[1] || (_cache[1] = _withModifiers(function ($event) {\n              return $options.handleDelete(_ctx.scope.row);\n            }, [\"prevent\"])),\n            type: \"danger\",\n            plain: \"\",\n            size: \"mini\"\n          }, {\n            default: _withCtx(function () {\n              return [_hoisted_5];\n            }),\n            _: 1\n            /* STABLE */\n\n          }, 512\n          /* NEED_PATCH */\n          ), [[_directive_permission, {\n            permission: '删除规格名',\n            type: 'disabled'\n          }]])])];\n        }),\n        _: 1\n        /* STABLE */\n\n      })];\n    }),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"data\"]), [[_directive_loading, _ctx.loading]]), _createElementVNode(\"div\", _hoisted_6, [$data.refreshPagination ? (_openBlock(), _createBlock(_component_el_pagination, {\n    key: 0,\n    onCurrentChange: $options.handleCurrentChange,\n    background: true,\n    \"page-size\": $data.pageCount,\n    \"current-page\": $data.currentPage,\n    layout: \"prev, pager, next, jumper\",\n    total: $data.totalNums\n  }, null, 8\n  /* PROPS */\n  , [\"onCurrentChange\", \"page-size\", \"current-page\", \"total\"])) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"sources":["/Users/zhahn/Documents/Hahn/自考/项目/mall_cms/src/view/spec/spec-key-list.vue"],"names":[],"mappings":";;;;;;;AACO,EAAA,KAAK,EAAC;;;;sBACT,mBAAA,CAEM,KAFN,EAEM;AAFD,IAAA,KAAK,EAAC;AAEL,GAFN,EAAmB,C,aACjB,mBAAA,CAA8B,KAA9B,EAA8B;AAAzB,IAAA,KAAK,EAAC;AAAmB,GAA9B,EAAmB,OAAnB,CADiB,CAAnB,E;;AAAA,G;;;;AAUc,gBAAW;;;+CACkE,I;;+CAOlF,I;;;AAKJ,EAAA,KAAK,EAAC;;;;;;;;;;;;;;;uBAxBb,mBAAA,CAmCM,KAnCN,EAAA,UAAA,EAmCM,CAlCJ,UAkCI,E,gBA/BJ,YAAA,CAmBW,mBAnBX,EAmBW;AAnBD,IAAA,MAAM,EAAN,EAmBC;AAnB2B,IAAA,IAAI,EAAE,KAAA,CAAA;AAmBjC,GAnBX,E;sBACE;AAAA,aAAoE,CAApE,YAAA,CAAoE,0BAApE,EAAoE;AAAnD,QAAA,IAAI,EAAC,IAA8C;AAAzC,QAAA,KAAK,EAAC,IAAmC;AAA9B,QAAA,KAAK,EAAC;AAAwB,OAApE,CAAoE,EACpE,YAAA,CAAsE,0BAAtE,EAAsE;AAArD,QAAA,IAAI,EAAC,MAAgD;AAAzC,QAAA,KAAK,EAAC,IAAmC;AAA9B,QAAA,KAAK,EAAC;AAAwB,OAAtE,CADoE,EAEpE,YAAA,CAA+G,0BAA/G,EAA+G;AAA9F,QAAA,IAAI,EAAC,aAAyF;AAA3E,QAAA,KAAK,EAAC,IAAqE;AAAhE,qBAAU,KAAsD;AAA/C,iCAAuB;AAAwB,OAA/G,CAFoE,EAGpE,YAAA,CAAsE,0BAAtE,EAAsE;AAArD,QAAA,IAAI,EAAC,MAAgD;AAAzC,QAAA,KAAK,EAAC,IAAmC;AAA9B,QAAA,KAAK,EAAC;AAAwB,OAAtE,CAHoE,EAIpE,YAAA,CAA0E,0BAA1E,EAA0E;AAAzD,QAAA,IAAI,EAAC,UAAoD;AAAzC,QAAA,KAAK,EAAC,IAAmC;AAA9B,QAAA,KAAK,EAAC;AAAwB,OAA1E,CAJoE,EAKpE,YAAA,CAYkB,0BAZlB,EAYkB;AAZD,QAAA,KAAK,EAAC,OAYL;AAZa,QAAA,KAAK,EAAC,KAYnB;AAZyB,QAAA,KAAK,EAAC;AAY/B,OAZlB,E;0BACE;AAAA,iBAUW,CAVX,mBAAA,CAUW,UAVX,EAAA,UAAA,EAUW,CATT,YAAA,CAAmG,oBAAnG,EAAmG;AAAvF,YAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,cAAA,CAAA,UAAA,MAAA;AAAA,qBAAU,QAAA,CAAA,YAAA,CAAa,IAAA,CAAA,KAAA,CAAM,GAAnB,CAAV;AAAA,aAAA,EAAgC,CAAA,SAAA,CAAhC,CAAA,CAAkF;AAA/C,YAAA,IAAI,EAAC,SAA0C;AAAhC,YAAA,KAAK,EAAL,EAAgC;AAA1B,YAAA,IAAI,EAAC;AAAqB,WAAnG,E;8BAAqF;AAAA,qBAAE,C,UAAA,CAAF;AAAA,a;;;;WAArF,CASS,E,gBART,YAAA,CAOC,oBAPD,EAOC;AANE,YAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,cAAA,CAAA,UAAA,MAAA;AAAA,qBAAU,QAAA,CAAA,YAAA,CAAa,IAAA,CAAA,KAAA,CAAM,GAAnB,CAAV;AAAA,aAAA,EAAgC,CAAA,SAAA,CAAhC,CAAA,CAMP;AALC,YAAA,IAAI,EAAC,QAKN;AAJC,YAAA,KAAK,EAAL,EAID;AAHC,YAAA,IAAI,EAAC;AAGN,WAPD,E;8BAMG;AAAA,qBAAE,C,UAAA,CAAF;AAAA,a;;;;WANH,E;;AAAA,W,2BAKgB;AAAA,YAAA,UAAA,EAAA,OAAA;AAAA,YAAA,IAAA,EAAA;AAAA,W,GAGP,CAVX,CAUW,CAVX;AAAA,S;;;;OADF,CALoE,CAApE;AAAA,K;;;;GADF,E;;AAAA,I,QAAA,C,wBAA4B,IAAA,CAAA,O,GA+BxB,EAXJ,mBAAA,CAUM,KAVN,EAAA,UAAA,EAUM,CAJI,KAAA,CAAA,iB,kBALR,YAAA,CAQiB,wBARjB,EAQiB;UAAA;AAPd,IAAA,eAAc,EAAE,QAAA,CAAA,mBAOF;AANd,IAAA,UAAU,EAAE,IAME;AALd,iBAAW,KAAA,CAAA,SAKG;AAJd,oBAAc,KAAA,CAAA,WAIA;AAFf,IAAA,MAAM,EAAC,2BAEQ;AADd,IAAA,KAAK,EAAE,KAAA,CAAA;AACO,GARjB,E,IAAA,E;;AAAA,I,yDAAA,C,qCASI,CAVN,CAWI,CAnCN,C","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"header\">\n      <div class=\"title\">规格名列表</div>\n    </div>\n    <el-table stripe v-loading=\"loading\" :data=\"tableData\">\n      <el-table-column prop=\"id\" label=\"id\" width=\"100\"></el-table-column>\n      <el-table-column prop=\"name\" label=\"名称\" width=\"150\"></el-table-column>\n      <el-table-column prop=\"description\" label=\"描述\" min-width=\"200\" :show-overflow-tooltip=\"true\"></el-table-column>\n      <el-table-column prop=\"unit\" label=\"单位\" width=\"150\"></el-table-column>\n      <el-table-column prop=\"standard\" label=\"标准\" width=\"150\"></el-table-column>\n      <el-table-column fixed=\"right\" width=\"150\" label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button @click.prevent=\"handleDetail(scope.row)\" type=\"primary\" plain size=\"mini\">查看</el-button>\n          <el-button\n            @click.prevent=\"handleDelete(scope.row)\"\n            type=\"danger\"\n            plain\n            size=\"mini\"\n            v-permission=\"{ permission: '删除规格名', type: 'disabled' }\"\n            >删除</el-button\n          >\n        </template>\n      </el-table-column>\n    </el-table>\n    <div class=\"pagination\">\n      <el-pagination\n        @current-change=\"handleCurrentChange\"\n        :background=\"true\"\n        :page-size=\"pageCount\"\n        :current-page=\"currentPage\"\n        v-if=\"refreshPagination\"\n        layout=\"prev, pager, next, jumper\"\n        :total=\"totalNums\"\n      ></el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SpecKey from '@/model/spec-key'\n\nexport default {\n  components: {},\n  data() {\n    return {\n      tableData: [],\n      totalNums: 0,\n      currentPage: 1,\n      pageCount: 10,\n      refreshPagination: true,\n    }\n  },\n  async created() {\n    this.loading = true\n    this.getSpecKeys()\n    this.loading = false\n  },\n  methods: {\n    async getSpecKeys() {\n      const page = this.currentPage - 1\n      const count = this.pageCount\n      const specKeys = await SpecKey.getSpecKeys(page, count)\n      this.tableData = specKeys.items\n      this.totalNums = specKeys.total\n    },\n\n    // 切换table页\n    async handleCurrentChange(val) {\n      this.imgSrcList = []\n      this.currentPage = val\n      this.loading = true\n      this.getSpecKeys()\n      this.loading = false\n    },\n    initImgSrcList() {\n      this.tableData.forEach(item => {\n        if (!item.img) {\n          return\n        }\n        this.imgSrcList.push(item.img)\n      })\n    },\n    handleDetail(val) {\n      this.$router.push({ path: `/spec/key/value/${val.id}` })\n    },\n    handleDelete(val) {\n      let res\n      this.$confirm('此操作将永久删除该规格名，是否继续？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n      }).then(async () => {\n        try {\n          this.loading = true\n          res = await SpecKey.deleteSpecKey(val.id)\n        } catch (e) {\n          this.loading = false\n        }\n        if (res.code < window.MAX_SUCCESS_CODE) {\n          this.loading = false\n          if (this.totalNums % this.pageCount === 1 && this.currentPage !== 1) {\n            this.currentPage--\n          }\n          this.getSpecKeys()\n          this.$message({\n            type: 'success',\n            message: `${res.message}`,\n          })\n        } else {\n          this.loading = false\n          this.$message.error(`${res.message}`)\n        }\n      })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  padding: 0 30px;\n\n  .header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    .title {\n      height: 59px;\n      line-height: 59px;\n      color: $parent-title-color;\n      font-size: 16px;\n      font-weight: 500;\n    }\n  }\n\n  .pagination {\n    display: flex;\n    justify-content: flex-end;\n    margin: 20px;\n  }\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}