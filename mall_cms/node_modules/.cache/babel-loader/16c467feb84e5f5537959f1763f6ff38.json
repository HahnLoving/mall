{"ast":null,"code":"import _objectSpread from \"/Users/zhahn/Documents/Hahn/\\u81EA\\u8003/\\u9879\\u76EE/mall_cms/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/Users/zhahn/Documents/Hahn/\\u81EA\\u8003/\\u9879\\u76EE/mall_cms/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport SpecKey from '@/model/spec-key';\nimport SpecValue from '@/model/spec-value';\nimport SpecValueEdit from './spec-value-edit';\nexport default {\n  components: {\n    SpecValueEdit: SpecValueEdit\n  },\n  data: function data() {\n    return {\n      tableData: [],\n      specValueId: 0,\n      dialogFormVisible: false,\n      isCreate: false,\n      id: 0,\n      loading: false,\n      isStandard: false,\n      form: {\n        name: '',\n        description: '',\n        unit: '',\n        standard: 0\n      }\n    };\n  },\n  watch: {\n    isStandard: function isStandard(newVal) {\n      this.form.standard = newVal ? 1 : 0;\n    },\n    // eslint-disable-next-line\n    '$route.params': function $routeParams() {\n      console.log(\"zzr1234\");\n      this.getDetail();\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(\"zzr12345\");\n\n              _this.getDetail();\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  methods: {\n    submitForm: function submitForm() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var form, res;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                form = _objectSpread({}, _this2.form);\n                _context2.next = 3;\n                return SpecKey.editSpecKey(_this2.id, form);\n\n              case 3:\n                res = _context2.sent;\n\n                if (res.code < window.MAX_SUCCESS_CODE) {\n                  _this2.$message.success(\"\".concat(res.message));\n                }\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    handleDelete: function handleDelete(row) {\n      var _this3 = this;\n\n      this.$confirm('此操作将永久删除该项, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return SpecValue.deleteSpecValue(row.id);\n\n              case 2:\n                res = _context3.sent;\n\n                if (res.code < window.MAX_SUCCESS_CODE) {\n                  console.log(\"zzr123456\");\n\n                  _this3.getDetail();\n\n                  _this3.$message({\n                    type: 'success',\n                    message: \"\".concat(res.message)\n                  });\n                }\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      })));\n    },\n    // 重置表单\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    getDetail: function getDetail() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n        var id, res;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this4.loading = true;\n                id = _this4.$route.params.id;\n                _this4.id = id;\n                _context4.next = 5;\n                return SpecKey.getSpecKeyDetail(id);\n\n              case 5:\n                res = _context4.sent;\n                // eslint-disable-next-line\n                _this4.isStandard = res.standard === 1 ? true : false;\n                _this4.form = {\n                  name: res.name,\n                  description: res.description,\n                  unit: res.unit,\n                  standard: res.standard\n                };\n                _this4.tableData = res.items;\n                _this4.loading = false;\n\n              case 10:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }))();\n    },\n    handleAdd: function handleAdd() {\n      this.isCreate = true;\n      this.specValueId = 0;\n      this.dialogFormVisible = true;\n    },\n    handleEdit: function handleEdit(row) {\n      this.isCreate = false;\n      this.specValueId = row.id;\n      this.dialogFormVisible = true;\n    },\n    dialogClose: function dialogClose() {\n      console.log(\"zzr123\");\n      this.dialogFormVisible = false;\n      this.loading = true;\n      this.getDetail();\n      this.loading = false;\n    }\n  }\n};","map":{"version":3,"sources":["/Users/zhahn/Documents/Hahn/自考/项目/mall_cms/src/view/spec/spec-key-value.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div class=\"container\">\n      <el-row :gutter=\"20\" class=\"wrap\">\n        <el-col :lg=\"16\" :md=\"20\" :sm=\"24\" :xs=\"24\">\n          <el-divider></el-divider>\n          <div class=\"title\">\n            <span>修改规格名</span>\n          </div>\n          <el-form :model=\"form\" status-icon ref=\"form\" label-width=\"100px\" @submit.native.prevent>\n            <el-form-item label=\"规格名名称\" prop=\"name\">\n              <el-input disabled size=\"medium\" v-model=\"form.name\" placeholder=\"请填写规格名名称\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"规格名描述\" prop=\"description\">\n              <el-input size=\"medium\" v-model=\"form.description\" placeholder=\"请填写规格名描述\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"单位\" prop=\"unit\">\n              <el-input size=\"medium\" v-model=\"form.unit\" placeholder=\"请填写单位，如：英寸\"></el-input>\n            </el-form-item>\n            <!-- <el-form-item label=\"是否标准\">\n              <el-switch\n                size=\"medium\"\n                v-model=\"isStandard\"\n                active-color=\"#13ce66\"\n                inactive-color=\"#ff4949\"\n                active-text=\"标准\"\n                inactive-text=\"非标准\"\n              ></el-switch>\n            </el-form-item> -->\n            <el-form-item class=\"submit\">\n              <el-button\n                v-permission=\"{ permission: ['更新规格名'], type: 'disabled' }\"\n                type=\"primary\"\n                @click=\"submitForm('form')\"\n                >保 存</el-button\n              >\n              <!-- <el-button @click=\"resetForm('form')\">重 置</el-button> -->\n            </el-form-item>\n          </el-form>\n        </el-col>\n        <el-col :lg=\"16\" :md=\"20\" :sm=\"24\" :xs=\"24\">\n          <el-divider></el-divider>\n          <div class=\"title plus\">\n            <span>规格值列表</span>\n            <el-button style=\"margin-left:30px;\" @click.prevent=\"handleAdd\" type=\"primary\" plain size=\"medium\"\n              >添加规格值</el-button\n            >\n          </div>\n          <el-divider></el-divider>\n          <el-table stripe v-loading=\"loading\" :data=\"tableData\">\n            <el-table-column prop=\"id\" label=\"id\" width=\"150\"></el-table-column>\n            <el-table-column prop=\"value\" label=\"规格值名称\" width=\"150\"></el-table-column>\n            <el-table-column :show-overflow-tooltip=\"true\" prop=\"extend\" min-width=\"200\" label=\"扩展\"></el-table-column>\n            <el-table-column width=\"150\" fixed=\"right\" label=\"操作\">\n              <template #default=\"scope\">\n                <el-button @click.prevent=\"handleEdit(scope.row)\" type=\"primary\" plain size=\"mini\">编辑</el-button>\n                <el-button\n                  @click.prevent=\"handleDelete(scope.row)\"\n                  v-permission=\"{ permission: ['删除规格值'], type: 'disabled' }\"\n                  type=\"danger\"\n                  size=\"mini\"\n                  plain\n                  >删除</el-button\n                >\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-col>\n      </el-row>\n    </div>\n    <!--  创建/编辑规格值弹窗  -->\n    <div v-if=\"dialogFormVisible\">\n        <el-dialog :append-to-body=\"true\" :before-close=\"handleClose\" :visible.sync=\"visible\" v-model=\"dialogFormVisible\">\n            <spec-value-edit\n            v-if=\"dialogFormVisible\"\n            :isCreate=\"isCreate\"\n            :dialog-form-visible=\"dialogFormVisible\"\n            :spec-value-id=\"specValueId\"\n            :spec-id=\"id\"\n            @dialogClose=\"dialogClose\"\n          ></spec-value-edit>\n        </el-dialog>\n    </div>\n    <!-- <spec-value-edit\n      v-if=\"dialogFormVisible\"\n      :isCreate=\"isCreate\"\n      :dialog-form-visible=\"dialogFormVisible\"\n      :spec-value-id=\"specValueId\"\n      :spec-id=\"id\"\n      @dialogClose=\"dialogClose\"\n    ></spec-value-edit> -->\n  </div>\n</template>\n\n<script>\nimport SpecKey from '@/model/spec-key'\nimport SpecValue from '@/model/spec-value'\nimport SpecValueEdit from './spec-value-edit'\n\nexport default {\n  components: {\n    SpecValueEdit,\n  },\n  data() {\n    return {\n      tableData: [],\n      specValueId: 0,\n      dialogFormVisible: false,\n      isCreate: false,\n      id: 0,\n      loading: false,\n      isStandard: false,\n      form: {\n        name: '',\n        description: '',\n        unit: '',\n        standard: 0,\n      },\n    }\n  },\n  watch: {\n    isStandard(newVal) {\n      this.form.standard = newVal ? 1 : 0\n    },\n    // eslint-disable-next-line\n    '$route.params': function() {\n      console.log(\"zzr1234\")\n      this.getDetail()\n    },\n  },\n  async mounted() {\n    console.log(\"zzr12345\")\n    this.getDetail()\n  },\n  methods: {\n    async submitForm() {\n      const form = { ...this.form }\n      const res = await SpecKey.editSpecKey(this.id, form)\n      if (res.code < window.MAX_SUCCESS_CODE) {\n        this.$message.success(`${res.message}`)\n      }\n    },\n    handleDelete(row) {\n      this.$confirm('此操作将永久删除该项, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n      }).then(async () => {\n        const res = await SpecValue.deleteSpecValue(row.id)\n        if (res.code < window.MAX_SUCCESS_CODE) {\n          console.log(\"zzr123456\")\n          this.getDetail()\n          this.$message({\n            type: 'success',\n            message: `${res.message}`,\n          })\n        }\n      })\n    },\n    // 重置表单\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    },\n    async getDetail() {\n      this.loading = true\n      const { id } = this.$route.params\n      this.id = id\n      const res = await SpecKey.getSpecKeyDetail(id)\n      // eslint-disable-next-line\n      this.isStandard = res.standard === 1 ? true : false\n      this.form = {\n        name: res.name,\n        description: res.description,\n        unit: res.unit,\n        standard: res.standard,\n      }\n      this.tableData = res.items\n      this.loading = false\n    },\n    handleAdd() {\n      this.isCreate = true\n      this.specValueId = 0\n      this.dialogFormVisible = true\n    },\n    handleEdit(row) {\n      this.isCreate = false\n      this.specValueId = row.id\n      this.dialogFormVisible = true\n    },\n    dialogClose() {\n      console.log(\"zzr123\")\n      this.dialogFormVisible = false\n      this.loading = true\n      this.getDetail()\n      this.loading = false\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.el-divider--horizontal {\n  margin: 0;\n}\n\n.pagination {\n  display: flex;\n  justify-content: flex-start;\n  margin: 20px;\n}\n\n.container {\n  .title {\n    height: 59px;\n    line-height: 59px;\n    color: $parent-title-color;\n    font-size: 16px;\n    font-weight: 500;\n    // text-indent: 40px;\n\n    .back {\n      float: right;\n      margin-right: 40px;\n      cursor: pointer;\n    }\n  }\n\n  .wrap {\n    padding: 20px;\n    display: flex;\n    justify-content: space-between;\n  }\n\n  .submit {\n    float: left;\n  }\n}\n\n.plus {\n  display: flex;\n  align-items: center;\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}