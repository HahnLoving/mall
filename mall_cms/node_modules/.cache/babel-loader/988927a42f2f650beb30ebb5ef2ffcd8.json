{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, withModifiers as _withModifiers, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-3d32e27e\"), n = n(), _popScopeId(), n;\n};\n\nvar _hoisted_1 = {\n  class: \"container\"\n};\n\nvar _hoisted_2 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"div\", {\n    class: \"title\"\n  }, \"个人中心\", -1\n  /* HOISTED */\n  );\n});\n\nvar _hoisted_3 = {\n  class: \"wrap\"\n};\nvar _hoisted_4 = {\n  class: \"user\"\n};\n\nvar _hoisted_5 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"div\", {\n    class: \"title\"\n  }, \"用户信息\", -1\n  /* HOISTED */\n  );\n});\n\nvar _hoisted_6 = {\n  class: \"content\"\n};\nvar _hoisted_7 = {\n  class: \"name-wrapper\"\n};\n\nvar _hoisted_8 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"div\", {\n    class: \"label\"\n  }, \"昵称\", -1\n  /* HOISTED */\n  );\n});\n\nvar _hoisted_9 = {\n  class: \"name\"\n};\nvar _hoisted_10 = {\n  class: \"avatar\",\n  title: \"点击修改头像\"\n};\nvar _hoisted_11 = [\"src\"];\nvar _hoisted_12 = {\n  class: \"mask\"\n};\n\nvar _hoisted_13 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"i\", {\n    class: \"iconfont icon-icon-test\",\n    style: {\n      \"font-size\": \"20px\"\n    }\n  }, null, -1\n  /* HOISTED */\n  );\n});\n\nvar _hoisted_14 = {\n  class: \"password\"\n};\n\nvar _hoisted_15 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"div\", {\n    class: \"title\"\n  }, \"修改密码\", -1\n  /* HOISTED */\n  );\n});\n\nvar _hoisted_16 = /*#__PURE__*/_createTextVNode(\"保存\");\n\nvar _hoisted_17 = /*#__PURE__*/_createTextVNode(\"重置\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_el_input = _resolveComponent(\"el-input\");\n\n  var _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  var _component_el_button = _resolveComponent(\"el-button\");\n\n  var _component_el_form = _resolveComponent(\"el-form\");\n\n  var _component_el_col = _resolveComponent(\"el-col\");\n\n  var _component_el_row = _resolveComponent(\"el-row\");\n\n  var _component_avatar = _resolveComponent(\"avatar\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_row, null, {\n    default: _withCtx(function () {\n      return [_createVNode(_component_el_col, {\n        lg: 16,\n        md: 20,\n        sm: 24,\n        xs: 24\n      }, {\n        default: _withCtx(function () {\n          return [_createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _createElementVNode(\"div\", _hoisted_9, [_createVNode(_component_el_input, {\n            placeholder: \"请输入内容\",\n            size: \"small\",\n            modelValue: $data.nickname,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n              return $data.nickname = $event;\n            }),\n            \"suffix-icon\": \"el-icon-edit\",\n            ref: \"input\",\n            onBlur: $options.blur\n          }, null, 8\n          /* PROPS */\n          , [\"modelValue\", \"onBlur\"])])]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"img\", {\n            src: _ctx.user.avatar || $data.defaultAvatar,\n            alt: \"头像\"\n          }, null, 8\n          /* PROPS */\n          , _hoisted_11), _createElementVNode(\"label\", _hoisted_12, [_hoisted_13, _createElementVNode(\"input\", {\n            ref: \"avatarInput\",\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: _cache[1] || (_cache[1] = function () {\n              return $options.fileChange && $options.fileChange.apply($options, arguments);\n            })\n          }, null, 544\n          /* HYDRATE_EVENTS, NEED_PATCH */\n          )])])])]), _createElementVNode(\"div\", _hoisted_14, [_hoisted_15, _createVNode(_component_el_form, {\n            ref: \"form\",\n            model: $data.form,\n            \"status-icon\": \"\",\n            rules: $data.rules,\n            onSubmit: _cache[7] || (_cache[7] = _withModifiers(function () {}, [\"prevent\"])),\n            \"label-width\": \"90px\",\n            \"label-position\": \"left\"\n          }, {\n            default: _withCtx(function () {\n              return [_createVNode(_component_el_form_item, {\n                label: \"原始密码\",\n                prop: \"old_password\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input, {\n                    type: \"password\",\n                    modelValue: $data.form.old_password,\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n                      return $data.form.old_password = $event;\n                    }),\n                    autocomplete: \"off\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"新密码\",\n                prop: \"new_password\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input, {\n                    type: \"password\",\n                    modelValue: $data.form.new_password,\n                    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n                      return $data.form.new_password = $event;\n                    }),\n                    autocomplete: \"off\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"确认密码\",\n                prop: \"confirm_password\",\n                \"label-position\": \"top\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input, {\n                    type: \"password\",\n                    modelValue: $data.form.confirm_password,\n                    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = function ($event) {\n                      return $data.form.confirm_password = $event;\n                    }),\n                    autocomplete: \"off\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, null, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_button, {\n                    type: \"primary\",\n                    onClick: _cache[5] || (_cache[5] = function ($event) {\n                      return $options.submitForm('form');\n                    })\n                  }, {\n                    default: _withCtx(function () {\n                      return [_hoisted_16];\n                    }),\n                    _: 1\n                    /* STABLE */\n\n                  }), _createVNode(_component_el_button, {\n                    onClick: _cache[6] || (_cache[6] = function ($event) {\n                      return $options.resetForm('form');\n                    })\n                  }, {\n                    default: _withCtx(function () {\n                      return [_hoisted_17];\n                    }),\n                    _: 1\n                    /* STABLE */\n\n                  })];\n                }),\n                _: 1\n                /* STABLE */\n\n              })];\n            }),\n            _: 1\n            /* STABLE */\n\n          }, 8\n          /* PROPS */\n          , [\"model\", \"rules\"])])];\n        }),\n        _: 1\n        /* STABLE */\n\n      })];\n    }),\n    _: 1\n    /* STABLE */\n\n  })]), _createCommentVNode(\" 修改头像 \"), _createVNode(_component_avatar, {\n    originalImage: $data.cropImg,\n    cropVisible: $data.cropVisible,\n    onSwitchCropVisible: $options.switchCropVisible\n  }, null, 8\n  /* PROPS */\n  , [\"originalImage\", \"cropVisible\", \"onSwitchCropVisible\"])]);\n}","map":{"version":3,"sources":["/Users/zhahn/Documents/Hahn/自考/项目/mall_cms/src/view/center/center.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"title\">个人中心</div>\n    <div class=\"wrap\">\n      <el-row>\n        <el-col :lg=\"16\" :md=\"20\" :sm=\"24\" :xs=\"24\">\n          <div class=\"user\">\n            <div class=\"title\">用户信息</div>\n            <div class=\"content\">\n              <div class=\"name-wrapper\">\n                <div class=\"label\">昵称</div>\n                <div class=\"name\">\n                  <el-input\n                    placeholder=\"请输入内容\"\n                    size=\"small\"\n                    v-model=\"nickname\"\n                    suffix-icon=\"el-icon-edit\"\n                    ref=\"input\"\n                    @blur=\"blur\"\n                  ></el-input>\n                </div>\n              </div>\n              <div class=\"avatar\" title=\"点击修改头像\">\n                <img :src=\"user.avatar || defaultAvatar\" alt=\"头像\" />\n                <label class=\"mask\">\n                  <i class=\"iconfont icon-icon-test\" style=\"font-size: 20px;\"></i>\n                  <input ref=\"avatarInput\" type=\"file\" accept=\"image/*\" @change=\"fileChange\" />\n                </label>\n              </div>\n            </div>\n          </div>\n          <div class=\"password\">\n            <div class=\"title\">修改密码</div>\n            <el-form\n              ref=\"form\"\n              :model=\"form\"\n              status-icon\n              :rules=\"rules\"\n              @submit.prevent\n              label-width=\"90px\"\n              label-position=\"left\"\n            >\n              <el-form-item label=\"原始密码\" prop=\"old_password\">\n                <el-input type=\"password\" v-model=\"form.old_password\" autocomplete=\"off\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"新密码\" prop=\"new_password\">\n                <el-input type=\"password\" v-model=\"form.new_password\" autocomplete=\"off\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"确认密码\" prop=\"confirm_password\" label-position=\"top\">\n                <el-input type=\"password\" v-model=\"form.confirm_password\" autocomplete=\"off\"></el-input>\n              </el-form-item>\n              <el-form-item>\n                <el-button type=\"primary\" @click=\"submitForm('form')\">保存</el-button>\n                <el-button @click=\"resetForm('form')\">重置</el-button>\n              </el-form-item>\n            </el-form>\n          </div>\n        </el-col>\n      </el-row>\n    </div>\n    <!-- 修改头像 -->\n    <avatar :originalImage=\"cropImg\" :cropVisible=\"cropVisible\" @switchCropVisible=\"switchCropVisible\"></avatar>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from 'vuex'\n\nimport User from '@/lin/model/user'\nimport axios from '@/lin/plugin/axios'\nimport defaultAvatar from '@/assets/image/user/user.png'\nimport Avatar from '../../component/layout/avatar.vue'\n\nexport default {\n  name: 'Center',\n  components: { Avatar },\n  data() {\n    const oldPassword = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('原始密码不能为空'))\n      }\n      callback()\n    }\n    const validatePassword = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请输入密码'))\n      } else if (value.length < 6) {\n        callback(new Error('密码长度不能少于6位数'))\n      } else {\n        if (this.form.checkPassword !== '') {\n          this.$refs.form.validateField('confirm_password')\n        }\n        callback()\n      }\n    }\n    const validatePassword2 = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请再次输入密码'))\n      } else if (value !== this.form.new_password) {\n        callback(new Error('两次输入密码不一致!'))\n      } else {\n        callback()\n      }\n    }\n    return {\n      cropImg: '',\n      username: null,\n      nickname: null,\n      defaultAvatar,\n      cropVisible: false,\n      form: {\n        old_password: '',\n        new_password: '',\n        confirm_password: '',\n      },\n      rules: {\n        old_password: [{ validator: oldPassword, trigger: 'blur', required: true }],\n        new_password: [{ validator: validatePassword, trigger: 'blur', required: true }],\n        confirm_password: [{ validator: validatePassword2, trigger: 'blur', required: true }],\n      },\n    }\n  },\n  computed: {\n    ...mapGetters(['user']),\n  },\n  watch: {\n    cropVisible(val) {\n      if (!val) {\n        this.cropImg = ''\n      }\n    },\n  },\n  created() {\n    const { user } = this.$store.state\n    this.nickname = user?.nickname ? user.nickname : '佚名'\n  },\n  methods: {\n    ...mapActions(['loginOut', 'setUserAndState']),\n    switchCropVisible(flag) {\n      this.cropVisible = flag\n    },\n    fileChange(event) {\n      if (event.target.files.length !== 1) {\n        return\n      }\n\n      const imgFile = event.target.files[0]\n      // 验证文件大小是否符合要求, 不大于 5M\n      if (imgFile.size > 1024 * 1024 * 5) {\n        this.$message.error('文件过大超过5M')\n        // 清空输入框\n        this.clearFileInput(this.$refs.avatarInput)\n        return\n      }\n\n      // 验证图像是否符合要求\n      const imgSrc = window.URL.createObjectURL(imgFile)\n      const image = new Image()\n      image.src = imgSrc\n      image.onload = () => {\n        const w = image.width\n        const h = image.height\n        if (w < 50) {\n          this.$message.error('图像宽度过小, 请选择大于50px的图像')\n          // 清空输入框\n          this.clearFileInput(this.$refs.avatarInput)\n          return\n        }\n        if (h < 50) {\n          this.$message.error('图像高度过小, 请选择大于50px的图像')\n          // 清空输入框\n          this.clearFileInput(this.$refs.avatarInput)\n          return\n        }\n        // 验证通过, 打开裁剪框\n        this.cropImg = imgSrc\n        this.cropVisible = true\n        if (this.$refs.croppa) {\n          this.$refs.croppa.refresh()\n        }\n      }\n      image.onerror = () => {\n        this.$message.error('获取本地图片出现错误, 请重试')\n        // 清空输入框\n        this.clearFileInput(this.$refs.avatarInput)\n      }\n    },\n    async blur() {\n      if (this.nickname) {\n        const { user } = this.$store.state\n        if (this.nickname !== user.nickname && this.nickname !== '佚名') {\n          axios({\n            method: 'put',\n            url: '/cms/user',\n            data: {\n              nickname: this.nickname,\n            },\n            showBackend: true,\n          })\n            .then(res => {\n              if (res.code < window.MAX_SUCCESS_CODE) {\n                this.$message({\n                  type: 'success',\n                  message: '更新昵称成功',\n                })\n                // 触发重新获取用户信息\n                return User.getInformation()\n              }\n            })\n            .then(res => {\n              // eslint-disable-line\n              this.setUserAndState(res)\n              this.nickname = res.nickname\n            })\n        }\n      }\n      this.nicknameChanged = false\n    },\n    submitForm(formName) {\n      if (this.form.old_password === '' && this.form.new_password === '' && this.form.confirm_password === '') {\n        this.dialogFormVisible = false\n        return\n      }\n      if (this.form.old_password === this.form.new_password) {\n        this.$message.error('新密码不能与原始密码一样')\n        return\n      }\n      this.$refs[formName].validate(async valid => {\n        // eslint-disable-line\n        if (valid) {\n          const res = await User.updatePassword(this.form)\n          if (res.code < window.MAX_SUCCESS_CODE) {\n            this.$message.success(`${res.message}`)\n            this.resetForm(formName)\n            this.dialogFormVisible = false\n            setTimeout(() => {\n              this.loginOut()\n              const { origin } = window.location\n              window.location.href = origin\n            }, 1000)\n          }\n        } else {\n          console.log('error submit!!')\n          this.$message.error('请填写正确的信息')\n          return false\n        }\n      })\n    },\n    // 重置表单\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    },\n    clearFileInput(ele) {\n      ele.value = ''\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  .title {\n    height: 59px;\n    line-height: 59px;\n    color: $parent-title-color;\n    font-size: 16px;\n    font-weight: 500;\n    text-indent: 40px;\n    border-bottom: 1px solid #dae1ec;\n  }\n\n  .wrap {\n    padding: 20px;\n    max-width: 800px;\n    .user {\n      padding: 0px 20px 25px 30px;\n      z-index: 100;\n      position: relative;\n      border-bottom: 1px solid #dae1ec;\n      .title {\n        font-weight: bold;\n        font-size: 16px;\n        color: #3a3a3a;\n        text-indent: 0px;\n        border: none;\n      }\n      .content {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        .name-wrapper {\n          display: flex;\n          align-items: center;\n          .label {\n            margin-right: 20px;\n            color: #333;\n            font-weight: bold;\n            font-size: 14px;\n          }\n          .name {\n            font-weight: 500;\n          }\n        }\n        .avatar {\n          width: 80px;\n          height: 80px;\n          border-radius: 50%;\n          cursor: pointer;\n          overflow: hidden;\n          position: relative;\n\n          .mask {\n            opacity: 0;\n            transition: all 0.2s;\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0, 0, 0, 0.3);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            cursor: pointer;\n            color: white;\n\n            input {\n              display: none;\n            }\n          }\n\n          &:hover {\n            .mask {\n              opacity: 1;\n            }\n          }\n        }\n\n        .text {\n          margin-left: 20px;\n          color: #fff;\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n\n          .username {\n            margin-bottom: 10px;\n            font-size: 16px;\n            cursor: pointer;\n          }\n\n          .desc {\n            font-size: 14px;\n            color: rgba(222, 226, 230, 1);\n          }\n        }\n\n        .info {\n          position: absolute;\n          bottom: 10px;\n          right: 10px;\n          display: flex;\n          color: #fff;\n          font-size: 14px;\n          height: 20px;\n          line-height: 20px;\n\n          .mid {\n            padding: 0 5px;\n          }\n        }\n      }\n    }\n    .password {\n      padding: 25px 20px 25px 30px;\n      .title {\n        color: #3a3a3a;\n        font-weight: bold;\n        font-size: 16px;\n        text-indent: 0px;\n        margin-bottom: 20px;\n        border: none;\n      }\n    }\n  }\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}