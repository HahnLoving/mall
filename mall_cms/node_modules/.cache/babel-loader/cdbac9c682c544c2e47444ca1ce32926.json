{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport store from '@/store';\n/**\n * 判断是否允许访问该DOM\n * @param {*} permission 权限\n * @param {*} user 当前用户实例\n * @param {*} permissions 当前管理员所在分组权限集\n */\n\nfunction isAllowed(permission, user, permissions) {\n  if (user.admin) return true;\n\n  if (typeof permission === 'string') {\n    return permissions.includes(permission);\n  }\n\n  if (permission instanceof Array) {\n    return permission.some(function (auth) {\n      return permissions.indexOf(auth) >= 0;\n    });\n  }\n\n  return false;\n}\n\nexport default {\n  beforeMount: function beforeMount(el, binding) {\n    var type;\n    var permission;\n    var element = el;\n\n    if (Object.prototype.toString.call(binding.value) === '[object Object]') {\n      ;\n      permission = binding.value.permission;\n      type = binding.value.type;\n    } else {\n      permission = binding.value;\n    }\n\n    var isAllow = isAllowed(permission, store.state.user || {}, store.state.permissions);\n\n    if (!isAllow && permission) {\n      if (type) {\n        element.disabled = true;\n        element.style.opacity = 0.4;\n        element.style.cursor = 'not-allowed';\n      } else {\n        element.style.display = 'none';\n      }\n    }\n  }\n};","map":{"version":3,"sources":["/Users/zhahn/Desktop/未命名文件夹/lin-cms-vue/src/lin/directive/authorize.js"],"names":["store","isAllowed","permission","user","permissions","admin","includes","Array","some","auth","indexOf","beforeMount","el","binding","type","element","Object","prototype","toString","call","value","isAllow","state","disabled","style","opacity","cursor","display"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,SAAlB;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,SAAT,CAAmBC,UAAnB,EAA+BC,IAA/B,EAAqCC,WAArC,EAAkD;AAChD,MAAID,IAAI,CAACE,KAAT,EAAgB,OAAO,IAAP;;AAEhB,MAAI,OAAOH,UAAP,KAAsB,QAA1B,EAAoC;AAClC,WAAOE,WAAW,CAACE,QAAZ,CAAqBJ,UAArB,CAAP;AACD;;AACD,MAAIA,UAAU,YAAYK,KAA1B,EAAiC;AAC/B,WAAOL,UAAU,CAACM,IAAX,CAAgB,UAAAC,IAAI;AAAA,aAAIL,WAAW,CAACM,OAAZ,CAAoBD,IAApB,KAA6B,CAAjC;AAAA,KAApB,CAAP;AACD;;AACD,SAAO,KAAP;AACD;;AAED,eAAe;AACbE,EAAAA,WADa,uBACDC,EADC,EACGC,OADH,EACY;AACvB,QAAIC,IAAJ;AACA,QAAIZ,UAAJ;AACA,QAAMa,OAAO,GAAGH,EAAhB;;AAEA,QAAII,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BN,OAAO,CAACO,KAAvC,MAAkD,iBAAtD,EAAyE;AACvE;AAAIlB,MAAAA,UADmE,GACpDW,OAAO,CAACO,KAD4C,CACnElB,UADmE;AAEpEY,MAAAA,IAFoE,GAE3DD,OAAO,CAACO,KAFmD,CAEpEN,IAFoE;AAGxE,KAHD,MAGO;AACLZ,MAAAA,UAAU,GAAGW,OAAO,CAACO,KAArB;AACD;;AACD,QAAMC,OAAO,GAAGpB,SAAS,CAACC,UAAD,EAAaF,KAAK,CAACsB,KAAN,CAAYnB,IAAZ,IAAoB,EAAjC,EAAqCH,KAAK,CAACsB,KAAN,CAAYlB,WAAjD,CAAzB;;AACA,QAAI,CAACiB,OAAD,IAAYnB,UAAhB,EAA4B;AAC1B,UAAIY,IAAJ,EAAU;AACRC,QAAAA,OAAO,CAACQ,QAAR,GAAmB,IAAnB;AACAR,QAAAA,OAAO,CAACS,KAAR,CAAcC,OAAd,GAAwB,GAAxB;AACAV,QAAAA,OAAO,CAACS,KAAR,CAAcE,MAAd,GAAuB,aAAvB;AACD,OAJD,MAIO;AACLX,QAAAA,OAAO,CAACS,KAAR,CAAcG,OAAd,GAAwB,MAAxB;AACD;AACF;AACF;AAtBY,CAAf","sourcesContent":["import store from '@/store'\n\n/**\n * 判断是否允许访问该DOM\n * @param {*} permission 权限\n * @param {*} user 当前用户实例\n * @param {*} permissions 当前管理员所在分组权限集\n */\nfunction isAllowed(permission, user, permissions) {\n  if (user.admin) return true\n\n  if (typeof permission === 'string') {\n    return permissions.includes(permission)\n  }\n  if (permission instanceof Array) {\n    return permission.some(auth => permissions.indexOf(auth) >= 0)\n  }\n  return false\n}\n\nexport default {\n  beforeMount(el, binding) {\n    let type\n    let permission\n    const element = el\n\n    if (Object.prototype.toString.call(binding.value) === '[object Object]') {\n      ;({ permission } = binding.value);\n      ({ type } = binding.value)\n    } else {\n      permission = binding.value\n    }\n    const isAllow = isAllowed(permission, store.state.user || {}, store.state.permissions)\n    if (!isAllow && permission) {\n      if (type) {\n        element.disabled = true\n        element.style.opacity = 0.4\n        element.style.cursor = 'not-allowed'\n      } else {\n        element.style.display = 'none'\n      }\n    }\n  },\n}\n"]},"metadata":{},"sourceType":"module"}