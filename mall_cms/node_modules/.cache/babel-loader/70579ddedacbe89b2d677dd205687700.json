{"ast":null,"code":"import _objectSpread from \"/Users/zhahn/Documents/Hahn/\\u81EA\\u8003/\\u9879\\u76EE/mall_cms/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/Users/zhahn/Documents/Hahn/\\u81EA\\u8003/\\u9879\\u76EE/mall_cms/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport SpecKey from '@/model/spec-key';\nexport default {\n  data: function data() {\n    return {\n      isStandard: true,\n      form: {\n        name: '',\n        description: '',\n        unit: '',\n        standard: 1\n      }\n    };\n  },\n  watch: {\n    isStandard: function isStandard(newVal) {\n      this.form.standard = newVal ? 1 : 0;\n    }\n  },\n  methods: {\n    submitForm: function submitForm(formName) {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var postData, res;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                postData = _objectSpread({}, _this.form);\n                postData.standard = _this.isStandard ? 1 : 0;\n                _context2.next = 4;\n                return SpecKey.addSpecKey(postData);\n\n              case 4:\n                res = _context2.sent;\n\n                if (res.code < window.MAX_SUCCESS_CODE) {\n                  _this.$message.success(\"\".concat(res.message));\n\n                  _this.resetForm(formName);\n\n                  _this.$confirm('是否跳转到规格名列表页？', '提示', {\n                    confirmButtonText: '是',\n                    cancelButtonText: '否',\n                    type: 'info'\n                  }).then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n                    return regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _this.$router.push({\n                              path: '/spec/key/list'\n                            });\n\n                          case 1:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  })));\n                }\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    // 重置表单\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n    }\n  }\n};","map":{"version":3,"sources":["/Users/zhahn/Documents/Hahn/自考/项目/mall_cms/src/view/spec/spec-key-add.vue"],"names":[],"mappings":";;;AA0CA,OAAO,OAAP,MAAoB,kBAApB;AAEA,eAAe;AACb,EAAA,IADa,kBACN;AACL,WAAO;AACL,MAAA,UAAU,EAAE,IADP;AAEL,MAAA,IAAI,EAAE;AACJ,QAAA,IAAI,EAAE,EADF;AAEJ,QAAA,WAAW,EAAE,EAFT;AAGJ,QAAA,IAAI,EAAE,EAHF;AAIJ,QAAA,QAAQ,EAAE;AAJN;AAFD,KAAP;AASD,GAXY;AAYb,EAAA,KAAK,EAAE;AACL,IAAA,UADK,sBACM,MADN,EACc;AACjB,WAAK,IAAL,CAAU,QAAV,GAAqB,MAAK,GAAI,CAAJ,GAAQ,CAAlC;AACD;AAHI,GAZM;AAiBb,EAAA,OAAO,EAAE;AACD,IAAA,UADC,sBACU,QADV,EACoB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACnB,gBAAA,QADmB,qBACH,KAAI,CAAC,IADF;AAEzB,gBAAA,QAAQ,CAAC,QAAT,GAAoB,KAAI,CAAC,UAAL,GAAkB,CAAlB,GAAsB,CAA1C;AAFyB;AAAA,uBAGP,OAAO,CAAC,UAAR,CAAmB,QAAnB,CAHO;;AAAA;AAGnB,gBAAA,GAHmB;;AAIzB,oBAAI,GAAG,CAAC,IAAJ,GAAW,MAAM,CAAC,gBAAtB,EAAwC;AACtC,kBAAA,KAAI,CAAC,QAAL,CAAc,OAAd,WAAyB,GAAG,CAAC,OAA7B;;AACA,kBAAA,KAAI,CAAC,SAAL,CAAe,QAAf;;AACA,kBAAA,KAAI,CAAC,QAAL,CAAc,cAAd,EAA8B,IAA9B,EAAoC;AAClC,oBAAA,iBAAiB,EAAE,GADe;AAElC,oBAAA,gBAAgB,EAAE,GAFgB;AAGlC,oBAAA,IAAI,EAAE;AAH4B,mBAApC,EAIG,IAJH,uEAIQ;AAAA;AAAA;AAAA;AAAA;AACN,4BAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB;AAAE,8BAAA,IAAI,EAAE;AAAR,6BAAlB;;AADM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAJR;AAOF;;AAdyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAe1B,KAhBM;AAiBP;AACA,IAAA,SAlBO,qBAkBG,QAlBH,EAkBa;AAClB,WAAK,KAAL,CAAW,QAAX,EAAqB,WAArB;AACD;AApBM;AAjBI,CAAf","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"title\">创建规格名</div>\n    <div class=\"wrap\">\n      <el-row>\n        <el-col :lg=\"16\" :md=\"20\" :sm=\"24\" :xs=\"24\">\n          <el-form :model=\"form\" status-icon ref=\"form\" label-width=\"100px\" @submit.native.prevent>\n            <el-form-item label=\"规格名名称\" prop=\"name\">\n              <el-input size=\"medium\" v-model=\"form.name\" placeholder=\"请填写规格名名称\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"规格名描述\" prop=\"name\">\n              <el-input size=\"medium\" v-model=\"form.description\" placeholder=\"请填写规格名描述\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"单位\" prop=\"unit\">\n              <el-input size=\"medium\" v-model=\"form.unit\" placeholder=\"去哪个填写单位，如：英寸\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"是否标准\">\n              <el-switch\n                v-model=\"isStandard\"\n                active-color=\"#13ce66\"\n                inactive-color=\"#ff4949\"\n                active-text=\"标准\"\n                inactive-text=\"非标准\"\n              ></el-switch>\n            </el-form-item>\n            <el-form-item class=\"submit\">\n              <el-button\n                v-permission=\"{ permission: ['创建规格名'], type: 'disabled' }\"\n                type=\"primary\"\n                @click=\"submitForm('form')\"\n                >保 存</el-button\n              >\n              <el-button @click=\"resetForm('form')\">重 置</el-button>\n            </el-form-item>\n          </el-form>\n        </el-col>\n      </el-row>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SpecKey from '@/model/spec-key'\n\nexport default {\n  data() {\n    return {\n      isStandard: true,\n      form: {\n        name: '',\n        description: '',\n        unit: '',\n        standard: 1,\n      },\n    }\n  },\n  watch: {\n    isStandard(newVal) {\n      this.form.standard = newVal ? 1 : 0\n    },\n  },\n  methods: {\n    async submitForm(formName) {\n      const postData = { ...this.form }\n      postData.standard = this.isStandard ? 1 : 0\n      const res = await SpecKey.addSpecKey(postData)\n      if (res.code < window.MAX_SUCCESS_CODE) {\n        this.$message.success(`${res.message}`)\n        this.resetForm(formName)\n        this.$confirm('是否跳转到规格名列表页？', '提示', {\n          confirmButtonText: '是',\n          cancelButtonText: '否',\n          type: 'info',\n        }).then(async () => {\n          this.$router.push({ path: '/spec/key/list' })\n        })\n      }\n    },\n    // 重置表单\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  .title {\n    height: 50px;\n    line-height: 59px;\n    color: $parent-title-color;\n    font-size: 16px;\n    font-weight: 500;\n    text-indent: 40px;\n    border-bottom: 1px solid #dae1ec;\n  }\n\n  .wrap {\n    padding: 20px;\n  }\n\n  .submit {\n    float: left;\n  }\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}