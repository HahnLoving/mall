{"ast":null,"code":"import _asyncToGenerator from \"/Users/zhahn/Documents/Hahn/\\u81EA\\u8003/mall/mall_cms/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport order from '@/model/order';\nimport StickyTop from '@/component/base/sticky-top/sticky-top';\nexport default {\n  components: {\n    StickyTop: StickyTop\n  },\n  props: {\n    orderId: {\n      type: String,\n      default: null\n    }\n  },\n  data: function data() {\n    return {\n      form: {}\n    };\n  },\n  computed: {\n    actionName: function actionName() {\n      if (this.form.status) {\n        switch (this.form.status) {\n          case 2:\n            return '发货';\n\n          case 3:\n            return '完成';\n\n          default:\n            return '不可操作';\n        }\n      } else {\n        return '不可操作';\n      }\n    },\n    actionDisabled: function actionDisabled() {\n      if ( // eslint-disable-next-line\n      this.form.status && (this.form.status === 2 || this.form.status === 3)) {\n        return false;\n      }\n\n      return true;\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this.$nextTick( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n                return regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        if (!_this.isCreate) {\n                          _this.getOrder();\n                        }\n\n                      case 1:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              })));\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  },\n  methods: {\n    changeOrderStatus: function changeOrderStatus() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return order.changeOrderStatus(_this2.orderId, _this2.form.status + 1);\n\n              case 2:\n                res = _context3.sent;\n\n                if (res.code < window.MAX_SUCCESS_CODE) {\n                  _this2.$message.success(\"\".concat(res.message));\n                }\n\n                _this2.getOrder();\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    getOrder: function getOrder() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return order.getOrder(_this3.orderId);\n\n              case 2:\n                res = _context4.sent;\n                _this3.form = res;\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }))();\n    },\n    // eslint-disable-next-line\n    submitForm: function submitForm(formName) {\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }))();\n    },\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    back: function back() {\n      this.$emit('editClose');\n    },\n    computeTagType: function computeTagType(num) {\n      switch (num) {\n        case 0:\n          return '';\n\n        case 1:\n          return 'info';\n\n        case 2:\n          return 'success';\n\n        case 3:\n          return 'success';\n\n        case 4:\n          return 'success';\n\n        case 5:\n          return 'warning';\n\n        default:\n          return '';\n      }\n    }\n  },\n  filters: {\n    orderStatus: function orderStatus(num) {\n      switch (num) {\n        case 0:\n          return '全部';\n\n        case 1:\n          return '待支付';\n\n        case 2:\n          return '已支付';\n\n        case 3:\n          return '已发货';\n\n        case 4:\n          return '已完成';\n\n        case 5:\n          return '已取消';\n\n        default:\n          return '全部';\n      }\n    }\n  }\n};","map":{"version":3,"sources":["/Users/zhahn/Documents/Hahn/自考/mall/mall_cms/src/view/statics/order-detail.vue"],"names":[],"mappings":";;AAkGA,OAAO,KAAP,MAAkB,eAAlB;AACA,OAAO,SAAP,MAAsB,wCAAtB;AAEA,eAAe;AACb,EAAA,UAAU,EAAE;AAAE,IAAA,SAAQ,EAAR;AAAF,GADC;AAEb,EAAA,KAAK,EAAE;AACL,IAAA,OAAO,EAAE;AACP,MAAA,IAAI,EAAE,MADC;AAEP,MAAA,OAAO,EAAE;AAFF;AADJ,GAFM;AAQb,EAAA,IARa,kBAQN;AACL,WAAO;AACL,MAAA,IAAI,EAAE;AADD,KAAP;AAGD,GAZY;AAab,EAAA,QAAQ,EAAE;AACR,IAAA,UADQ,wBACK;AACX,UAAI,KAAK,IAAL,CAAU,MAAd,EAAsB;AACpB,gBAAQ,KAAK,IAAL,CAAU,MAAlB;AACE,eAAK,CAAL;AACE,mBAAO,IAAP;;AACF,eAAK,CAAL;AACE,mBAAO,IAAP;;AACF;AACE,mBAAO,MAAP;AANJ;AAQF,OATA,MASO;AACL,eAAO,MAAP;AACF;AACD,KAdO;AAeR,IAAA,cAfQ,4BAeS;AACf,WACE;AACA,WAAK,IAAL,CAAU,MAAV,KACC,KAAK,IAAL,CAAU,MAAV,KAAqB,CAArB,IAA0B,KAAK,IAAL,CAAU,MAAV,KAAqB,CADhD,CAFF,EAIE;AACA,eAAO,KAAP;AACF;;AACA,aAAO,IAAP;AACD;AAxBO,GAbG;AAuCP,EAAA,OAvCO,qBAuCG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACd,cAAA,KAAI,CAAC,SAAL,uEAAe;AAAA;AAAA;AAAA;AAAA;AACb,4BAAI,CAAC,KAAI,CAAC,QAAV,EAAoB;AAClB,0BAAA,KAAI,CAAC,QAAL;AACF;;AAHa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAf;;AADc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMf,GA7CY;AA8Cb,EAAA,OAAO,EAAE;AACD,IAAA,iBADC,+BACmB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACN,KAAK,CAAC,iBAAN,CAAwB,MAAI,CAAC,OAA7B,EAAsC,MAAI,CAAC,IAAL,CAAU,MAAV,GAAmB,CAAzD,CADM;;AAAA;AAClB,gBAAA,GADkB;;AAExB,oBAAI,GAAG,CAAC,IAAJ,GAAW,MAAM,CAAC,gBAAtB,EAAwC;AACtC,kBAAA,MAAI,CAAC,QAAL,CAAc,OAAd,WAAyB,GAAG,CAAC,OAA7B;AACF;;AACA,gBAAA,MAAI,CAAC,QAAL;;AALwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMzB,KAPM;AAQD,IAAA,QARC,sBAQU;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACG,KAAK,CAAC,QAAN,CAAe,MAAI,CAAC,OAApB,CADH;;AAAA;AACT,gBAAA,GADS;AAEf,gBAAA,MAAI,CAAC,IAAL,GAAY,GAAZ;;AAFe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGhB,KAXM;AAYP;AACM,IAAA,UAbC,sBAaU,QAbV,EAaoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAE,KAbtB;AAcP,IAAA,SAdO,qBAcG,QAdH,EAca;AAClB,WAAK,KAAL,CAAW,QAAX,EAAqB,WAArB;AACD,KAhBM;AAiBP,IAAA,IAjBO,kBAiBA;AACL,WAAK,KAAL,CAAW,WAAX;AACD,KAnBM;AAoBP,IAAA,cApBO,0BAoBQ,GApBR,EAoBa;AAClB,cAAQ,GAAR;AACE,aAAK,CAAL;AACE,iBAAO,EAAP;;AACF,aAAK,CAAL;AACE,iBAAO,MAAP;;AACF,aAAK,CAAL;AACE,iBAAO,SAAP;;AACF,aAAK,CAAL;AACE,iBAAO,SAAP;;AACF,aAAK,CAAL;AACE,iBAAO,SAAP;;AACF,aAAK,CAAL;AACE,iBAAO,SAAP;;AACF;AACE,iBAAO,EAAP;AAdJ;AAgBD;AArCM,GA9CI;AAqFb,EAAA,OAAO,EAAE;AACP,IAAA,WADO,uBACK,GADL,EACU;AACf,cAAQ,GAAR;AACE,aAAK,CAAL;AACE,iBAAO,IAAP;;AACF,aAAK,CAAL;AACE,iBAAO,KAAP;;AACF,aAAK,CAAL;AACE,iBAAO,KAAP;;AACF,aAAK,CAAL;AACE,iBAAO,KAAP;;AACF,aAAK,CAAL;AACE,iBAAO,KAAP;;AACF,aAAK,CAAL;AACE,iBAAO,KAAP;;AACF;AACE,iBAAO,IAAP;AAdJ;AAgBD;AAlBM;AArFI,CAAf","sourcesContent":["<template>\n  <div>\n    <sticky-top>\n      <div class=\"title\">\n        <span>订单详情</span>\n        <span class=\"back\" @click=\"back\"> <i class=\"iconfont icon-fanhui\"></i> 返回 </span>\n        <el-divider></el-divider>\n      </div>\n    </sticky-top>\n    <div class=\"container\">\n      <div class=\"wrap\">\n        <el-row>\n          <el-col :lg=\"16\" :md=\"20\" :sm=\"24\" :xs=\"24\">\n            <el-form :model=\"form\" status-icon ref=\"form\" label-width=\"100px\" @submit.native.prevent>\n              <el-form-item label=\"订单号\" prop=\"order_no\">\n                <el-input disabled size=\"medium\" v-model=\"form.order_no\"></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"图片\" prop=\"snap_img\">\n                <el-image style=\"height:100px;width:100px;\" :src=\"form.snap_img\"></el-image>\n              </el-form-item>\n\n              <el-form-item label=\"标题\" prop=\"snap_title\">\n                <el-input disabled size=\"medium\" v-model=\"form.snap_title\"></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"预付编号\" prop=\"prepay_id\">\n                <el-input disabled size=\"medium\" v-model=\"form.prepay_id\"></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"总价格\" prop=\"total_price\">\n                <el-input-number disabled v-model=\"form.total_price\" :precision=\"2\" :step=\"0.1\"></el-input-number>\n              </el-form-item>\n\n              <el-form-item label=\"交易价格\" prop=\"final_total_price\">\n                <el-input-number disabled v-model=\"form.final_total_price\" :precision=\"2\" :step=\"0.1\"></el-input-number>\n              </el-form-item>\n\n              <el-form-item label=\"总数量\" prop=\"total_count\">\n                <el-input-number disabled v-model=\"form.total_count\" :step=\"1\" step-strictly></el-input-number>\n              </el-form-item>\n\n              <el-form-item label=\"状态\" prop=\"status\">\n                <div class=\"tags\">\n                  <el-tag :type=\"computeTagType(form.status)\">{{ form.status | orderStatus }}</el-tag>\n                  <el-tag style=\"margin-left:5px;\" v-if=\"form.expired && form.status === 1\" type=\"danger\" size=\"mini\"\n                    >过期</el-tag\n                  >\n                </div>\n              </el-form-item>\n\n              <el-form-item label=\"地址\" prop=\"snap_address\">\n                <div v-if=\"form.snap_address\" class=\"address\">\n                  <div class=\"header\">\n                    <span class=\"name\">{{ form.snap_address.user_name }}</span>\n                    <span class=\"mobile\">{{ form.snap_address.mobile }}</span>\n                  </div>\n                  <div class=\"detail\">\n                    {{ form.snap_address.province }} {{ form.snap_address.city }}{{ form.snap_address.county }}\n                    **************\n                    <!-- {{ form.snap_address.detail }} -->\n                  </div>\n                </div>\n              </el-form-item>\n\n              <el-form-item label=\"详情\" prop=\"snap_items\">\n                <el-table v-if=\"form.snap_items\" stripe :data=\"form.snap_items\">\n                  <el-table-column fixed=\"left\" prop=\"id\" label=\"id\" width=\"100\"></el-table-column>\n                  <el-table-column prop=\"img\" label=\"图片\" width=\"100\">\n                    <template #default=\"scope\">\n                      <img class=\"display_img\" :src=\"scope.row.img\" :alt=\"scope.row.img\" />\n                    </template>\n                  </el-table-column>\n                  <el-table-column prop=\"title\" label=\"标题\" width=\"100\"></el-table-column>\n                  <el-table-column prop=\"single_price\" label=\"单价\" width=\"100\"></el-table-column>\n                  <el-table-column prop=\"final_price\" label=\"交易价\" min-width=\"100\"></el-table-column>\n                  <el-table-column fixed=\"right\" prop=\"count\" label=\"数量\" width=\"100\"></el-table-column>\n                </el-table>\n              </el-form-item>\n\n              <el-form-item class=\"submit\">\n                <el-button\n                  :disabled=\"actionDisabled\"\n                  v-permission=\"{ permission: ['更新订单状态'], type: 'disabled' }\"\n                  type=\"primary\"\n                  @click=\"changeOrderStatus\"\n                  >{{ actionName }}</el-button\n                >\n              </el-form-item>\n            </el-form>\n          </el-col>\n        </el-row>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport order from '@/model/order'\nimport StickyTop from '@/component/base/sticky-top/sticky-top'\n\nexport default {\n  components: { StickyTop },\n  props: {\n    orderId: {\n      type: String,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      form: {},\n    }\n  },\n  computed: {\n    actionName() {\n      if (this.form.status) {\n        switch (this.form.status) {\n          case 2:\n            return '发货'\n          case 3:\n            return '完成'\n          default:\n            return '不可操作'\n        }\n      } else {\n        return '不可操作'\n      }\n    },\n    actionDisabled() {\n      if (\n        // eslint-disable-next-line\n        this.form.status &&\n        (this.form.status === 2 || this.form.status === 3)\n      ) {\n        return false\n      }\n      return true\n    },\n  },\n  async created() {\n    this.$nextTick(async () => {\n      if (!this.isCreate) {\n        this.getOrder()\n      }\n    })\n  },\n  methods: {\n    async changeOrderStatus() {\n      const res = await order.changeOrderStatus(this.orderId, this.form.status + 1)\n      if (res.code < window.MAX_SUCCESS_CODE) {\n        this.$message.success(`${res.message}`)\n      }\n      this.getOrder()\n    },\n    async getOrder() {\n      const res = await order.getOrder(this.orderId)\n      this.form = res\n    },\n    // eslint-disable-next-line\n    async submitForm(formName) {},\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    },\n    back() {\n      this.$emit('editClose')\n    },\n    computeTagType(num) {\n      switch (num) {\n        case 0:\n          return ''\n        case 1:\n          return 'info'\n        case 2:\n          return 'success'\n        case 3:\n          return 'success'\n        case 4:\n          return 'success'\n        case 5:\n          return 'warning'\n        default:\n          return ''\n      }\n    },\n  },\n  filters: {\n    orderStatus(num) {\n      switch (num) {\n        case 0:\n          return '全部'\n        case 1:\n          return '待支付'\n        case 2:\n          return '已支付'\n        case 3:\n          return '已发货'\n        case 4:\n          return '已完成'\n        case 5:\n          return '已取消'\n        default:\n          return '全部'\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.el-divider--horizontal {\n  margin: 0;\n}\n\n.container {\n  .title {\n    height: 59px;\n    line-height: 59px;\n    color: $parent-title-color;\n    font-size: 16px;\n    font-weight: 500;\n    text-indent: 40px;\n\n    .back {\n      float: right;\n      margin-right: 40px;\n      cursor: pointer;\n    }\n  }\n\n  .wrap {\n    padding: 20px;\n  }\n\n  .submit {\n    float: left;\n  }\n}\n\n.my-autocomplete {\n  li {\n    line-height: normal;\n    padding: 7px;\n    display: inline-flex;\n    align-content: space-around;\n    .name {\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n    .id {\n      margin-right: 15px;\n      font-size: 12px;\n      color: #b4b4b4;\n    }\n\n    .highlighted .addr {\n      color: #ddd;\n    }\n  }\n}\n.white-color {\n  background-color: #fff;\n}\n\n.input-with-select .el-input-group__prepend {\n  background-color: #fff;\n}\n\n.display_img {\n  max-width: 100px;\n  max-height: 50px;\n  width: auto;\n  height: auto;\n}\n\n.address {\n  .header {\n    display: flex;\n    align-content: center;\n    .name {\n      font-weight: 600;\n      margin-right: 40px;\n    }\n    .mobile {\n      font-weight: 600;\n    }\n  }\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}