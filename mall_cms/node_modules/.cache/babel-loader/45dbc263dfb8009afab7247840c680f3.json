{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, normalizeStyle as _normalizeStyle, withCtx as _withCtx, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-1e0cc3f8\"), n = n(), _popScopeId(), n;\n};\n\nvar _hoisted_1 = {\n  style: {\n    \"height\": \"100%\"\n  }\n};\nvar _hoisted_2 = {\n  class: \"left\"\n};\nvar _hoisted_3 = {\n  class: \"operate\",\n  ref: \"operate\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_sidebar = _resolveComponent(\"sidebar\");\n\n  var _component_el_aside = _resolveComponent(\"el-aside\");\n\n  var _component_nav_bar = _resolveComponent(\"nav-bar\");\n\n  var _component_reuse_tab = _resolveComponent(\"reuse-tab\");\n\n  var _component_el_collapse_transition = _resolveComponent(\"el-collapse-transition\");\n\n  var _component_el_header = _resolveComponent(\"el-header\");\n\n  var _component_menu_tab = _resolveComponent(\"menu-tab\");\n\n  var _component_app_main = _resolveComponent(\"app-main\");\n\n  var _component_el_main = _resolveComponent(\"el-main\");\n\n  var _component_back_top = _resolveComponent(\"back-top\");\n\n  var _component_el_container = _resolveComponent(\"el-container\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_container, null, {\n    default: _withCtx(function () {\n      return [_createVNode(_component_el_aside, {\n        width: $data.sidebarWidth,\n        class: \"aside\",\n        style: _normalizeStyle($options.asideStyle)\n      }, {\n        default: _withCtx(function () {\n          return [_createVNode(_component_sidebar, {\n            isCollapse: $data.isCollapse,\n            \"is-phone\": $data.isPhone\n          }, null, 8, [\"isCollapse\", \"is-phone\"])];\n        }),\n        _: 1\n      }, 8, [\"width\", \"style\"]), _createVNode(_component_el_container, null, {\n        default: _withCtx(function () {\n          return [_createVNode(_component_el_header, {\n            class: \"header\"\n          }, {\n            default: _withCtx(function () {\n              return [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"i\", {\n                class: _normalizeClass([\"iconfont icon-fold\", {\n                  rotate: $data.foldState\n                }]),\n                onClick: _cache[0] || (_cache[0] = function () {\n                  return $options.changeSlidebarState && $options.changeSlidebarState.apply($options, arguments);\n                })\n              }, null, 2), _createVNode(_component_nav_bar)], 512), _createVNode(_component_el_collapse_transition, null, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_reuse_tab, {\n                    ref: \"reuse\"\n                  }, null, 512)];\n                }),\n                _: 1\n              })])];\n            }),\n            _: 1\n          }), _createVNode(_component_el_main, {\n            ref: \"main\"\n          }, {\n            default: _withCtx(function () {\n              return [_createVNode(_component_menu_tab), _createVNode(_component_app_main, {\n                ref: \"appMain\"\n              }, null, 512)];\n            }),\n            _: 1\n          }, 512), _createVNode(_component_back_top, {\n            right: 50,\n            bottom: 50,\n            fontSize: 34\n          })];\n        }),\n        _: 1\n      }), _createElementVNode(\"div\", {\n        class: _normalizeClass([\"sidenav-mask\", {\n          show: $data.isPhone && $data.isCollapse\n        }]),\n        onClick: _cache[1] || (_cache[1] = function () {\n          return $options.changeSlidebarState && $options.changeSlidebarState.apply($options, arguments);\n        })\n      }, null, 2)];\n    }),\n    _: 1\n  })]);\n}","map":{"version":3,"sources":["/Users/zhahn/Documents/Hahn/自考/mall/mall_cms/src/view/home/home.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div style=\"height:100%;\">\n    <el-container>\n      <el-aside :width=\"sidebarWidth\" class=\"aside\" :style=\"asideStyle\">\n        <sidebar :isCollapse=\"isCollapse\" :is-phone=\"isPhone\"></sidebar>\n      </el-aside>\n      <el-container>\n        <el-header class=\"header\">\n          <div class=\"left\">\n            <div class=\"operate\" ref=\"operate\">\n              <i class=\"iconfont icon-fold\" :class=\"{ rotate: foldState }\" @click=\"changeSlidebarState\" />\n              <nav-bar></nav-bar>\n            </div>\n            <el-collapse-transition> <reuse-tab ref=\"reuse\"></reuse-tab> </el-collapse-transition>\n          </div>\n        </el-header>\n        <el-main ref=\"main\">\n          <menu-tab></menu-tab>\n          <app-main ref=\"appMain\"></app-main>\n        </el-main>\n        <back-top :right=\"50\" :bottom=\"50\" :fontSize=\"34\"></back-top>\n      </el-container>\n      <div class=\"sidenav-mask\" :class=\"{ show: isPhone && isCollapse }\" @click=\"changeSlidebarState\"></div>\n    </el-container>\n  </div>\n</template>\n\n<script>\nimport emitter from 'lin/util/emitter'\nimport { NavBar, Sidebar, AppMain, ReuseTab, MenuTab, BackTop } from '@/component/layout'\n\nconst navBarHeight = 66 // header高度\nconst reuseTabHeight = 70 // 历史记录栏高度\nconst marginHeight = 20 // 历史记录栏与舞台的间距\nconst sidebarWidth = '210px'\nconst totalHeight = navBarHeight + reuseTabHeight + marginHeight\n\nexport default {\n  components: {\n    NavBar,\n    Sidebar,\n    AppMain,\n    ReuseTab,\n    MenuTab,\n    BackTop,\n  },\n  data() {\n    return {\n      isCollapse: false, // 左侧菜单栏是否折叠\n      sidebarWidth, // 左侧菜单栏展开的宽度\n      clientWidth: 0, // 页面宽度\n      clientHeight: 0, // 页面高度\n      foldState: false, // 控制左侧菜单栏按键\n      isPhone: false,\n    }\n  },\n  mounted() {\n    this.setResize()\n    if (this.clientWidth < 500) {\n      this.isPhone = true\n    } else {\n      this.isPhone = false\n      // 检测屏幕宽度, 确定默认是否展开\n      if (this.clientWidth <= 768) {\n        emitter.emit('removeSidebarSearch')\n        this.isCollapse = true\n      } else {\n        this.isCollapse = false\n        emitter.emit('showSidebarSearch')\n      }\n    }\n    // 监测屏幕宽度 折叠左侧菜单栏\n    window.onresize = () => {\n      this.setResize()\n      if (this.clientWidth <= 500) {\n        this.isPhone = true\n      } else if (this.clientWidth <= 800) {\n        this.isPhone = false\n      }\n\n      // if (_this.clientWidth <= 768) {\n      //   // 页面宽度 768\n      //   if (_this.isCollapse === false) {\n      //     _this.eventBus.$emit('removeSidebarSearch')\n      //     _this.isCollapse = true\n      //   }\n      // } else if (_this.isCollapse === true) {\n      //   _this.eventBus.$emit('showSidebarSearch')\n      //   _this.isCollapse = false\n      // }\n    }\n\n    emitter.on('noReuse', () => {\n      this.$refs.operate.style.height = '86px'\n    })\n    emitter.on('hasReuse', () => {\n      this.$refs.operate.style.height = '45px'\n    })\n  },\n  computed: {\n    elMenuCollapse() {\n      if (this.isPhone) {\n        return false\n      }\n\n      return this.isCollapse\n    },\n    asideStyle() {\n      const style = {}\n      if (this.isPhone) {\n        style.position = 'absolute'\n        style.height = `${this.clientHeight}px`\n        style.zIndex = 12\n        if (this.isCollapse === false) {\n          style.transform = `translateX(-${sidebarWidth})`\n        } else {\n          style.transform = 'translateX(0)'\n        }\n      }\n      return style\n    },\n  },\n  methods: {\n    // 控制菜单折叠\n    changeSlidebarState() {\n      this.isCollapse = !this.isCollapse\n      if (this.isCollapse) {\n        emitter.emit('removeSidebarSearch')\n      } else {\n        emitter.emit('showSidebarSearch')\n      }\n      this.foldState = !this.foldState\n    },\n    // 响应页面的宽度高度变化\n    setResize() {\n      this.clientHeight = document.body.clientHeight\n      this.clientWidth = document.body.clientWidth\n      this.$refs.appMain.$el.style.minHeight = `${this.clientHeight - totalHeight + 20}px`\n    },\n  },\n  watch: {\n    isCollapse() {\n      if (this.isPhone) {\n        // 手机模式\n        this.sidebarWidth = sidebarWidth\n        if (this.isCollapse === false) {\n          this.transX = 0\n        } else {\n          this.transX = -1 * sidebarWidth\n        }\n      } else {\n        this.transX = 0\n        this.sidebarWidth = this.isCollapse === false ? sidebarWidth : '64px'\n      }\n    },\n    $route() {\n      this.showBackTop = false\n      if (this.scrollY <= 70) {\n        // MenuTab组件高度\n        this.backTop()\n      }\n      if (this.isPhone && this.isCollapse) {\n        this.changeSlidebarState()\n      }\n    },\n  },\n\n  beforeUnmount() {\n    emitter.off('noReuse')\n    emitter.off('hasReuse')\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.aside {\n  background: rgb(25, 42, 94);\n  overflow-x: hidden;\n\n  &::-webkit-scrollbar {\n    width: 0px;\n    height: 0px;\n  }\n}\n\n.header {\n  padding: 0;\n  background: $header-background;\n  height: $header-height !important;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  box-shadow: 0px 2px 6px 0px rgba(190, 204, 216, 0.4);\n  border-bottom: 1px solid rgba(190, 204, 216, 0.4);\n\n  .left {\n    height: 100%;\n    width: 100%;\n\n    .operate {\n      display: flex;\n      align-items: center;\n      background: $header-background;\n      padding-left: 20px;\n      height: 86px;\n\n      .iconfont {\n        font-size: 16px;\n        font-weight: 500;\n        color: $right-side-font-color;\n        cursor: pointer;\n        transform: rotate(0deg);\n        transition: all 0.3s linear;\n        margin-right: 10px;\n\n        &:hover {\n          color: #3963bc;\n        }\n      }\n\n      .rotate {\n        transform: rotate(180deg);\n        transition: all 0.3s linear;\n      }\n    }\n  }\n\n  .right-info {\n    display: flex;\n    align-items: center;\n  }\n}\n\n.el-main {\n  overflow-y: auto;\n  position: relative;\n  padding: 0;\n}\n\n.backTop {\n  position: fixed;\n  display: inline-block;\n  text-align: center;\n  cursor: pointer;\n  right: 50px;\n  bottom: 50px;\n  width: 22px;\n  height: 22px;\n  line-height: 22px;\n  border-radius: 50%;\n  z-index: 99;\n  background: #fff;\n\n  .iconfont {\n    font-size: 36px;\n  }\n}\n\n.sidenav-mask {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.3);\n  z-index: 10;\n  display: none;\n  cursor: pointer;\n\n  &.show {\n    display: block;\n  }\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}