{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, resolveDirective as _resolveDirective, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-2444c4de\"), n = n(), _popScopeId(), n;\n};\n\nvar _hoisted_1 = {\n  key: 0,\n  class: \"container\"\n};\n\nvar _hoisted_2 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"div\", {\n    class: \"header\"\n  }, [/*#__PURE__*/_createElementVNode(\"div\", {\n    class: \"title\"\n  }, \"图书列表\")], -1\n  /* HOISTED */\n  );\n});\n\nvar _hoisted_3 = /*#__PURE__*/_createTextVNode(\"编辑\");\n\nvar _hoisted_4 = /*#__PURE__*/_createTextVNode(\"删除\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_el_table_column = _resolveComponent(\"el-table-column\");\n\n  var _component_el_button = _resolveComponent(\"el-button\");\n\n  var _component_el_table = _resolveComponent(\"el-table\");\n\n  var _component_book_modify = _resolveComponent(\"book-modify\");\n\n  var _directive_permission = _resolveDirective(\"permission\");\n\n  var _directive_loading = _resolveDirective(\"loading\");\n\n  return _openBlock(), _createElementBlock(\"div\", null, [_createCommentVNode(\" 列表页面 \"), !$setup.showEdit ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createCommentVNode(\" 表格 \"), _withDirectives(_createVNode(_component_el_table, {\n    data: $setup.books\n  }, {\n    default: _withCtx(function () {\n      return [_createVNode(_component_el_table_column, {\n        type: \"index\",\n        index: $setup.indexMethod,\n        label: \"id\",\n        width: \"100\"\n      }, null, 8\n      /* PROPS */\n      , [\"index\"]), _createVNode(_component_el_table_column, {\n        prop: \"title\",\n        label: \"图片\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"author\",\n        label: \"标题\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"操作\",\n        fixed: \"分类id\"\n      }, {\n        default: _withCtx(function (scope) {\n          return [_createVNode(_component_el_button, {\n            plain: \"\",\n            size: \"small\",\n            type: \"primary\",\n            onClick: function onClick($event) {\n              return $setup.handleEdit(scope.row.id);\n            }\n          }, {\n            default: _withCtx(function () {\n              return [_hoisted_3];\n            }),\n            _: 2\n            /* DYNAMIC */\n\n          }, 1032\n          /* PROPS, DYNAMIC_SLOTS */\n          , [\"onClick\"]), _withDirectives(_createVNode(_component_el_button, {\n            plain: \"\",\n            size: \"small\",\n            type: \"danger\",\n            onClick: function onClick($event) {\n              return $setup.handleDelete(scope.row.id);\n            }\n          }, {\n            default: _withCtx(function () {\n              return [_hoisted_4];\n            }),\n            _: 2\n            /* DYNAMIC */\n\n          }, 1032\n          /* PROPS, DYNAMIC_SLOTS */\n          , [\"onClick\"]), [[_directive_permission, {\n            permission: '删除图书',\n            type: 'disabled'\n          }]])];\n        }),\n        _: 1\n        /* STABLE */\n\n      })];\n    }),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"data\"]), [[_directive_loading, $setup.loading]])])) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" 编辑页面 \"), _createVNode(_component_book_modify, {\n    onEditClose: $setup.editClose,\n    editBookId: $setup.editBookId\n  }, null, 8\n  /* PROPS */\n  , [\"onEditClose\", \"editBookId\"])], 2112\n  /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */\n  ))]);\n}","map":{"version":3,"sources":["/Users/zhahn/Documents/Hahn/自考/项目/mall_cms/src/view/grid-category/grid-category-list.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <!-- 列表页面 -->\n    <div class=\"container\" v-if=\"!showEdit\">\n      <div class=\"header\">\n        <div class=\"title\">图书列表</div>\n      </div>\n      <!-- 表格 -->\n      <el-table :data=\"books\" v-loading=\"loading\">\n        <el-table-column type=\"index\" :index=\"indexMethod\" label=\"id\" width=\"100\"></el-table-column>\n        <el-table-column prop=\"title\" label=\"图片\"></el-table-column>\n        <el-table-column prop=\"author\" label=\"标题\"></el-table-column>\n        <el-table-column label=\"操作\" fixed=\"分类id\">\n          <template #default=\"scope\">\n            <el-button plain size=\"small\" type=\"primary\" @click=\"handleEdit(scope.row.id)\">编辑</el-button>\n            <el-button\n              plain\n              size=\"small\"\n              type=\"danger\"\n              @click=\"handleDelete(scope.row.id)\"\n              v-permission=\"{ permission: '删除图书', type: 'disabled' }\"\n              >删除</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n\n    <!-- 编辑页面 -->\n    <book-modify v-else @editClose=\"editClose\" :editBookId=\"editBookId\"></book-modify>\n  </div>\n</template>\n\n<script>\nimport { onMounted, ref } from 'vue'\nimport { ElMessageBox, ElMessage } from 'element-plus'\nimport bookModel from '@/model/book'\n// import BookModify from '../book'\n\nexport default {\n  components: {\n    // BookModify,\n  },\n  setup() {\n    const books = ref([])\n    const editBookId = ref(1)\n    const loading = ref(false)\n    const showEdit = ref(false)\n\n    onMounted(() => {\n      getBooks()\n    })\n\n    const getBooks = async () => {\n      try {\n        loading.value = true\n        books.value = await bookModel.getBooks()\n        loading.value = false\n      } catch (error) {\n        loading.value = false\n        if (error.code === 10020) {\n          books.value = []\n        }\n      }\n    }\n\n    const handleEdit = id => {\n      showEdit.value = true\n      editBookId.value = id\n    }\n\n    const handleDelete = id => {\n      ElMessageBox.confirm('此操作将永久删除该图书, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n      }).then(async () => {\n        const res = await bookModel.deleteBook(id)\n        if (res.code < window.MAX_SUCCESS_CODE) {\n          getBooks()\n          ElMessage.success(`${res.message}`)\n        }\n      })\n    }\n\n    const editClose = () => {\n      showEdit.value = false\n      getBooks()\n    }\n\n    const indexMethod = index => index + 1\n\n    return {\n      books,\n      loading,\n      showEdit,\n      editClose,\n      handleEdit,\n      editBookId,\n      indexMethod,\n      handleDelete,\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  padding: 0 30px;\n\n  .header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    .title {\n      height: 59px;\n      line-height: 59px;\n      color: $parent-title-color;\n      font-size: 16px;\n      font-weight: 500;\n    }\n  }\n\n  .pagination {\n    display: flex;\n    justify-content: flex-end;\n    margin: 20px;\n  }\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}