{"ast":null,"code":"import _toConsumableArray from \"/Users/zhahn/Documents/Hahn/\\u81EA\\u8003/\\u9879\\u76EE/mall_cms/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.array.flat.js\";\nimport \"core-js/modules/es.array.unscopables.flat.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport { cloneDeep, throttle, debounce } from 'lodash';\n/* eslint-disable */\n\nvar Utils = {};\n/** 参数说明：\n * 根据长度截取先使用字符串，超长部分追加…\n * str 对象字符串\n * len 目标字节长度\n * 返回值： 处理结果字符串\n */\n\nUtils.cutString = function (str, len) {\n  if (str.length * 2 <= len) {\n    return str;\n  }\n\n  var strlen = 0;\n  var s = '';\n\n  for (var i = 0; i < str.length; i++) {\n    // eslint-disable-line\n    s += str.charAt(i);\n\n    if (str.charCodeAt(i) > 128) {\n      strlen += 2;\n\n      if (strlen >= len) {\n        return \"\".concat(s.substring(0, s.length - 1), \"...\");\n      }\n    } else {\n      strlen += 1;\n\n      if (strlen >= len) {\n        return \"\".concat(s.substring(0, s.length - 2), \"...\");\n      }\n    }\n  }\n\n  return s;\n};\n/**\n * 简单数组的交集\n * @param {Array} a\n * @param {Array} b\n */\n\n\nUtils.getIntersect = function (a, b) {\n  if (a.constructor === Array && b.constructor === Array) {\n    var set1 = new Set(a);\n    var set2 = new Set(b);\n    return Array.from(new Set(_toConsumableArray(set1).filter(function (x) {\n      return set2.has(x);\n    })));\n  }\n\n  return null;\n};\n/**\n * 防抖函数\n * @param {*} func 函数体\n * @param {*} wait 延时\n */\n\n\nUtils.debounce = function (func) {\n  var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 50;\n  return debounce(func, wait);\n};\n/**\n * 节流函数\n * @param {*} func 函数体\n * @param {*} wait 延时\n */\n\n\nUtils.throttle = function (func) {\n  var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 50;\n  return throttle(func, wait);\n};\n/**\n * 返回 n 位的随机字符串\n * @param {Number} n\n */\n\n\nUtils.getRandomStr = function () {\n  var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 6;\n  var str = '';\n  var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890';\n\n  for (var i = 0; i < n; i += 1) {\n    str += chars.charAt(Math.floor(Math.random() * 62));\n  }\n\n  return str;\n};\n\nfunction getTypeOf(obj) {\n  var toString = Object.prototype.toString;\n  var map = {\n    '[object Boolean]': 'boolean',\n    '[object Number]': 'number',\n    '[object String]': 'string',\n    '[object Function]': 'function',\n    '[object Array]': 'array',\n    '[object Date]': 'date',\n    '[object RegExp]': 'regExp',\n    '[object Undefined]': 'undefined',\n    '[object Null]': 'null',\n    '[object Object]': 'object',\n    '[object Symbol]': 'symbol'\n  };\n  return map[toString.call(obj)];\n}\n\nfunction groupByOrder(source) {\n  // 有order的放这里\n  var map = {}; // 没有order放这里\n\n  var noOrderList = [];\n  source.forEach(function (s) {\n    var order = s.order;\n\n    if (typeof order !== 'number') {\n      noOrderList.push(s);\n      return;\n    }\n\n    var list = map[order];\n\n    if (list) {\n      list.push(s);\n    } else {\n      map[order] = [s];\n    }\n  });\n  return {\n    orderMap: map,\n    noOrderList: noOrderList\n  };\n}\n/**\n * 根据数组的 order 字段排序\n * @param {Array} source\n */\n\n\nUtils.sortByOrder = function () {\n  var source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n  if (!Array.isArray(source)) {\n    var message = 'sortByOrder 传入参数不符合要求, 应为数组';\n    console.error(message);\n    throw new Error(message);\n  }\n\n  if (!source.length) {\n    return source;\n  } // 1.根据order对数据进行分组\n\n\n  var _groupByOrder = groupByOrder(source),\n      orderMap = _groupByOrder.orderMap,\n      noOrderList = _groupByOrder.noOrderList; // 2.获取已存在的order\n\n\n  var orders = Object.keys(orderMap).map(function (o) {\n    return Number(o);\n  }); // 对order进行排序\n\n  orders.sort(function (a, b) {\n    return a - b;\n  }); // 小于0的order\n\n  var ltZeroOrders = orders.filter(function (o) {\n    return o < 0;\n  }); // 大于等于0的order\n\n  var gteZeroOrders = orders.filter(function (o) {\n    return o >= 0;\n  });\n  var finallyArr = [];\n  var gteZeroItemList = gteZeroOrders.map(function (o) {\n    return orderMap[o];\n  }).flat();\n  finallyArr.push.apply(finallyArr, _toConsumableArray(gteZeroItemList));\n  finallyArr.push.apply(finallyArr, _toConsumableArray(noOrderList)); // 如果没有小于0的order，则直接拼接\n\n  if (!ltZeroOrders.length) {\n    return finallyArr;\n  } // 将小于0的order的item插入到数组中\n\n\n  ltZeroOrders.reverse().forEach(function (o) {\n    var index = finallyArr.length + o + 1;\n\n    if (index < 0) {\n      index = 0;\n    }\n\n    var arr = orderMap[o];\n    finallyArr.splice.apply(finallyArr, [index, 0].concat(_toConsumableArray(arr)));\n  });\n  return finallyArr;\n};\n/**\n * 深度遍历，深拷贝\n * @param {*} data\n */\n\n\nUtils.deepClone = function (data) {\n  return cloneDeep(data);\n};\n/**\n * 中划线转驼峰\n */\n\n\nUtils.came = function (str) {\n  return \"\".concat(str).replace(/-\\D/g, function (match) {\n    return match.charAt(1).toUpperCase();\n  });\n};\n/**\n * 判断权限\n */\n\n\nUtils.hasPermission = function (permissions, route, user) {\n  // eslint-disable-line\n  if (user !== null && user !== void 0 && user.admin) {\n    return true;\n  }\n\n  if (route.permission) {\n    return permissions.some(function (permission) {\n      return route.permission.indexOf(permission) > -1;\n    });\n  }\n\n  return true;\n};\n\nvar cached;\n/**\n * 获取窗口滚动条大小, From: https://github.com/react-component/util/blob/master/src/getScrollBarSize.js\n * @param {boolean} fresh 强制重新计算\n * @returns {number}\n */\n\nexport function getScrollBarSize(fresh) {\n  if (fresh || cached === undefined) {\n    var inner = document.createElement('div');\n    inner.style.width = '100%';\n    inner.style.height = '200px';\n    var outer = document.createElement('div');\n    var outerStyle = outer.style;\n    outerStyle.position = 'absolute';\n    outerStyle.top = 0;\n    outerStyle.left = 0;\n    outerStyle.pointerEvents = 'none';\n    outerStyle.visibility = 'hidden';\n    outerStyle.width = '200px';\n    outerStyle.height = '150px';\n    outerStyle.overflow = 'hidden';\n    outer.appendChild(inner);\n    document.body.appendChild(outer);\n    var widthContained = inner.offsetWidth;\n    outer.style.overflow = 'scroll';\n    var widthScroll = inner.offsetWidth;\n\n    if (widthContained === widthScroll) {\n      widthScroll = outer.clientWidth;\n    }\n\n    document.body.removeChild(outer);\n    cached = widthContained - widthScroll;\n  }\n\n  return cached;\n}\nexport default Utils;","map":{"version":3,"sources":["/Users/zhahn/Documents/Hahn/自考/项目/mall_cms/src/lin/util/util.js"],"names":["cloneDeep","throttle","debounce","Utils","cutString","str","len","length","strlen","s","i","charAt","charCodeAt","substring","getIntersect","a","b","constructor","Array","set1","Set","set2","from","filter","x","has","func","wait","getRandomStr","n","chars","Math","floor","random","getTypeOf","obj","toString","Object","prototype","map","call","groupByOrder","source","noOrderList","forEach","order","push","list","orderMap","sortByOrder","isArray","message","console","error","Error","orders","keys","o","Number","sort","ltZeroOrders","gteZeroOrders","finallyArr","gteZeroItemList","flat","reverse","index","arr","splice","deepClone","data","came","replace","match","toUpperCase","hasPermission","permissions","route","user","admin","permission","some","indexOf","cached","getScrollBarSize","fresh","undefined","inner","document","createElement","style","width","height","outer","outerStyle","position","top","left","pointerEvents","visibility","overflow","appendChild","body","widthContained","offsetWidth","widthScroll","clientWidth","removeChild"],"mappings":"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","sourcesContent":["import { cloneDeep, throttle, debounce } from 'lodash'\n\n/* eslint-disable */\nconst Utils = {}\n\n/** 参数说明：\n * 根据长度截取先使用字符串，超长部分追加…\n * str 对象字符串\n * len 目标字节长度\n * 返回值： 处理结果字符串\n */\nUtils.cutString = (str, len) => {\n  if (str.length * 2 <= len) {\n    return str\n  }\n  let strlen = 0\n  let s = ''\n  for (let i = 0; i < str.length; i++) {\n    // eslint-disable-line\n    s += str.charAt(i)\n    if (str.charCodeAt(i) > 128) {\n      strlen += 2\n      if (strlen >= len) {\n        return `${s.substring(0, s.length - 1)}...`\n      }\n    } else {\n      strlen += 1\n      if (strlen >= len) {\n        return `${s.substring(0, s.length - 2)}...`\n      }\n    }\n  }\n  return s\n}\n\n/**\n * 简单数组的交集\n * @param {Array} a\n * @param {Array} b\n */\nUtils.getIntersect = (a, b) => {\n  if (a.constructor === Array && b.constructor === Array) {\n    const set1 = new Set(a)\n    const set2 = new Set(b)\n    return Array.from(new Set([...set1].filter(x => set2.has(x))))\n  }\n  return null\n}\n\n/**\n * 防抖函数\n * @param {*} func 函数体\n * @param {*} wait 延时\n */\nUtils.debounce = (func, wait = 50) => debounce(func, wait)\n\n/**\n * 节流函数\n * @param {*} func 函数体\n * @param {*} wait 延时\n */\nUtils.throttle = (func, wait = 50) => throttle(func, wait)\n\n/**\n * 返回 n 位的随机字符串\n * @param {Number} n\n */\nUtils.getRandomStr = (n = 6) => {\n  let str = ''\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890'\n  for (let i = 0; i < n; i += 1) {\n    str += chars.charAt(Math.floor(Math.random() * 62))\n  }\n  return str\n}\n\nfunction getTypeOf(obj) {\n  const { toString } = Object.prototype\n  const map = {\n    '[object Boolean]': 'boolean',\n    '[object Number]': 'number',\n    '[object String]': 'string',\n    '[object Function]': 'function',\n    '[object Array]': 'array',\n    '[object Date]': 'date',\n    '[object RegExp]': 'regExp',\n    '[object Undefined]': 'undefined',\n    '[object Null]': 'null',\n    '[object Object]': 'object',\n    '[object Symbol]': 'symbol',\n  }\n  return map[toString.call(obj)]\n}\n\nfunction groupByOrder(source) {\n  // 有order的放这里\n  const map = {}\n  // 没有order放这里\n  const noOrderList = []\n\n  source.forEach(s => {\n    const { order } = s\n    if (typeof order !== 'number') {\n      noOrderList.push(s)\n      return\n    }\n\n    const list = map[order]\n    if (list) {\n      list.push(s)\n    } else {\n      map[order] = [s]\n    }\n  })\n\n  return {\n    orderMap: map,\n    noOrderList,\n  }\n}\n\n/**\n * 根据数组的 order 字段排序\n * @param {Array} source\n */\nUtils.sortByOrder = (source = []) => {\n  if (!Array.isArray(source)) {\n    const message = 'sortByOrder 传入参数不符合要求, 应为数组'\n    console.error(message)\n    throw new Error(message)\n  }\n\n  if (!source.length) {\n    return source\n  }\n\n  // 1.根据order对数据进行分组\n  const { orderMap, noOrderList } = groupByOrder(source)\n\n  // 2.获取已存在的order\n  const orders = Object.keys(orderMap).map(o => Number(o))\n\n  // 对order进行排序\n  orders.sort((a, b) => a - b)\n\n  // 小于0的order\n  const ltZeroOrders = orders.filter(o => o < 0)\n\n  // 大于等于0的order\n  const gteZeroOrders = orders.filter(o => o >= 0)\n\n  const finallyArr = []\n  const gteZeroItemList = gteZeroOrders.map(o => orderMap[o]).flat()\n\n  finallyArr.push(...gteZeroItemList)\n  finallyArr.push(...noOrderList)\n\n  // 如果没有小于0的order，则直接拼接\n  if (!ltZeroOrders.length) {\n    return finallyArr\n  }\n\n  // 将小于0的order的item插入到数组中\n  ltZeroOrders.reverse().forEach(o => {\n    let index = finallyArr.length + o + 1\n    if (index < 0) {\n      index = 0\n    }\n\n    const arr = orderMap[o]\n    finallyArr.splice(index, 0, ...arr)\n  })\n\n  return finallyArr\n}\n\n/**\n * 深度遍历，深拷贝\n * @param {*} data\n */\nUtils.deepClone = data => cloneDeep(data)\n\n/**\n * 中划线转驼峰\n */\nUtils.came = str => {\n  return `${str}`.replace(/-\\D/g, match => match.charAt(1).toUpperCase())\n}\n\n/**\n * 判断权限\n */\nUtils.hasPermission = (permissions, route, user) => {\n  // eslint-disable-line\n  if (user?.admin) {\n    return true\n  }\n  if (route.permission) {\n    return permissions.some(permission => route.permission.indexOf(permission) > -1)\n  }\n  return true\n}\n\nlet cached\n/**\n * 获取窗口滚动条大小, From: https://github.com/react-component/util/blob/master/src/getScrollBarSize.js\n * @param {boolean} fresh 强制重新计算\n * @returns {number}\n */\nexport function getScrollBarSize(fresh) {\n  if (fresh || cached === undefined) {\n    const inner = document.createElement('div')\n    inner.style.width = '100%'\n    inner.style.height = '200px'\n\n    const outer = document.createElement('div')\n    const outerStyle = outer.style\n\n    outerStyle.position = 'absolute'\n    outerStyle.top = 0\n    outerStyle.left = 0\n    outerStyle.pointerEvents = 'none'\n    outerStyle.visibility = 'hidden'\n    outerStyle.width = '200px'\n    outerStyle.height = '150px'\n    outerStyle.overflow = 'hidden'\n\n    outer.appendChild(inner)\n\n    document.body.appendChild(outer)\n\n    const widthContained = inner.offsetWidth\n    outer.style.overflow = 'scroll'\n    let widthScroll = inner.offsetWidth\n\n    if (widthContained === widthScroll) {\n      widthScroll = outer.clientWidth\n    }\n\n    document.body.removeChild(outer)\n\n    cached = widthContained - widthScroll\n  }\n  return cached\n}\n\nexport default Utils\n"]},"metadata":{},"sourceType":"module"}