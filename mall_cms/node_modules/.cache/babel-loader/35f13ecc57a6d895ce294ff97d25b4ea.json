{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, resolveDirective as _resolveDirective, withDirectives as _withDirectives, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-3bc30f69\"), n = n(), _popScopeId(), n;\n};\n\nvar _hoisted_1 = {\n  class: \"title\"\n};\n\nvar _hoisted_2 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"i\", {\n    class: \"iconfont icon-fanhui\"\n  }, null, -1\n  /* HOISTED */\n  );\n});\n\nvar _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 返回 \");\n\nvar _hoisted_4 = [_hoisted_2, _hoisted_3];\nvar _hoisted_5 = {\n  class: \"container\"\n};\nvar _hoisted_6 = {\n  class: \"wrap\"\n};\n\nvar _hoisted_7 = /*#__PURE__*/_createTextVNode(\"保 存\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_el_divider = _resolveComponent(\"el-divider\");\n\n  var _component_sticky_top = _resolveComponent(\"sticky-top\");\n\n  var _component_el_input = _resolveComponent(\"el-input\");\n\n  var _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  var _component_el_option = _resolveComponent(\"el-option\");\n\n  var _component_el_select = _resolveComponent(\"el-select\");\n\n  var _component_el_date_picker = _resolveComponent(\"el-date-picker\");\n\n  var _component_upload_imgs = _resolveComponent(\"upload-imgs\");\n\n  var _component_el_button = _resolveComponent(\"el-button\");\n\n  var _component_el_form = _resolveComponent(\"el-form\");\n\n  var _component_el_col = _resolveComponent(\"el-col\");\n\n  var _component_el_row = _resolveComponent(\"el-row\");\n\n  var _component_coupon_list = _resolveComponent(\"coupon-list\");\n\n  var _directive_permission = _resolveDirective(\"permission\");\n\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_sticky_top, null, {\n    default: _withCtx(function () {\n      return [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"span\", null, _toDisplayString($props.isCreate ? '创建优惠卷' : '更新优惠卷'), 1\n      /* TEXT */\n      ), _createElementVNode(\"span\", {\n        class: \"back\",\n        onClick: _cache[0] || (_cache[0] = function () {\n          return $options.back && $options.back.apply($options, arguments);\n        })\n      }, _hoisted_4), _createVNode(_component_el_divider)])];\n    }),\n    _: 1\n    /* STABLE */\n\n  }), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_row, null, {\n    default: _withCtx(function () {\n      return [_createVNode(_component_el_col, {\n        lg: 16,\n        md: 20,\n        sm: 24,\n        xs: 24\n      }, {\n        default: _withCtx(function () {\n          return [_createVNode(_component_el_form, {\n            model: $data.form,\n            \"status-icon\": \"\",\n            ref: \"form\",\n            \"label-width\": \"100px\",\n            onSubmit: _cache[8] || (_cache[8] = _withModifiers(function () {}, [\"prevent\"]))\n          }, {\n            default: _withCtx(function () {\n              return [_createVNode(_component_el_form_item, {\n                label: \"标题\",\n                prop: \"title\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input, {\n                    size: \"medium\",\n                    modelValue: $data.form.title,\n                    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n                      return $data.form.title = $event;\n                    }),\n                    placeholder: \"请填写优惠卷标题\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"名称\",\n                prop: \"name\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input, {\n                    size: \"medium\",\n                    modelValue: $data.form.name,\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n                      return $data.form.name = $event;\n                    }),\n                    placeholder: \"请填写优惠卷名称\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"提示\",\n                prop: \"remark\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input, {\n                    size: \"medium\",\n                    modelValue: $data.form.remark,\n                    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n                      return $data.form.remark = $event;\n                    }),\n                    placeholder: \"请填写优惠卷提示\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"状态\",\n                prop: \"online\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_select, {\n                    modelValue: $data.form.online,\n                    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = function ($event) {\n                      return $data.form.online = $event;\n                    }),\n                    placeholder: \"请填写状态\"\n                  }, {\n                    default: _withCtx(function () {\n                      return [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.types, function (item, index) {\n                        return _openBlock(), _createBlock(_component_el_option, {\n                          key: item,\n                          label: item,\n                          value: index\n                        }, null, 8\n                        /* PROPS */\n                        , [\"label\", \"value\"]);\n                      }), 128\n                      /* KEYED_FRAGMENT */\n                      ))];\n                    }),\n                    _: 1\n                    /* STABLE */\n\n                  }, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"时间\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_date_picker, {\n                    modelValue: $data.range,\n                    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = function ($event) {\n                      return $data.range = $event;\n                    }),\n                    type: \"daterange\",\n                    align: \"right\",\n                    \"unlink-panels\": \"\",\n                    \"range-separator\": \"至\",\n                    \"start-placeholder\": \"开始日期\",\n                    \"end-placeholder\": \"结束日期\",\n                    \"picker-options\": $data.pickerOptions\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\", \"picker-options\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createCommentVNode(\" <el-form-item label=\\\"选择分类\\\" prop=\\\"categoryIds\\\">\\n                <el-cascader placeholder=\\\"选择分类\\\" v-model=\\\"categoryIds\\\" :props=\\\"cascaderCategoryProps\\\"></el-cascader>\\n              </el-form-item>\"), _createCommentVNode(\" <el-form-item label=\\\"选择优惠卷\\\" prop=\\\"couponIds\\\">\\n                <el-cascader placeholder=\\\"选择优惠卷\\\" v-model=\\\"couponIds\\\" :props=\\\"cascaderCouponProps\\\"></el-cascader>\\n              </el-form-item>\"), _createVNode(_component_el_form_item, {\n                label: \"主图\",\n                prop: \"cover_img\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_upload_imgs, {\n                    \"max-num\": $data.maxNum,\n                    ref: \"uploadCoverEle\",\n                    rules: $data.rules,\n                    value: $data.initCoverData\n                  }, null, 8\n                  /* PROPS */\n                  , [\"max-num\", \"rules\", \"value\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"顶部图\",\n                prop: \"internal_top_img\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_upload_imgs, {\n                    \"max-num\": $data.maxNum,\n                    ref: \"uploadTopEle\",\n                    rules: $data.rules,\n                    value: $data.initTopData\n                  }, null, 8\n                  /* PROPS */\n                  , [\"max-num\", \"rules\", \"value\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                label: \"描述\",\n                prop: \"description\"\n              }, {\n                default: _withCtx(function () {\n                  return [_createVNode(_component_el_input, {\n                    size: \"medium\",\n                    modelValue: $data.form.description,\n                    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = function ($event) {\n                      return $data.form.description = $event;\n                    }),\n                    placeholder: \"请填写优惠卷描述\"\n                  }, null, 8\n                  /* PROPS */\n                  , [\"modelValue\"])];\n                }),\n                _: 1\n                /* STABLE */\n\n              }), _createVNode(_component_el_form_item, {\n                class: \"submit\"\n              }, {\n                default: _withCtx(function () {\n                  return [_withDirectives(_createVNode(_component_el_button, {\n                    type: \"primary\",\n                    onClick: _cache[7] || (_cache[7] = function ($event) {\n                      return $options.submitForm('form');\n                    })\n                  }, {\n                    default: _withCtx(function () {\n                      return [_hoisted_7];\n                    }),\n                    _: 1\n                    /* STABLE */\n\n                  }, 512\n                  /* NEED_PATCH */\n                  ), [[_directive_permission, {\n                    permission: ['创建活动', '更新活动'],\n                    type: 'disabled'\n                  }]]), _createCommentVNode(\" <el-button @click=\\\"resetForm('form')\\\">重 置</el-button> \")];\n                }),\n                _: 1\n                /* STABLE */\n\n              })];\n            }),\n            _: 1\n            /* STABLE */\n\n          }, 8\n          /* PROPS */\n          , [\"model\"])];\n        }),\n        _: 1\n        /* STABLE */\n\n      })];\n    }),\n    _: 1\n    /* STABLE */\n\n  })]), !$props.isCreate ? (_openBlock(), _createBlock(_component_coupon_list, {\n    key: 0,\n    activityId: $props.activityId\n  }, null, 8\n  /* PROPS */\n  , [\"activityId\"])) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"sources":["/Users/zhahn/Documents/Hahn/自考/mall/mall_cms/src/view/activity/activity-edit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <sticky-top>\n      <div class=\"title\">\n        <span>{{ isCreate ? '创建优惠卷' : '更新优惠卷' }}</span>\n        <span class=\"back\" @click=\"back\"> <i class=\"iconfont icon-fanhui\"></i> 返回 </span>\n        <el-divider></el-divider>\n      </div>\n    </sticky-top>\n    <div class=\"container\">\n      <div class=\"wrap\">\n        <el-row>\n          <el-col :lg=\"16\" :md=\"20\" :sm=\"24\" :xs=\"24\">\n            <el-form :model=\"form\" status-icon ref=\"form\" label-width=\"100px\" @submit.native.prevent>\n              <el-form-item label=\"标题\" prop=\"title\">\n                <el-input size=\"medium\" v-model=\"form.title\" placeholder=\"请填写优惠卷标题\"></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"名称\" prop=\"name\">\n                <el-input size=\"medium\" v-model=\"form.name\" placeholder=\"请填写优惠卷名称\"></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"提示\" prop=\"remark\">\n                <el-input size=\"medium\" v-model=\"form.remark\" placeholder=\"请填写优惠卷提示\"></el-input>\n              </el-form-item>\n\n              <el-form-item label=\"状态\" prop=\"online\">\n                <el-select v-model=\"form.online\" placeholder=\"请填写状态\">\n                  <el-option v-for=\"(item, index) in types\" :key=\"item\" :label=\"item\" :value=\"index\"></el-option>\n                </el-select>\n              </el-form-item>\n\n              <el-form-item label=\"时间\">\n                <el-date-picker\n                  v-model=\"range\"\n                  type=\"daterange\"\n                  align=\"right\"\n                  unlink-panels\n                  range-separator=\"至\"\n                  start-placeholder=\"开始日期\"\n                  end-placeholder=\"结束日期\"\n                  :picker-options=\"pickerOptions\"\n                ></el-date-picker>\n              </el-form-item>\n\n              <!-- <el-form-item label=\"选择分类\" prop=\"categoryIds\">\n                <el-cascader placeholder=\"选择分类\" v-model=\"categoryIds\" :props=\"cascaderCategoryProps\"></el-cascader>\n              </el-form-item>-->\n\n              <!-- <el-form-item label=\"选择优惠卷\" prop=\"couponIds\">\n                <el-cascader placeholder=\"选择优惠卷\" v-model=\"couponIds\" :props=\"cascaderCouponProps\"></el-cascader>\n              </el-form-item>-->\n\n              <el-form-item label=\"主图\" prop=\"cover_img\">\n                <upload-imgs :max-num=\"maxNum\" ref=\"uploadCoverEle\" :rules=\"rules\" :value=\"initCoverData\" />\n              </el-form-item>\n\n              <el-form-item label=\"顶部图\" prop=\"internal_top_img\">\n                <upload-imgs :max-num=\"maxNum\" ref=\"uploadTopEle\" :rules=\"rules\" :value=\"initTopData\" />\n              </el-form-item>\n\n              <el-form-item label=\"描述\" prop=\"description\">\n                <el-input size=\"medium\" v-model=\"form.description\" placeholder=\"请填写优惠卷描述\"></el-input>\n              </el-form-item>\n\n              <el-form-item class=\"submit\">\n                <el-button\n                  v-permission=\"{ permission: ['创建活动', '更新活动'], type: 'disabled' }\"\n                  type=\"primary\"\n                  @click=\"submitForm('form')\"\n                  >保 存</el-button\n                >\n                <!-- <el-button @click=\"resetForm('form')\">重 置</el-button> -->\n              </el-form-item>\n            </el-form>\n          </el-col>\n        </el-row>\n      </div>\n      <coupon-list v-if=\"!isCreate\" :activityId=\"activityId\"></coupon-list>\n    </div>\n  </div>\n</template>\n\n<script>\nimport dayjs from 'dayjs'\nimport Activity from '@/model/activity'\nimport Category from '@/model/category'\nimport coupon from '@/model/coupon'\nimport UploadImgs from '@/component/base/upload-image'\nimport CouponList from '../coupon/coupon-list'\n\nexport default {\n  components: { UploadImgs, CouponList },\n  props: {\n    isCreate: {\n      type: Boolean,\n      default: false,\n    },\n    activityId: {\n      type: String,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      form: {\n        id: null,\n        name: '',\n        title: '',\n        description: '',\n        online: 1,\n        remark: '',\n        coupon_ids: [],\n      },\n      types: ['下线', '上线'],\n      range: '',\n      pickerOptions: {\n        shortcuts: [\n          {\n            text: '最近一周',\n            onClick(picker) {\n              const end = new Date()\n              const start = new Date()\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 7)\n              picker.$emit('pick', [start, end])\n            },\n          },\n          {\n            text: '最近一个月',\n            onClick(picker) {\n              const end = new Date()\n              const start = new Date()\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 30)\n              picker.$emit('pick', [start, end])\n            },\n          },\n          {\n            text: '最近三个月',\n            onClick(picker) {\n              const end = new Date()\n              const start = new Date()\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 90)\n              picker.$emit('pick', [start, end])\n            },\n          },\n        ],\n      },\n      rules: {\n        minWidth: 10,\n        minHeight: 10,\n        maxSize: 5,\n      },\n      initCoverData: [],\n      initTopData: [],\n      categoryIds: [],\n      couponIds: [],\n      maxNum: 1,\n      cascaderCategoryProps: {\n        lazy: true,\n        multiple: true,\n        async lazyLoad(node, resolve) {\n          const { level } = node\n          try {\n            const suggestions = await Category.getList()\n            const nodes = suggestions.map(item => ({\n              value: item.id,\n              label: `${item.id}-${item.name}`,\n              leaf: level >= 0,\n            }))\n            resolve(nodes)\n          } catch (error) {\n            this.$message.error('获取分类信息失败，请检查网络')\n          }\n        },\n      },\n      cascaderCouponProps: {\n        lazy: true,\n        multiple: true,\n        async lazyLoad(node, resolve) {\n          const { level } = node\n          try {\n            const suggestions = await coupon.getSuggestions(null)\n            const nodes = suggestions.map(item => ({\n              value: item.id,\n              label: `${item.id}-${item.name}`,\n              leaf: level >= 0,\n            }))\n            resolve(nodes)\n          } catch (error) {\n            this.$message.error('获取优惠卷信息失败，请检查网络')\n          }\n        },\n      },\n    }\n  },\n  async mounted() {\n    if (!this.isCreate) {\n      const res = await Activity.getActivityDetail(this.activityId)\n      this.form = res\n      const end = new Date(res.end_time)\n      const start = new Date(res.start_time)\n      this.range = [start, end]\n      this.initCoverData = [\n        {\n          id: res.id,\n          display: res.entrance_img,\n        },\n      ]\n\n      this.initTopData = [\n        {\n          id: res.id,\n          display: res.internal_top_img,\n        },\n      ]\n      this.couponIds = res.coupon_ids.map(it => [it])\n      this.form.coupon_ids = res.coupon_ids\n    }\n  },\n  methods: {\n    // eslint-disable-next-line\n    async submitForm(formName) {\n      await this.getValue()\n      try {\n        const postData = { ...this.form }\n        if (this.form.activity_cover_id === 0) {\n          this.form.activity_cover_id = null\n        }\n        postData.coupon_ids = this.couponIds.map(it => it[0])\n        postData.start_time = this.dateFormat(this.range[0])\n        postData.end_time = this.dateFormat(this.range[1])\n        let res\n        if (this.isCreate) {\n          res = await Activity.addActivity(postData)\n        } else {\n          res = await Activity.editActivity(\n            this.activityId,\n            // eslint-disable-next-line\n            postData,\n          )\n        }\n        if (res.code < window.MAX_SUCCESS_CODE) {\n          this.$message.success(`${res.message}`)\n          this.$confirm('是否返回上一页?', '提示', {\n            confirmButtonText: '是',\n            cancelButtonText: '否',\n            type: 'info',\n          }).then(async () => {\n            this.$emit('editClose')\n          })\n        }\n      } catch (error) {\n        console.error(error)\n      }\n    },\n    // 重置表单\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    },\n    back() {\n      this.$emit('editClose')\n    },\n    dateFormat(val) {\n      return dayjs(val).format('YYYY-MM-DD HH:mm:ss')\n    },\n    async getValue() {\n      const val = await this.$refs.uploadTopEle.getValue()\n      if (val && val.length > 0) {\n        this.form.internal_top_img = val[0].display\n      }\n      const val1 = await this.$refs.uploadCoverEle.getValue()\n      if (val1 && val1.length > 0) {\n        this.form.entrance_img = val1[0].display\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.el-divider--horizontal {\n  margin: 0;\n}\n\n.container {\n  .title {\n    height: 59px;\n    line-height: 59px;\n    color: $parent-title-color;\n    font-size: 16px;\n    font-weight: 500;\n    text-indent: 40px;\n\n    .back {\n      float: right;\n      margin-right: 40px;\n      cursor: pointer;\n    }\n  }\n\n  .wrap {\n    padding: 20px;\n  }\n\n  .submit {\n    float: left;\n  }\n}\n\n.my-autocomplete {\n  li {\n    line-height: normal;\n    padding: 7px;\n    display: inline-flex;\n    align-content: space-around;\n    .name {\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n    .id {\n      margin-right: 15px;\n      font-size: 12px;\n      color: #b4b4b4;\n    }\n\n    .highlighted .addr {\n      color: #ddd;\n    }\n  }\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}