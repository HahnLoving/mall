{"ast":null,"code":"import _objectSpread from \"/Users/zhahn/Documents/Hahn/\\u81EA\\u8003/\\u9879\\u76EE/mall_cms/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport { mapGetters } from 'vuex';\nimport emitter from 'lin/util/emitter';\nimport Config from '@/config/index';\nexport default {\n  data: function data() {\n    return {\n      groups: [],\n      sidebar: '',\n      showSearchList: false,\n      showSidebarSearch: Config.showSidebarSearch\n    };\n  },\n  computed: _objectSpread({}, mapGetters(['sidebarList'])),\n  mounted: function mounted() {\n    var _this = this;\n\n    emitter.on('removeSidebarSearch', function () {\n      _this.showSidebarSearch = false;\n    });\n    emitter.on('showSidebarSearch', function () {\n      if (Config.showSidebarSearch) {\n        _this.showSidebarSearch = true;\n      }\n    });\n  },\n  methods: {\n    handleChange: function handleChange(val) {\n      this.groups = [];\n      this.sidebar = '';\n      this.showSearchList = false;\n      this.$router.push(val);\n    },\n    toSearch: function toSearch() {\n      var _this2 = this;\n\n      this.showSearchList = true;\n      setTimeout(function () {\n        _this2.$refs.searchInput.focus();\n      }, 200);\n    },\n    search: function search(val) {\n      var _this3 = this;\n\n      this.groups = []; // 深度遍历配置树, 摘取叶子节点作为路由部分\n\n      function deepTravel(config, fuc) {\n        if (Array.isArray(config)) {\n          config.forEach(function (subConfig) {\n            deepTravel(subConfig, fuc);\n          });\n        } else if (config.children) {\n          config.children.forEach(function (subConfig) {\n            deepTravel(subConfig, fuc);\n          });\n        } else {\n          fuc(config);\n        }\n      }\n\n      deepTravel(this.sidebarList, function (viewConfig) {\n        // 构造舞台view路由\n        if (viewConfig.title.includes(val)) {\n          var viewRouter = {};\n          viewRouter.path = viewConfig.path;\n          viewRouter.title = viewConfig.title;\n          viewRouter.key = Math.random();\n\n          _this3.groups.push(viewRouter);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"sources":["/Users/zhahn/Documents/Hahn/自考/项目/mall_cms/src/component/layout/sidebar/search.vue"],"names":[],"mappings":";;;;;AAoBA,SAAS,UAAT,QAA2B,MAA3B;AACA,OAAO,OAAP,MAAoB,kBAApB;AAEA,OAAO,MAAP,MAAmB,gBAAnB;AAEA,eAAe;AACb,EAAA,IADa,kBACN;AACL,WAAO;AACL,MAAA,MAAM,EAAE,EADH;AAEL,MAAA,OAAO,EAAE,EAFJ;AAGL,MAAA,cAAc,EAAE,KAHX;AAIL,MAAA,iBAAiB,EAAE,MAAM,CAAC;AAJrB,KAAP;AAMD,GARY;AASb,EAAA,QAAQ,oBACH,UAAU,CAAC,CAAC,aAAD,CAAD,CADP,CATK;AAYb,EAAA,OAZa,qBAYH;AAAA;;AACR,IAAA,OAAO,CAAC,EAAR,CAAW,qBAAX,EAAkC,YAAM;AACtC,MAAA,KAAI,CAAC,iBAAL,GAAyB,KAAzB;AACD,KAFD;AAGA,IAAA,OAAO,CAAC,EAAR,CAAW,mBAAX,EAAgC,YAAM;AACpC,UAAI,MAAM,CAAC,iBAAX,EAA8B;AAC5B,QAAA,KAAI,CAAC,iBAAL,GAAyB,IAAzB;AACF;AACD,KAJD;AAKD,GArBY;AAsBb,EAAA,OAAO,EAAE;AACP,IAAA,YADO,wBACM,GADN,EACW;AAChB,WAAK,MAAL,GAAc,EAAd;AACA,WAAK,OAAL,GAAe,EAAf;AACA,WAAK,cAAL,GAAsB,KAAtB;AACA,WAAK,OAAL,CAAa,IAAb,CAAkB,GAAlB;AACD,KANM;AAOP,IAAA,QAPO,sBAOI;AAAA;;AACT,WAAK,cAAL,GAAsB,IAAtB;AACA,MAAA,UAAU,CAAC,YAAM;AACf,QAAA,MAAI,CAAC,KAAL,CAAW,WAAX,CAAuB,KAAvB;AACD,OAFS,EAEP,GAFO,CAAV;AAGD,KAZM;AAaP,IAAA,MAbO,kBAaA,GAbA,EAaK;AAAA;;AACV,WAAK,MAAL,GAAc,EAAd,CADU,CAGV;;AACA,eAAS,UAAT,CAAoB,MAApB,EAA4B,GAA5B,EAAiC;AAC/B,YAAI,KAAK,CAAC,OAAN,CAAc,MAAd,CAAJ,EAA2B;AACzB,UAAA,MAAM,CAAC,OAAP,CAAe,UAAA,SAAQ,EAAK;AAC1B,YAAA,UAAU,CAAC,SAAD,EAAY,GAAZ,CAAV;AACD,WAFD;AAGF,SAJA,MAIO,IAAI,MAAM,CAAC,QAAX,EAAqB;AAC1B,UAAA,MAAM,CAAC,QAAP,CAAgB,OAAhB,CAAwB,UAAA,SAAQ,EAAK;AACnC,YAAA,UAAU,CAAC,SAAD,EAAY,GAAZ,CAAV;AACD,WAFD;AAGF,SAJO,MAIA;AACL,UAAA,GAAG,CAAC,MAAD,CAAH;AACF;AACF;;AAEA,MAAA,UAAU,CAAC,KAAK,WAAN,EAAmB,UAAA,UAAS,EAAK;AACzC;AACA,YAAI,UAAU,CAAC,KAAX,CAAiB,QAAjB,CAA0B,GAA1B,CAAJ,EAAoC;AAClC,cAAM,UAAS,GAAI,EAAnB;AACA,UAAA,UAAU,CAAC,IAAX,GAAkB,UAAU,CAAC,IAA7B;AACA,UAAA,UAAU,CAAC,KAAX,GAAmB,UAAU,CAAC,KAA9B;AACA,UAAA,UAAU,CAAC,GAAX,GAAiB,IAAI,CAAC,MAAL,EAAjB;;AACA,UAAA,MAAI,CAAC,MAAL,CAAY,IAAZ,CAAiB,UAAjB;AACF;AACD,OATS,CAAV;AAUD;AAzCM;AAtBI,CAAf","sourcesContent":["<template>\n  <div v-if=\"showSidebarSearch\" style=\"margin-top: 15px\">\n    <div class=\"search-display\" v-if=\"!showSearchList\" @click=\"toSearch\"><i class=\"el-icon-search\"></i></div>\n    <el-select\n      clearable\n      filterable\n      class=\"search\"\n      v-model=\"sidebar\"\n      ref=\"searchInput\"\n      v-if=\"showSearchList\"\n      :filter-method=\"search\"\n      @change=\"handleChange\"\n      placeholder=\"请输入关键字\"\n    >\n      <el-option v-for=\"item in groups\" :key=\"item.key\" :label=\"item.title\" :value=\"item.path\"> </el-option>\n    </el-select>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport emitter from 'lin/util/emitter'\n\nimport Config from '@/config/index'\n\nexport default {\n  data() {\n    return {\n      groups: [],\n      sidebar: '',\n      showSearchList: false,\n      showSidebarSearch: Config.showSidebarSearch,\n    }\n  },\n  computed: {\n    ...mapGetters(['sidebarList']),\n  },\n  mounted() {\n    emitter.on('removeSidebarSearch', () => {\n      this.showSidebarSearch = false\n    })\n    emitter.on('showSidebarSearch', () => {\n      if (Config.showSidebarSearch) {\n        this.showSidebarSearch = true\n      }\n    })\n  },\n  methods: {\n    handleChange(val) {\n      this.groups = []\n      this.sidebar = ''\n      this.showSearchList = false\n      this.$router.push(val)\n    },\n    toSearch() {\n      this.showSearchList = true\n      setTimeout(() => {\n        this.$refs.searchInput.focus()\n      }, 200)\n    },\n    search(val) {\n      this.groups = []\n\n      // 深度遍历配置树, 摘取叶子节点作为路由部分\n      function deepTravel(config, fuc) {\n        if (Array.isArray(config)) {\n          config.forEach(subConfig => {\n            deepTravel(subConfig, fuc)\n          })\n        } else if (config.children) {\n          config.children.forEach(subConfig => {\n            deepTravel(subConfig, fuc)\n          })\n        } else {\n          fuc(config)\n        }\n      }\n\n      deepTravel(this.sidebarList, viewConfig => {\n        // 构造舞台view路由\n        if (viewConfig.title.includes(val)) {\n          const viewRouter = {}\n          viewRouter.path = viewConfig.path\n          viewRouter.title = viewConfig.title\n          viewRouter.key = Math.random()\n          this.groups.push(viewRouter)\n        }\n      })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.search-display {\n  position: relative;\n  width: 80%;\n  margin: 0 auto;\n  height: 36px;\n  border-bottom: 1px rgb(185, 190, 195) solid;\n  cursor: pointer;\n\n  .el-icon-search {\n    position: absolute;\n    left: 1px;\n    top: 10px;\n    color: rgb(185, 190, 195);\n  }\n}\n\n.search {\n  width: 80%;\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}